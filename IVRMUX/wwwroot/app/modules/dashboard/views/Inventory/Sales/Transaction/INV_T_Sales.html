<style>
    .multiselect {
        width: 24.1em;
        height: 11em;
        border: solid 1px #5cb7ff;
        overflow: auto;
        margin-left: 0;
        margin-bottom: 1%;
        padding: 2%;
    }
</style>

<section class="content">
    <div class="" ng-init="loaddata()">

        <form class="form-horizontal" role="form" name="myForm" enctype="multipart/form-data" novalidate>
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Sales</h3>
                    <div class="box-tools pull-right">
                        <button type="button" ng-click="ShowHide1()" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                    </div>
                </div>

                <div class="col-sm-10 col-lg-offset-1">
                    <div class="well">
                        <div class="text-center" ng-init="invmsL_StuOtherFlg='Student'">
                            <label class="radio-inline">
                                <input type="radio" value="Student" name="student" ng-disabled="editS" ng-model="invmsL_StuOtherFlg">
                                <span class="lbl padding-8"> Student </span>
                            </label>
                            <label class="radio-inline">
                                <input type="radio" value="Staff" name="staff" ng-disabled="editS" ng-model="invmsL_StuOtherFlg">
                                <span class="lbl padding-8">Staff</span>
                            </label>
                            <label class="radio-inline">
                                <input type="radio" value="Customer" name="customer" ng-disabled="editS" ng-model="invmsL_StuOtherFlg">
                                <span class="lbl padding-8">Customer</span>
                            </label>
                        </div>
                    </div>
                </div>
                <br />
                <br />
                <div class="box-body">
                    <!--====================== Sales===========================-->
                    <div class="box box-primary">
                        <div class="box-body">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Sale Date:<strong style="color:red;display:inline; font-weight: bolder; margin-left: 7px;">*</strong></label>
                                        <div class="col-sm-7">
                                            <md-datepicker ng-model="invmsL_SalesDate" name="ddsale" md-placeholder="Enter Date"></md-datepicker>
                                        </div>
                                    </div>
                                    <!--<div class="form-group">
                                        <label class="control-label col-sm-4">Sale No:<span style="color:Red">*</span></label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control active" name="saleno" placeholder="Enter Sale No" ng-model="invmsL_SalesNo">
                                            <div class="error-messages" ng-if="interacted(myForm.saleno)" ng-messages="myForm.saleno.$error">
                                                <div ng-message="required">Please Enter Sales No </div>
                                            </div>
                                        </div>
                                    </div>-->
                                    <!--<div class="form-group">
                                        <label class="control-label col-sm-4">Sale Value:<span style="color:Red">*</span></label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control active" name="salevalue" placeholder="Enter Sale Value" ng-model="invmsL_SalesValue">
                                            <div class="error-messages" ng-if="interacted(myForm.salevalue)" ng-messages="myForm.salevalue.$error">
                                                <div ng-message="required">Please Enter Sale Value </div>
                                            </div>
                                        </div>
                                    </div>-->

                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Store :<span style="color:red;">*</span></label>
                                        <div class="col-sm-8">
                                            <select class="form-control" ng-model="invmsT_Id" name="store" ng-disabled="editS" ng-change="storeChange();" required>
                                                <option value="">Select Store </option>
                                                <option ng-repeat="option in get_Store" value="{{option.invmsT_Id}}" ng-selected="{{option.Selected == true}}">
                                                    {{option.invmS_StoreName}}
                                                </option>
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm.store)" ng-messages="myForm.store.$error">
                                                <div ng-message="required">Please Select Store </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!--<div class="form-group">
                                        <label class="control-label col-sm-4">Product :</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" ng-model="invmP_Id" name="store" ng-disabled="editS" ng-change="onproductChange();">
                                                <option value="">Select Product </option>
                                                <option ng-repeat="option in get_Product" value="{{option.invmP_Id}}" ng-selected="{{option.Selected == true}}">
                                                    {{option.invmP_ProductName}}
                                                </option>
                                            </select>

                                        </div>
                                    </div>-->

                                </div>

                                <div class="col-sm-6">

                                    <!-- ======================STUDENT====================== -->
                                    <div class="" ng-if="invmsL_StuOtherFlg=='Student'">
                                        <div class="row">
                                            <div class="col-sm-10 col-lg-offset-2">
                                                <div class="well" ng-hide="editS">
                                                    <div class="text-center">
                                                        <label class="radio-inline">
                                                            <input type="radio" value="I" name="checkStu" ng-model="obj.stu_Flag" ng-change="radioChange();" ng-required="invmsL_StuOtherFlg == 'Student' || !editS">
                                                            <span class="lbl padding-8"> Individual </span>
                                                        </label>
                                                        <label class="radio-inline">
                                                            <input type="radio" value="C" name="checkStu" ng-model="obj.stu_Flag" ng-change="radioChange();" ng-required="invmsL_StuOtherFlg == 'Student' || !editS">
                                                            <span class="lbl padding-8">Class</span>
                                                        </label>
                                                        <label class="radio-inline">
                                                            <input type="radio" value="CS" name="checkStu" ng-model="obj.stu_Flag" ng-change="radioChange();" ng-required="invmsL_StuOtherFlg == 'Student' || !editS">
                                                            <span class="lbl padding-8">Class & Section</span>
                                                        </label>
                                                    </div>
                                                    <div class="error-messages" ng-if="interacted(myForm.checkStu)" ng-messages="myForm.checkStu.$error">
                                                        <div ng-message="required">Please Select </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" ng-if="obj.stu_Flag=='I'">
                                            <label class="control-label col-sm-3">Student Name:<span style="color:Red">*</span></label>
                                            <div class="col-sm-8">
                                                <div ng-if="!editS">
                                                    <ui-select id="sel1" name="student" ng-model="$parent.obj.amsT_Id" theme="bootstrap" ng-keyup="searchfilter($select);" title="Select Student" ng-required="obj.stu_Flag== 'I' && invmsL_StuOtherFlg=='Student'">
                                                        <ui-select-match ng-trim="false" placeholder="Select or search Student in the list...">{{$select.selected.studentname}}</ui-select-match>
                                                        <ui-select-choices repeat="option in get_Student_Cls_Sec | filter: $select.search " value="{{option.amsT_Id}}" ng-selected="{{option.Selected == true}}">
                                                            <div ng-bind-html="option.studentname +':'+ option.AMST_AdmNo | highlight: $select.search"></div>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <div class="error-messages" ng-if="interacted(myForm.student)" ng-messages="myForm.student.$error">
                                                        <div ng-message="required">Please Select Student Name </div>
                                                    </div>
                                                </div>
                                                <div ng-if="editS">
                                                    <span>
                                                        <label class="control-label col-sm-10" ng-model="amsT_Id"><b>{{studentname}} : {{AMST_AdmNo}}</b></label>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" ng-if="obj.stu_Flag=='C'">
                                            <span ng-show="!editS"><label for="sel2" class="control-label col-sm-3">Class : <span style="color:Red">*</span></label></span>
                                            <span ng-show="editS"><label for="sel2" class="control-label col-sm-3">Student : <span style="color:Red">*</span></label></span>
                                            <div class="col-sm-8">
                                                <div class="multiselect col-sm-8">
                                                    <select class="form-control" data-ng-model="obj.asmcL_Id" ng-show="!editS" name="cls" ng-change="classSectionflag();">
                                                        <option value="">Select Class</option>
                                                        <option ng-repeat="clsec in get_Student_Cls_Sec" value="{{clsec.ASMCL_Id}}">{{clsec.ASMCL_ClassName}}</option>
                                                    </select>
                                                    <span ng-if="get_Studentlist.length>0">
                                                        <input class="form-control" ng-model="obj.searchValueC" ng-if="!editS" type="text" placeholder="search Student here...">
                                                    </span>
                                                    <label>
                                                        <input name="classes" value="1" ng-model="usercheckC" ng-disabled="transgrid" type="checkbox" ng-click="all_checkC(usercheckC)">
                                                        <span class="lbl padding-8">
                                                            All
                                                        </span>
                                                    </label>
                                                    <label ng-model="asmcl" ng-repeat="cls in get_Studentlist | filter : obj.searchValueC">
                                                        <input name="quotaCM" ng-model="cls.clsck" type="checkbox" ng-disabled="transgrid" ng-click="togchkbxC();" ng-blur="checkstockqty()" ng-required="isOptionsRequired()">   <!--ng-required="isOptionsRequired()"-->
                                                        <span class="lbl padding-8">
                                                            {{cls.studentname}} : {{cls.AMST_AdmNo}}
                                                        </span>
                                                    </label>

                                                </div>
                                                <!--<div class="error-messages" ng-if="interacted(myForm.quotaCM)" ng-messages="myForm.quotaCM.$error">
                                                    <div ng-message="required">Select Class</div>
                                                </div>-->
                                                <div class="error-messages" ng-if="interacted(myForm.quotaCM)" ng-messages="myForm.quotaCM.$error">
                                                    <div ng-message="required">Please Select Atleast One checkbox</div>
                                                </div>
                                            </div>
                                            <div class="col-sm-10 col-sm-offset-8" ng-if="get_Studentlist.length>0">
                                                <md-button type="button" class="md-raised md-primary" ng-disabled="editS" ng-click="showtrans()">
                                                    <i class="fa fa-angle-down" aria-hidden="true"></i> Show
                                                </md-button>
                                            </div>
                                        </div>

                                        <div class="form-group" ng-if="obj.stu_Flag=='CS'">
                                            <label for="sel2" class="control-label col-sm-3">Class & Section : <span style="color:Red">*</span></label>
                                            <div class="col-sm-8">
                                                <div class="multiselect col-sm-8">
                                                    <!--<select class="form-control" ng-model="asmS_Id" name="clssec" ng-change="classSectionC();">
                                                        <option value="">Select Class</option>
                                                        <option ng-repeat="clse in get_Student_Cls_Sec" value="{{clse.ASMS_Id}}">{{clse.clsSec}}</option>
                                                    </select>-->
                                                  
                                                    <select class="form-control" data-ng-model="obj.asmcL_Id" name="cls1" ng-change="classSectionC();">
                                                        <option value="">Select Class</option>
                                                        <option ng-repeat="clsec1 in get_Student_Cls_Sec" value="{{clsec1.ASMCL_Id}}">{{clsec1.ASMCL_ClassName}}</option>
                                                    </select>
                                                    <select class="form-control" ng-model="obj.asmS_Id" name="clssec" ng-change="classSectionCS();">
                                                        <option value="">Select Section</option>
                                                        <option ng-repeat="clse in get_sectionlist" value="{{clse.asmS_Id}}">{{clse.asmC_SectionName}}</option>
                                                    </select>

                                                    <span ng-if="get_Studentlist.length>0">
                                                        <input class="form-control" ng-model="obj.searchValueCS" type="text" placeholder="search Student here...">
                                                    </span>
                                                    <label>
                                                        <input name="classes" value="" ng-model="usercheckCS" ng-disabled="transgrid" type="checkbox" ng-click="all_checkCS(usercheckCS)">
                                                        <span class="lbl padding-8">
                                                            All
                                                        </span>
                                                    </label>
                                                    <label ng-repeat="sec in get_Studentlist | filter : obj.searchValueCS">
                                                        <input name="section" ng-model="sec.secck" type="checkbox" ng-disabled="transgrid" ng-click="togchkbxCS();" ng-required="isOptionsRequired1()"> <!--ng-required="isOptionsRequired1()"-->
                                                        <span class="lbl padding-8">
                                                            {{sec.studentname}} : {{sec.AMST_AdmNo}}
                                                        </span>
                                                    </label>

                                                </div>
                                                <div class="error-messages" ng-if="interacted(myForm.section)" ng-messages="myForm.section.$error">
                                                    <div ng-message="required">Please Select Atleast One checkbox</div>
                                                </div>
                                            </div>
                                            <div class="col-sm-10 col-sm-offset-8" ng-if="get_Studentlist.length>0">
                                                <md-button type="button" class="md-raised md-primary" ng-click="showtrans()">
                                                    <i class="fa fa-angle-down" aria-hidden="true"></i> Show
                                                </md-button>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- =====================Staff========================= -->
                                    <div class="" ng-if="invmsL_StuOtherFlg=='Staff'">
                                        <div class="form-group">
                                            <label class="control-label col-sm-3">Staff:<span style="color:Red">*</span></label>
                                            <div class="col-sm-8">
                                                <div ng-show="!editS">
                                                    <ui-select id="sel1" name="employee" ng-model="$parent.obj.hrmE_Id" theme="bootstrap" ng-keyup="searchfilter($select);" title="Select Employee" ng-required="invmsL_StuOtherFlg=='Staff'">
                                                        <ui-select-match ng-trim="false" placeholder="Select or search employee in the list...">{{$select.selected.employeename}}</ui-select-match>
                                                        <ui-select-choices repeat="option in get_employee | filter: $select.search " value="{{option.hrmE_Id}}" ng-selected="{{option.Selected == true}}">
                                                            <div ng-bind-html="option.employeename | highlight: $select.search"></div>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                                <div ng-show="editS">
                                                    <span>
                                                        <label class="control-label col-sm-10" ng-model="hrmE_Id"><b>{{employeename}}</b></label>
                                                    </span>
                                                </div>
                                                <div class="error-messages" ng-if="interacted(myForm.employee)" ng-messages="myForm.employee.$error">
                                                    <div ng-message="required">Please Select Staff</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ===============Customer============================ -->
                                    <div class="" ng-if="invmsL_StuOtherFlg=='Customer'">
                                        <div class="form-group">
                                            <label class="control-label col-sm-3">Customer:<span style="color:Red">*</span></label>
                                            <div class="col-sm-8">
                                                <div ng-show="!editS">
                                                    <ui-select id="sel1" name="customer" ng-model="$parent.obj.invmC_Id" theme="bootstrap" ng-keyup="searchfilter($select);" title="Select Customer" ng-required="invmsL_StuOtherFlg == 'Customer'">
                                                        <ui-select-match ng-trim="false" placeholder="Select or search Customer in the list...">{{$select.selected.invmC_CustomerName}}</ui-select-match>
                                                        <ui-select-choices repeat="option in get_customer | filter: $select.search " value="{{option.invmC_Id}}" ng-selected="{{option.Selected == true}}">
                                                            <div ng-bind-html="option.invmC_CustomerName | highlight: $select.search"></div>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                                <div ng-show="editS">
                                                    <span>
                                                        <label class="control-label col-sm-10" ng-model="invmC_Id"><b>{{invmC_CustomerName}}</b></label>
                                                    </span>
                                                </div>
                                                <div class="error-messages" ng-if="interacted(myForm.customer)" ng-messages="myForm.customer.$error">
                                                    <div ng-message="required">Please Select Customer</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr />
                    <!--====================== Sales Transcation ===========================-->
                    <div ng-show="transgrid">
                        <div class="" ng-show="get_item.length>0">
                            <!--<div class="clearfix">
                            <div style="width:1080px;height: 250px;overflow:scroll;">
                                <table class="table table-responsive table-bordered clearfix" style="width:1060px;">-->
                            <div class="clearfix">
                                <div style="width:100%;overflow:auto;  min-height:200px;">
                                    <table class="table table-responsive table-bordered clearfix" style="min-width:1200px;">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th width="50">SL NO</th>
                                                <th width="250"><a href="" ng-click="sort('invmI_Id')">Item Name</a></th>
                                                <th width="100"><a href="" ng-click="sort('invmuoM_Id')">UOM</a></th>
                                                <th width="100"><a href="" ng-click="sort('invtsL_BatchNo')">Batch No</a></th>
                                                <th width="100"><a href="" ng-click="sort('invtsL_SalesPrice')">Sales Price</a></th>
                                                <th width="160"><a href="" ng-click="sort('invtsL_SalesQty')">Sales Qty</a></th>
                                                <th width="160"><a href="" ng-click="sort('invtsL_DiscountAmt')">Discount</a></th>
                                                <th width="100"><a href="" ng-click="sort('invtsL_Amount')">Amount</a></th>
                                                <th width="100"><a href="" ng-click="sort('invtsL_Naration')">Narration</a></th>
                                                <th width="20"><a href="" ng-click="sort('invtsL_TaxAmt')">View</a></th>
                                                <th width="100"><a href="" ng-click="sort('invtsL_TaxAmt')">Tax</a></th>
                                                <th width="50">Action</th>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            <tr ng-repeat="objs in transrows" ng-form="dataform1">
                                                <td>
                                                    <div ng-show="editS">
                                                        <label>
                                                            <input type="checkbox" name="adcheckt" value="{{objs.editck}}" ng-model="objs.checkedvalue" ng-change="onitemchange(objs)"><span class="lbl padding-8"></span>
                                                        </label>
                                                    </div>
                                                </td>
                                                <td>{{$index+1}}</td>
                                                <td>
                                                    <div ng-show="!editS">
                                                        <ui-select id="sel1" name="item" ng-model="$parent.objs.invmI_Id" theme="bootstrap" ng-keyup="searchfilter($select);" ng-change="onitemchange($parent.objs.invmI_Id,objs)" title="Select Item" style="width:250px;" required>
                                                            <ui-select-match ng-trim="false" placeholder="Select or search Item in the list...">{{$select.selected.INVMI_ItemName}}</ui-select-match>
                                                            <ui-select-choices repeat="option in get_item | filter: $select.search " value="{{option.INVMI_Id}}" style="width:250px;" ng-selected="{{option.Selected == true}}">
                                                                <div ng-bind-html="option.INVMI_ItemName +'('+ option.INVSTO_SalesRate+')' | highlight: $select.search"></div>
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                    <div ng-show="editS">
                                                        <span>
                                                            <label class="control-label col-sm-10" ng-model="objs.invmI_Id"><b>{{objs.invmI_ItemName}} : {{objs.invtsL_SalesPrice}}</b></label>
                                                        </span>
                                                    </div>
                                                    <div class="error-messages" ng-if="interacted(dataform1.itemnm)" ng-messages="dataform1.itemnm.$error">
                                                        <div ng-message="required">Select Itemname</div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <input type="text" name="uom" class="form-control active" ng-disabled="true" value="objs.invmuoM_Id" ng-model="objs.invmuoM_UOM" placeholder="UOM"/>
                                                </td>
                                                <td>
                                                    <input type="text" name="batchno" class="form-control active" ng-disabled="true" ng-model="objs.invtsL_BatchNo" placeholder="Batch No."ng-required="objs.invtsL_BatchNo" />
                                                </td>
                                                <td>
                                                    <div ng-show="!editS">
                                                        <input type="text" name="saleprice" class="form-control active" ng-disabled="true"
                                                               ng-model="objs.invmI_Id.INVSTO_SalesRate" placeholder="Sales Price" step="0.01" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" />
                                                    </div>
                                                    <div ng-show="editS">
                                                        <input type="text" name="saleprice" class="form-control active" ng-disabled="true" ng-model="objs.invtsL_SalesPrice" placeholder="Sales Price" step="0.01" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" />
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="row">
                                                        <div ng-if="obj.stu_Flag=='C' || obj.stu_Flag=='CS'">
                                                            <div class="col-sm-5 padding-right-none">
                                                                <input type="text" name="salequantity1" class="form-control active" ng-model="objs.salqty" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" ng-disabled="!objs.checkedvalue && editS" ng-blur="countAmt(objs,transrows)" placeholder="Quantity" />
                                                            </div>
                                                            <div class="col-sm-7 padding-left-none">
                                                                <input type="text" name="salequantity" class="form-control active" ng-disabled="true" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" ng-model="objs.invtsL_SalesQty" ng-blur="countAmt(objs,transrows)" placeholder="Quantity" ng-required="obj.stu_Flag=='C' || obj.stu_Flag=='CS'" />
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div ng-if="obj.stu_Flag!=='C'&& obj.stu_Flag!=='CS'">
                                                        <input type="text" name="salequantity" class="form-control active" ng-model="objs.invtsL_SalesQty" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" ng-disabled="!objs.checkedvalue && editS" ng-blur="countAmt(objs,transrows)" placeholder="Quantity" ng-required="obj.stu_Flag!=='C'&& obj.stu_Flag!=='CS'" />
                                                    </div>
                                                    <div class="error-messages" ng-if="interacted(dataform1.salequantity)" ng-messages="dataform1.salequantity.$error">
                                                        <div ng-message="required">Enter Quantity</div>
                                                    </div>
                                                </td>

                                                <td>
                                                    <div class="row">
                                                        <div ng-if="obj.stu_Flag=='C' || obj.stu_Flag=='CS'">
                                                            <div class="col-sm-5 padding-right-none">
                                                                <input type="text" name="discount1" class="form-control active" ng-disabled="(!objs.checkedvalue && editS)" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" ng-model="objs.disctammt" ng-blur="countDiscount(objs,transrows)" placeholder="Discount" />
                                                            </div>

                                                            <div class="col-sm-7 padding-left-none">
                                                                <input type="text" name="discount" class="form-control active" ng-disabled="true" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" ng-model="objs.invtsL_DiscountAmt" ng-blur="countDiscount(objs,transrows)" placeholder="Discount" ng-required="obj.stu_Flag=='C' || obj.stu_Flag=='CS'" />
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div ng-if="obj.stu_Flag!=='C'&& obj.stu_Flag!=='CS'">
                                                        <input type="text" name="discount" class="form-control active" ng-disabled="(!objs.checkedvalue && editS)" ng-model="objs.invtsL_DiscountAmt" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" ng-blur="countDiscount(objs,transrows)" placeholder="Discount" ng-required="obj.stu_Flag!=='C'&& obj.stu_Flag!=='CS'" />
                                                    </div>
                                                    <div class="error-messages" ng-if="interacted(dataform1.discount)" ng-messages="dataform1.discount.$error">
                                                        <div ng-message="required">Enter Discount</div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <input type="text" name="amount" class="form-control active" ng-model="objs.invtsL_Amount" ng-disabled="!objs.checkedvalue && editS" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" placeholder="Amount" />
                                                </td>
                                                <td>
                                                    <input type="text" name="naration" class="form-control active" ng-model="objs.invtsL_Naration" ng-disabled="!objs.checkedvalue && editS" placeholder="Narration" />
                                                </td>
                                                <td>
                                                    <a ng-if="objs.get_itemTax.length>0" href="javascript:void(0)" class="text-primary" ng-click="viewtxfn(objs);">
                                                        <i class="fa fa-eye" aria-hidden="true"></i>
                                                    </a>
                                                </td>
                                                <!--<td>
                                                    <input type="text" name="taxamt" class="form-control active" ng-model="objs.invtsL_TaxAmt" placeholder="Tax" />
                                                </td>-->
                                                <td>
                                                    <input type="text" name="taxamt" class="form-control active" ng-disabled="true" ng-model="objs.invtsL_TaxAmt" ng-blur="counMtax(objs,transrows)" placeholder="Tax" required />
                                                    <div class="error-messages" ng-if="interacted(dataform1.taxamt)" ng-messages="dataform1.taxamt.$error">
                                                        <div ng-message="required">Enter Tax Value</div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <span ng-show="!editS">
                                                        <span class="" ng-hide="salesrows.length > 10">

                                                            <a href="" ng-show="$last" ng-click="addsalesrows()">
                                                                <i class="fa fa-plus"></i>
                                                            </a>
                                                        </span>
                                                        <span class="" id="remove" ng-hide="transrows.length ==1">
                                                            <a href="" ng-click="removesalesrows($index,objs)">
                                                                <i class="fa fa-minus" aria-hidden="true"></i>
                                                            </a>
                                                        </span>
                                                    </span>
                                                    <span ng-show="editS">
                                                        <span>
                                                            <i class="fa fa-ban"></i>
                                                        </span>
                                                    </span>
                                                </td>
                                                <td hidden="hidden">{{objs.invtsL_Id}}</td>
                                            </tr>
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                            <div class="row margin-top-10">
                                <div class="col-sm-6">
                                    <!--<div class="form-group" ng-repeat="as in availablestock">
        <label class="control-label col-sm-3">Available Stock :<span style="color:Red">*</span></label>
        <div class="col-sm-7">
            <input type="text" class="form-control active" name="availablestock" ng-disabled="true" placeholder="Max Stock" ng-model="as.AvaiableStock">
        </div>
    </div>-->
                                    <div class="form-group">
                                        <!--ng-if="availablestock.length>0"-->
                                        <label class="control-label col-sm-3">Total Stock :<span style="color:Red">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control active" name="availablestock" ng-disabled="true" placeholder="Max Stock" ng-model="availableitems">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-sm-2">Remarks :</label>
                                        <div class="col-sm-8">
                                            <textarea class="form-control" rows="3" id="comment" ng-model="invmsL_Remarks"></textarea>
                                        </div>
                                    </div>
                                    <!--<div class="form-group">invmsL_TotalAmount
        <div class="col-sm-3">
            <label class="checkbox-inline">
                <input type="checkbox" value="1" ng-disabled="true" name="crditflg" ng-model="invmsL_CreditFlg">
                <span class="lbl padding-4">Credit</span>
            </label>
        </div>
    </div>-->
                                </div>
                                <div class="col-sm-6">
                                    <!--<div class="form-group">
                                        <label class="control-label col-sm-4">Total Basic Amount:</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control active" name="tamt" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" placeholder="Total Amount" ng-model="invmsL_TotalAmount" ng-change="totalamoutchange()">
                                        </div>
                                    </div>-->
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Total Basic Amount:</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control active" name="tamt" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" placeholder="Total Amount" ng-model="invmsL_TotalAmount" step="0.01" ng-change="totalamoutchange()" ng-disabled="true">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Total Discount:</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control active" name="tdiscount" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" placeholder="Total Discount" ng-model="invmsL_TotDiscount" ng-change="totalDiscountchange()" ng-disabled="true">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Total Tax:</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control active" name="ttax" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" placeholder="Total Tax" ng-model="invmsL_TotTaxAmt" ng-change="totalTaxchange()" ng-disabled="true">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Sale Value:</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control active" name="purvalue" placeholder="Sale Value" maxlength="20" ng-model="invmsL_SalesValue" ng-disabled="true">
                                            <!--<input type="text" class="form-control active" name="salevalue" allow-pattern="(\s|[0-9.])" maxlength="18" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" step="0.01" placeholder="Sale Value" ng-model="invmsL_SalesValue">-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center">
                        <input type="hidden" ng-model="invmsL_Id" value="{{invmsL_Id}}" />
                        <md-button type="button" class="md-raised md-primary" ng-click="savedata(objs)" ng-disabled="form.$invalid">
                            <i class="fa fa-save" aria-hidden="true"></i> Save
                        </md-button>
                        <md-button type="button" class="md-raised md-warn" ng-click="cancel()" ng-disabled="form.$invalid">
                            <i class="fa fa-times" aria-hidden="true"></i> Cancel
                        </md-button>
                    </div>
                </div>
            </div>
        </form>


        <!--=============================== SALE Grid  ==================================-->
        <div class="box box-primary" ng-show="get_Sale.length>0">
            <div class="box-header with-border">
                <h3 class="box-title">Sale Details</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label class="control-label">
                                <b> Total Grid Records :</b>
                                <label class="badge">
                                    {{presentCountgrid}}
                                </label>
                            </label>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group" ng-if="searchValue1!=''">
                            <label class="control-label">
                                <b>Total Records Searched : </b>
                                <label class="badge">
                                    {{filterValue1.length}}
                                </label>
                            </label>
                        </div>
                    </div>
                    <div class="col-sm-4 pull-right">
                        <div class="form-group">
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-search"></i>
                                </span>
                                <input class="form-control" ng-model="searchValue1" type="text" placeholder="search here...">
                            </div>
                        </div>
                    </div>
                </div>

                <table class="table table-hover table-responsive table-bordered text-center">
                    <thead>
                        <tr>
                            <th>
                                <a href="" ng-click="sortBy('sno')">SL.No.</a>
                            </th>
                            <th><a href="" ng-click="sortBy('invmsL_SalesNo')">Sale No.</a></th>
                            <th><a href="" ng-click="sortBy('invmsL_StuOtherFlg')">Type</a></th>
                            <th><a href="" ng-click="sortBy('invmsL_SalesDate')">Sale Date</a></th>
                            <th><a href="" ng-click="sortBy('invmsL_SalesValue')">Sale Value</a> </th>
                            <th><a href="" ng-click="sortBy('invmsL_TotDiscount')">Total Discount</a></th>
                            <th><a href="" ng-click="sortBy('invmsL_TotTaxAmt')">Total Tax</a> </th>
                            <th><a href="" ng-click="sortBy('invmsL_TotalAmount')">Total Amount</a> </th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr dir-paginate="user in filterValue1 = (get_Sale | filter : searchValue1)  | orderBy:propertyName:reverse |itemsPerPage:itemsPerPage" current-page="currentPage" ng-class-odd="'odd'">
                            <td>{{itemsPerPage *(currentPage-1)+$index+1}}</td>
                            <td>{{user.invmsL_SalesNo}}</td>
                            <td>{{user.invmsL_StuOtherFlg}}</td>
                            <td>{{user.invmsL_SalesDate | date:'dd/MM/yyyy'}}</td>
                            <td>{{user.invmsL_SalesValue}}</td>
                            <td>{{user.invmsL_TotDiscount}}</td>
                            <td>{{user.invmsL_TotTaxAmt}}</td>
                            <td>{{user.invmsL_TotalAmount}}</td>

                            <td class="text-center" style="width: 355px;">
                                <!--<a class="text-aqua" href="" ng-click="edit(user)" data-placement="bottom" data-toggle="tooltip" title="Edit">
                                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                </a>-->
                                <span ng-if="user.invmsL_ActiveFlg === false">
                                    <a href="" ng-click="deactive(user)"
                                       class="text-green" data-placement="bottom" data-toggle="tooltip" title="Activate">
                                        <i> Activate </i>
                                    </a>
                                </span>
                                <span ng-if="user.invmsL_ActiveFlg === true">
                                    <a href="" ng-click="deactive(user)"
                                       class="text-danger" data-placement="bottom" data-toggle="tooltip" title="Deactivate">
                                        <i> Deactivate</i>
                                    </a>
                                </span>
                                &nbsp;&nbsp;
                                <span ng-if="user.invmsL_ActiveFlg === true">
                                    <a href="javascript:void(0)" class="text-primary" data-placement="bottom" data-toggle="modal" title="item" data-ng-model="itemOption" data-target="#myModalS" data-ng-click="mainmodelclick(user)">
                                        <i class="fa fa-eye fa-1x" aria-hidden="true">View Details</i>
                                    </a>
                                </span>
                                <span ng-if="user.invmsL_ActiveFlg === true">
                                    <span ng-if="user.invmsL_StuOtherFlg === 'Student'">
                                        <a href="javascript:void(0)" class="text-primary" data-placement="bottom" data-toggle="modal" title="item" data-ng-model="itemOption" data-target="#myModaltype" data-ng-click="typemodelclick(user)">
                                            <i class="fa fa-eye fa-1x" aria-hidden="true">View Student Details</i>
                                        </a>
                                    </span>
                                    <span ng-if="user.invmsL_StuOtherFlg === 'Staff'">
                                        <a href="javascript:void(0)" class="text-primary" data-placement="bottom" data-toggle="modal" title="item" data-ng-model="itemOption" data-target="#myModaltype" data-ng-click="typemodelclick(user)">
                                            <i class="fa fa-eye fa-1x" aria-hidden="true">View Staff Details</i>
                                        </a>
                                    </span>
                                    <span ng-if="user.invmsL_StuOtherFlg === 'Customer'">
                                        <a href="javascript:void(0)" class="text-primary" data-placement="bottom" data-toggle="modal" title="item" data-ng-model="itemOption" data-target="#myModaltype" data-ng-click="typemodelclick(user)">
                                            <i class="fa fa-eye fa-1x" aria-hidden="true">View Customer Details</i>
                                        </a>
                                    </span>
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <dir-pagination-controls max-size="5"
                                         direction-links="true"
                                         boundary-links="true">
                </dir-pagination-controls>

            </div>
        </div>

        <!--=============================== SALE Grid Model Transcation Details ==================================-->
        <div id="myModalS" class="modal fade" role="dialog" data-backdrop="static">
            <div class="modal-dialog modal-lg" style="width: 1150px;">
                <div class="modal-content">
                    <div class="modal-body">
                        <!--<div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>-->
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
                            <h4 class="modal-title text-white">{{salenumber}}</h4>
                        </div>
                        <div class="box-body">
                            <div class="text-center">
                                <table class="table table-hover table-responsive table-bordered text-center">
                                    <thead>
                                        <tr>
                                            <th>SL NO</th>
                                            <th><a href="" ng-click="sort('invmI_ItemName')">Item</a></th>
                                            <th><a href="" ng-click="sort('invmuoM_UOMName')">UOM </a></th>
                                            <th><a href="" ng-click="sort('invtsL_BatchNo')">Batch no. </a></th>
                                            <th><a href="" ng-click="sort('invtsL_SalesQty')">Quantity </a></th>
                                            <th><a href="" ng-click="sort('invtsL_SalesPrice')">Sale Price </a></th>
                                            <th><a href="" ng-click="sort('invtsL_DiscountAmt')">Discount </a></th>
                                            <th><a href="" ng-click="sort('invtsL_TaxAmt')">Tax </a></th>
                                            <th><a href="" ng-click="sort('invtsL_Amount')">Amount </a></th>
                                            <th><a href="" ng-click="sort('invtsL_Naration')">Narration </a></th>
                                            <!--<th>Action</th>-->
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr ng-repeat="userS in get_SaleItemDetails | orderBy:sortKey:reverse |filter:searchValue">

                                            <td>{{$index+1}}</td>
                                            <td style="overflow-wrap:break-word">{{ userS.invmI_ItemName}}</td>
                                            <td style="overflow-wrap:break-word">{{ userS.invmuoM_UOMName}}</td>
                                            <td style="overflow-wrap:break-word">{{ userS.invtsL_BatchNo}}</td>
                                            <td style="overflow-wrap:break-word">{{ userS.invtsL_SalesQty}}</td>
                                            <td style="overflow-wrap:break-word">{{ userS.invtsL_SalesPrice}}</td>
                                            <td style="overflow-wrap:break-word">{{ userS.invtsL_DiscountAmt}}</td>
                                            <td style="overflow-wrap:break-word">{{ userS.invtsL_TaxAmt}}</td>
                                            <td style="overflow-wrap:break-word">{{ userS.invtsL_Amount}}</td>
                                            <td style="overflow-wrap:break-word">{{ userS.invtsL_Naration}}</td>

                                            <!--<td class="text-center">
                                                <span ng-if="userS.invtsL_ActiveFlg === false">
                                                    <a href="" ng-click="deactiveS(userS)"
                                                       class="text-green" data-placement="bottom" data-toggle="tooltip" title="Activate">
                                                        <i> Activate </i>
                                                    </a>
                                                </span>
                                                <span ng-if="userS.invtsL_ActiveFlg === true">
                                                    <a href="" ng-click="deactiveS(userS)"
                                                       class="text-danger" data-placement="bottom" data-toggle="tooltip" title="Deactivate">
                                                        <i> Deactivate</i>
                                                    </a>
                                                </span>

                                            </td>-->
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--=============================== GRN Model Transcation Tax Details ==================================-->
        <div id="myModalTax" class="modal fade" role="dialog" data-backdrop="static">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                        <div class="box-body">
                            <div class="text-center">
                                <table class="table table-hover table-responsive table-bordered text-center">
                                    <thead>
                                        <tr>
                                            <th>SL NO</th>
                                            <th><a href="" ng-click="sort('invmT_TaxName')">Tax Name</a></th>
                                            <th><a href="" ng-click="sort('invtslT_TaxPer')">Tax Percentage </a></th>
                                            <th><a href="" ng-click="sort('invtslT_TaxAmt')">Tax Amount </a></th>
                                            <!--<th>Action</th>-->
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr ng-repeat="usertax in get_SaleItemTax | orderBy:sortKey:reverse |filter:searchValue">
                                            <td>{{$index+1}}</td>
                                            <td style="overflow-wrap:break-word">{{ usertax.invmT_TaxName}}</td>
                                            <td style="overflow-wrap:break-word">{{ usertax.invtslT_TaxPer | number : 2}}</td>
                                            <td style="overflow-wrap:break-word">{{ usertax.invtslT_TaxAmt}}</td>
                                            <!--<td class="text-center">
                                                <span ng-if="usertax.invtslT_ActiveFlg === false">
                                                    <a href="" ng-click="deactivetax(usertax)"
                                                       class="text-green" data-placement="bottom" data-toggle="tooltip" title="Activate">
                                                        <i> Activate </i>
                                                    </a>
                                                </span>
                                                <span ng-if="usertax.invtslT_ActiveFlg === true">
                                                    <a href="" ng-click="deactivetax(usertax)"
                                                       class="text-danger" data-placement="bottom" data-toggle="tooltip" title="Deactivate">
                                                        <i> Deactivate</i>
                                                    </a>
                                                </span>
                                            </td>-->
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--=============================== SALE Student Staff Customer Details ==================================-->
        <div id="myModaltype" class="modal fade" role="dialog" data-backdrop="static">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                        <div class="box-body">
                            <div class="text-center">
                                <table class="table table-hover table-responsive table-bordered text-center">
                                    <thead>
                                        <tr ng-if="stype=='Student'">
                                            <th>SL NO</th>
                                            <th><a href="" ng-click="sort('studentname')">Student Name</a></th>
                                            <th><a href="" ng-click="sort('ASMCL_ClassName')">Class </a></th>
                                            <th><a href="" ng-click="sort('ASMC_SectionName')">Section </a></th>

                                        </tr>
                                        <tr ng-if="stype=='Staff'">
                                            <th>SL NO</th>
                                            <th><a href="" ng-click="sort('employeename')">Employee Name</a></th>
                                            <th><a href="" ng-click="sort('HRME_EmployeeCode')">Employee Code </a></th>

                                        </tr>
                                        <tr ng-if="stype=='Customer'">
                                            <th>SL NO</th>
                                            <th><a href="" ng-click="sort('INVMC_CustomerName')">Customer Name</a></th>
                                            <th><a href="" ng-click="sort('INVMC_CustomerContactPerson')">Customer Contact Person </a></th>

                                        </tr>
                                    </thead>

                                    <tbody ng-if="stype=='Student'">
                                        <tr ng-repeat="userStu in get_Saletypes  |filter:searchValue">
                                            <td>{{$index+1}}</td>
                                            <td style="overflow-wrap:break-word">{{ userStu.studentname}}</td>
                                            <td style="overflow-wrap:break-word">{{ userStu.ASMCL_ClassName}}</td>
                                            <td style="overflow-wrap:break-word">{{ userStu.ASMC_SectionName}}</td>
                                        </tr>
                                    </tbody>
                                    <tbody ng-if="stype=='Staff'">
                                        <tr ng-repeat="userStaf in get_Saletypes | orderBy:sortKey:reverse |filter:search">
                                            <td>{{$index+1}}</td>
                                            <td style="overflow-wrap:break-word">{{ userStaf.employeename}}</td>
                                            <td style="overflow-wrap:break-word">{{ userStaf.HRME_EmployeeCode}}</td>
                                        </tr>
                                    </tbody>
                                    <tbody ng-if="stype=='Customer'">
                                        <tr ng-repeat="userCus in get_Saletypes | orderBy:sortKey:reverse |filter:search">
                                            <td>{{$index+1}}</td>
                                            <td style="overflow-wrap:break-word">{{ userCus.INVMC_CustomerName}}</td>
                                            <td style="overflow-wrap:break-word">{{ userCus.INVMC_CustomerContactPerson}}</td>
                                        </tr>
                                    </tbody>



                                </table>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>



        <!-- =======================Transcation Tax Model ====================================-->
        <div id="myModal" class="modal fade" role="dialog" ng-if="get_itemTax.length>0">
            <div class="modal-dialog modal-lg">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
                        <h4 class="modal-title text-white">Tax Details</h4>
                    </div>
                    <div class="modal-body">
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <h3 class="box-title">Tax</h3>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                </div>
                            </div>

                            <div class="box-body">
                                <table class="table table-hover table-responsive table-bordered text-center">
                                    <thead>
                                        <tr>
                                            <th>
                                                <a href="">SLNO</a>
                                            </th>
                                            <th><a href="" ng-click="sort('invmI_ItemName')">Item </a> </th>
                                            <th><a href="" ng-click="sort('invmT_TaxName')">Tax </a> </th>
                                            <th><a href="" ng-click="sort('invmT_TaxAliasName')">Alias Name</a> </th>
                                            <th><a href="" ng-click="sort('invmiT_TaxValue')">Value</a> </th>
                                            <th><a href="" ng-click="sort('invtslT_TaxAmt')">Tax Amount</a> </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="user in get_itemTax">
                                            <td class="text-center">{{ $index + 1}}</td>
                                            <td>{{ user.invmI_ItemName}}</td>
                                            <td>{{ user.invmT_TaxName}}</td>
                                            <td>{{ user.invmT_TaxAliasName}}</td>
                                            <td>{{ user.invmiT_TaxValue}}</td>
                                            <td><input type="text" ng-model="user.invtslT_TaxAmt" allow-pattern="(\s|[0-9.])" maxlength="6" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" value="{{user.invtslT_TaxAmt}}" placeholder="Enter Amount"></td>
                                            <td hidden="hidden">{{user.invtslT_Id}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <md-button type="button" class="md-raised md-primary" data-ng-click="addtocart(get_itemTax)" data-dismiss="modal"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add to Cart</md-button>

                    </div>
                </div>

            </div>
        </div>

    </div>
</section>