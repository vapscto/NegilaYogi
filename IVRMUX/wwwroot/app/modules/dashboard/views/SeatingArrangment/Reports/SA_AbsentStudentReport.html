<section class="content">
    <div class="row">
        <div class="col-sm-12">
            <div class="box box-primary" data-ng-init="GetExamDateloaddata()">
                <div class="box-header with-border">
                    <h3 class="box-title">Student Absent Report</h3>
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <form class="form-horizontal ng-pristine ng-valid" name="myForm" method="post" role="form" novalidate>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Academic Year <span style="color:red">*</span>:</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" id="id1" ng-model="ASMAY_Id" name="academic_year" ng-change="OnChangeyear()" required>
                                                <option value="">--Select Academic Year--</option>
                                                <option ng-repeat="options in yearlst" value="{{options.asmaY_Id}}" ng-selected="{{options.asmaY_Id == ASMAY_Id}}">{{options.asmaY_Year}}</option>
                                            </select>

                                            <div class="error-messages" ng-if="interacted(myForm.academic_year)" ng-messages="myForm.academic_year.$error">
                                                <div ng-message="required">Select Academic Year</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Exam Name <span style="color:red">*</span> :</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" id="id2" ng-model="EME_Id" name="exam" ng-change="OnChangeexam()" required>
                                                <option value="">--Select Exam Name--</option>
                                                <option ng-repeat="exm in examlist" value="{{exm.emE_Id}}" ng-selected="{{exm.emE_Id == EME_Id}}">
                                                    {{exm.emE_ExamName}}
                                                </option>
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm.exam)" ng-messages="myForm.exam.$error">
                                                <div ng-message="required">Select Exam Name</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">University Exam Name <span style="color:red">*</span>:</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" ng-model="ESAUE_Id" name="uexam" required id="id3" ng-change="OnChangeuniversityexam()">
                                                <option value="">--Select University Exam Name--</option>
                                                <option ng-repeat="uexm in university_examlist" value="{{uexm.esauE_Id}}"
                                                        ng-selected="{{uexm.esauE_Id == ESAUE_Id}}">
                                                    {{uexm.esauE_ExamName}}
                                                </option>
                                            </select>

                                            <div class="error-messages" ng-if="interacted(myForm.uexam)" ng-messages="myForm.uexam.$error">
                                                <div ng-message="required">Select University Exam Name</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Slot Name <span style="color:red">*</span>:</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" ng-model="ESAESLOT_Id" name="slt" id="id4" ng-change="OnChangeslot()" required>
                                                <option value="">--Select Slot Name--</option>
                                                <option ng-repeat="sl in slotlist" value="{{sl.esaesloT_Id}}" ng-selected="{{sl.esaesloT_Id == ESAESLOT_Id}}">
                                                    {{sl.esaesloT_SlotName}}
                                                </option>
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm.slt)" ng-messages="myForm.slt.$error">
                                                <div ng-message="required">Select Slot Name</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Course <span style="color:red">*</span>:</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" ng-model="AMCO_Id" name="sltcrss" id="id5" ng-change="Onchangecourse()" required>
                                                <option value="">--Select Course--</option>
                                                <option value="0">--All--</option>
                                                <option ng-repeat="sl in coursedetails" value="{{sl.amcO_Id}}" ng-selected="{{sl.amcO_Id == AMCO_Id}}">
                                                    {{sl.amcO_CourseName}}
                                                </option>
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm.sltcrss)" ng-messages="myForm.sltcrss.$error">
                                                <div ng-message="required">Select Course</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--<div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Exam Date :<strong style="color:red;">*</strong></label>
                                        <md-datepicker name="sch_date" ng-model="ESAEDATE_ExamDate" onkeydown="return false" required></md-datepicker>
                                        <div class="error-messages col-sm-offset-5" ng-if="interacted1(myForm1.sch_date)" ng-messages="myForm1.sch_date.$error">
                                            <div ng-message="required">Select Exam Date</div>
                                        </div>
                                    </div>
                                </div>-->
                            </div>
                        </div>
                        <div class="row">
                            <div class="text-center">
                                <input type="hidden" ng-model="ESAABSTU_Id" />
                                <md-button type="button" class="md-raised md-primary" id="save-btn" aria-disabled="false"
                                           ng-click="GetAbsentStudentReport()">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                    Search
                                </md-button>
                                <md-button type="button" class="md-raised md-warn" data-ng-click="cleardata()">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                    Cancel
                                </md-button>
                                <md-button type="button" class="md-raised md-primary" id="save-btn" aria-disabled="false"
                                           ng-click="Print()" ng-disabled="GetReportList.length==0">
                                    <i class="fa fa-print" aria-hidden="true"></i>
                                    Print
                                </md-button>
                                <md-button type="button" class="md-raised md-primary" id="save-btn" aria-disabled="false"
                                           ng-click="Excel('#exceldata')" ng-disabled="GetReportList.length==0">
                                    <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                                    Excel
                                </md-button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="box box-primary" ng-if="GetReportList.length>0">
        <div class="box-header with-border">
            <h3 class="box-title">Student Absent Report Details</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div class="box-body">
            <div class="row">
                <div class="col-sm-12">
                    <div class="col-sm-4 pull-right">
                        <div class="form-group">
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-search"></i>
                                </span>
                                <input class="form-control" style="margin-left: -1%;" type="text" ng-model="search" placeholder="search here...">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <table class="table table-hover table-responsive table-bordered">
                            <thead>
                                <tr>
                                    <th>Sl.No</th>
                                    <th>Student Details</th>
                                    <th>Course</th>
                                    <th>Branch</th>
                                    <th>Semester</th>
                                    <th>Subject Name</th>
                                    <th>Block Details</th>
                                    <th>Slot</th>
                                    <th>Exam Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr dir-paginate="user in abstu =(GetReportList | filter : search) | orderBy :sortKey:reverse |itemsPerPage:itemsPerPage" current-page="currentPage">
                                    <td class="text-center">{{$index+1}}</td>
                                    <td class="text-left">
                                        <b>Student Name : {{user.STUDENTNAME}}</b><br />
                                        <b>Admno : {{user.AMCST_AdmNo}}</b><br />
                                        <b>USN : {{user.ESAABSTU_StudentUSN}}</b>
                                    </td>
                                    <td class="text-left">{{ user.AMCO_CourseName}}</td>
                                    <td class="text-left">{{ user.AMB_BranchName}}</td>
                                    <td class="text-left">{{ user.AMSE_SEMName}}</td>
                                    <td class="text-left">{{ user.ISMS_SubjectName}}</td>
                                    <td class="text-left">
                                        Building : {{user.ESABLD_BuildingName}}<br />
                                        Floor : {{user.ESAFLR_FloorName}}<br />
                                        Room : {{user.ESAROOM_RoomName}}
                                    </td>
                                    <td class="text-left">{{user.ESAESLOT_SlotName}}</td>
                                    <td class="text-center">{{user.ESAABSTU_ExamDate}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <dir-pagination-controls max-size="5"
                                                 direction-links="true"
                                                 boundary-links="true">
                        </dir-pagination-controls>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div ng-show="fsdfdsfdsfds" id="printdata">
    <div class="row" ng-if="imgname!=null && imgname!=''">
        <div class="baldwin col-sm-12 text-center">
            <img src="{{imgname}}" class="img-responsive" alt="baldwin">
        </div>
    </div>

    <div class="row">
        <div class="col-sm-12 text-center">
            <h3>Student Absent Report</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="col-sm-6 text-left">
                <b> Year : {{yearname}}</b>
            </div>
            <div class="col-sm-6 text-left">
                <b> Exam : {{examname}}</b>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="col-sm-6 text-left">
                <b> University Exam : {{universityexam}}</b>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-12">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Sl.No</th>
                        <th>Student Details</th>
                        <th>Course</th>
                        <th>Branch</th>
                        <th>Semester</th>
                        <th>Subject Name</th>
                        <th>Block Details</th>
                        <th>Slot</th>
                        <th>Exam Date</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="user in GetReportList | orderBy :sortKey:reverse">
                        <td class="text-center">{{$index+1}}</td>
                        <td class="text-left">
                            <b>Student Name : {{user.STUDENTNAME}}</b><br />
                            <b>Admno : {{user.AMCST_AdmNo}}</b><br />
                            <b>USN : {{user.ESAABSTU_StudentUSN}}</b>
                        </td>
                        <td class="text-left">{{ user.AMCO_CourseName}}</td>
                        <td class="text-left">{{ user.AMB_BranchName}}</td>
                        <td class="text-left">{{ user.AMSE_SEMName}}</td>
                        <td class="text-left">{{ user.ISMS_SubjectName}}</td>
                        <td class="text-left">
                            Building : {{user.ESABLD_BuildingName}}<br />
                            Floor : {{user.ESAFLR_FloorName}}<br />
                            Room : {{user.ESAROOM_RoomName}}
                        </td>
                        <td class="text-left">{{user.ESAESLOT_SlotName}}</td>
                        <td class="text-center">{{user.ESAABSTU_ExamDate}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div ng-show="sdfdfdf" id="exceldata">
    <table>
        <tr style="border:0.5px solid black">
            <td colspan="9" style="text-align:center"><b>Student Absent Report</b></td>
        </tr>
        <tr style="border:0.5px solid black">
            <td colspan="3"><b> Year : {{yearname}}</b></td>
            <td colspan="3"><b> Exam : {{examname}}</b></td>
            <td colspan="3"><b> University Exam : {{universityexam}}</b></td>
        </tr>
    </table>
    <table>
        <tr style="border:0.5px solid black">
            <td style="text-align:center">Sl.No</td>
            <td style="text-align:center">Student Details</td>
            <td style="text-align:center">Course</td>
            <td style="text-align:center">Branch</td>
            <td style="text-align:center">Semester</td>
            <td style="text-align:center">Subject Name</td>
            <td style="text-align:center">Block Details</td>
            <td style="text-align:center">Slot</td>
            <td style="text-align:center">Exam Date</td>
        </tr>
        <tr style="border:0.5px solid black" ng-repeat="user in GetReportList | orderBy :sortKey:reverse">
            <td class="text-center">{{$index+1}}</td>
            <td class="text-left">
                Student Name : {{user.STUDENTNAME}}<br />
                Admno : {{user.AMCST_AdmNo}}<br />
                USN : {{user.ESAABSTU_StudentUSN}}
            </td>
            <td class="text-left">{{ user.AMCO_CourseName}}</td>
            <td class="text-left">{{ user.AMB_BranchName}}</td>
            <td class="text-left">{{ user.AMSE_SEMName}}</td>
            <td class="text-left">{{ user.ISMS_SubjectName}}</td>
            <td class="text-left">
                Building : {{user.ESABLD_BuildingName}}<br />
                Floor : {{user.ESAFLR_FloorName}}<br />
                Room : {{user.ESAROOM_RoomName}}
            </td>
            <td class="text-left">{{user.ESAESLOT_SlotName}}</td>
            <td class="text-center">{{user.ESAABSTU_ExamDate}}</td>
        </tr>
    </table>
</div>