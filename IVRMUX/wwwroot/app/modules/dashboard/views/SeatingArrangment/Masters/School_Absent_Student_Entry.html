
<section class="content">
    <div class="row">
        <div class="col-sm-12">
            <div class="box box-primary" data-ng-init="loaddata()">
                <div class="box-header with-border">
                    <h3 class="box-title">Absent Student Details</h3>
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <form class="form-horizontal ng-pristine ng-valid" name="myForm" method="post" role="form" novalidate>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Academic Year <span style="color:red">*</span>:</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="id1" ng-model="ASMAY_Id" name="academic_year" ng-change="OnChangeYear()" required>
                                            <option value="">--Select Academic Year--</option>
                                            <option ng-repeat="options in yearlst" value="{{options.asmaY_Id}}" ng-selected="{{options.asmaY_Id == ASMAY_Id}}">{{options.asmaY_Year}}</option>
                                        </select>

                                        <div class="error-messages" ng-if="interacted(myForm.academic_year)" ng-messages="myForm.academic_year.$error">
                                            <div ng-message="required">Select Academic Year</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Class <span style="color:red">*</span>:</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="id2" ng-model="ASMCL_Id" name="cls" ng-change="OnChangeClass()" required>
                                            <option value="">--Select Class--</option>
                                            <option ng-repeat="options in classlist" value="{{options.asmcL_Id}}" ng-selected="{{options.asmcL_Id == ASMCL_Id}}">{{options.asmcL_ClassName}}</option>
                                        </select>

                                        <div class="error-messages" ng-if="interacted(myForm.cls)" ng-messages="myForm.cls.$error">
                                            <div ng-message="required">Select Class</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Section<span style="color:red">*</span>:</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="id3" ng-model="ASMS_Id" name="sec" ng-change="OnChangeSection()" required>
                                            <option value="">--Select Section --</option>
                                            <option ng-repeat="options in sectionlist" value="{{options.asmS_Id}}" ng-selected="{{options.asmS_Id == ASMS_Id}}">{{options.asmC_SectionName}}</option>
                                        </select>

                                        <div class="error-messages" ng-if="interacted(myForm.sec)" ng-messages="myForm.sec.$error">
                                            <div ng-message="required">Select Section</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Subject <span style="color:red">*</span>:</label>
                                    <div class="col-sm-8">
                                        <ui-select id="id4" name="studentname" ng-model="$parent.ISMS_Id" ng-change="OnChangeSubject()" theme="bootstrap"
                                                   ng-keyup="searchfilter($select,user.status);" title="Select Subject" required>
                                            <ui-select-match ng-trim="false" placeholder="Select or search Subject ">{{$select.selected.ismS_SubjectName}}</ui-select-match>
                                            <ui-select-choices repeat="catgry in subjectlist | filter: $select.search" value="{{catgry.ismS_Id}}"
                                                               ng-selected="{{catgry.Selected == true}}">
                                                <div ng-bind-html="catgry.ismS_SubjectName | highlight: $select.search"></div>
                                            </ui-select-choices>
                                        </ui-select>
                                        <div class="error-messages" ng-if="interacted(myForm.studentname)" ng-messages="myForm.studentname.$error">
                                            <div ng-message="required">Select Subject</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Exam <span style="color:red">*</span>:</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="id5" ng-model="EME_Id" name="exm" ng-change="GetCourse()" required>
                                            <option value="">--Select Exam--</option>
                                            <option ng-repeat="options in examlist" value="{{options.emE_Id}}" ng-selected="{{options.emE_Id == EME_Id}}">{{options.emE_ExamName}}</option>
                                        </select>

                                        <div class="error-messages" ng-if="interacted(myForm.exm)" ng-messages="myForm.exm.$error">
                                            <div ng-message="required">Select Exam</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Exam Slot <span style="color:red">*</span>:</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="id6" ng-model="ESAESLOT_Id" name="rm" ng-change="GetCourse()" required>
                                            <option value="">--Select Exam Slot--</option>
                                            <option ng-repeat="options in examslot" value="{{options.esaesloT_Id}}" ng-selected="{{options.esaesloT_Id == ESAESLOT_Id}}">{{options.esaesloT_SlotName}}</option>
                                        </select>

                                        <div class="error-messages" ng-if="interacted(myForm.rm)" ng-messages="myForm.rm.$error">
                                            <div ng-message="required">Select Exam Slot</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Room <span style="color:red">*</span>:</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="id7" ng-model="ESAROOM_Id" name="exmr" ng-change="GetCourse()" required>
                                            <option value="">--Select Room--</option>
                                            <option ng-repeat="options in roomlist" value="{{options.esarooM_Id}}" ng-selected="{{options.esarooM_Id == ESAROOM_Id}}">{{options.esarooM_RoomName}}</option>
                                        </select>

                                        <div class="error-messages" ng-if="interacted(myForm.exmr)" ng-messages="myForm.exmr.$error">
                                            <div ng-message="required">Select Room</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Exam Date <span style="color:red">*</span>:</label>
                                    <div class="col-sm-8">
                                        <md-datepicker ng-model="ESAABSTUSCH_ExamDate" name="ddd" id="id8" onkeypress="return false" md-placeholder="Enter Date"
                                                       md-min-date="mindate" md-max-date="maxdate"></md-datepicker>

                                        <div class="error-messages" ng-if="interacted(myForm.ddd)" ng-messages="myForm.ddd.$error">
                                            <div ng-message="required">Select Date</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="text-center">
                                <input type="hidden" ng-model="ESAABSTUSCH_Id" />
                                <md-button type="button" class="md-raised md-primary" id="save-btn" aria-disabled="false" ng-click="SearchData()">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                    Search
                                </md-button>
                                <md-button type="button" class="md-raised md-warn" data-ng-click="cleardata()">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                    Cancel
                                </md-button>
                            </div>
                        </div>
                    </form>


                    <form class="form-horizontal ng-pristine ng-valid" name="myForm2" method="post" role="form" novalidate>
                        <div ng-if="GetStudentList.length>0">
                            <div class="row">
                                <div class="col-sm-12">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <td>
                                                    <input type="checkbox" ng-model="obj.checkall" id="idall" name="checknameall" ng-click="OnChangeall(obj.checkall)"/>
                                                    <span class="lbl padding-8"></span>
                                                </td>
                                                <td>Sl.No</td>
                                                <td>Student Name</td>
                                                <td>Admno</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="stu in  GetStudentList">
                                                <td class="text-center">
                                                    <input type="checkbox" ng-model="stu.checked" id="id{{stu.amsT_Id}}" name="checkname"
                                                           ng-required="isOptionsRequired1()" ng-click="OnChangeInd()" />
                                                    <span class="lbl padding-8"></span>
                                                </td>
                                                <td class="text-center">{{$index+1}}</td>
                                                <td class="text-left">{{stu.studentname}}</td>
                                                <td class="text-left">{{stu.amsT_AdmNo}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <div class="error-messages text-center" ng-if="interacted1(myForm2.checkname)" ng-messages="myForm2.checkname.$error">
                                        <div ng-message="required">
                                            <b style="font-size:14px !important">
                                                Select Atleast One Student To Save The Details
                                            </b>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="text-center">
                                    <md-button type="button" class="md-raised md-primary" id="save-btn" aria-disabled="false" ng-click="SaveData()">
                                        <i class="fa fa-floppy-o" aria-hidden="true"></i>
                                        Save
                                    </md-button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="box box-primary" ng-if="absentstudentlist.length>0">
        <div class="box-header with-border">
            <h3 class="box-title">Absent Student List</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div class="box-body">
            <div class="col-sm-4">
                <div class="form-group">
                    <label class="control-label">
                        <b> Total Grid Records :</b>
                        <label class="badge">
                            {{absentstudentlist.length}}
                        </label>
                    </label>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group" ng-if="search!=''">
                    <label class="control-label">
                        <b>Total Records Searched : </b>
                        <label class="badge">
                            {{abstu.length}}
                        </label>
                    </label>
                </div>
            </div>
            <div class="col-sm-4 pull-right">
                <div class="form-group">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <i class="fa fa-search"></i>
                        </span>
                        <input class="form-control" style="margin-left: -1%;" type="text" ng-model="search" placeholder="search here...">
                    </div>
                </div>
            </div>
            <table class="table table-hover table-responsive table-bordered">
                <thead>
                    <tr>
                        <th>SL No</th>
                        <th>Student Name</th>
                        <th>Year</th>
                        <th>Exam Name</th>
                        <th>Course</th>
                        <th>Branch</th>
                        <th>Semester</th>
                        <th>Subject</th>
                        <th>Room</th>
                        <th>Slot</th>
                        <th>Exam Date</th>                        
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr dir-paginate="user in abstu =(absentstudentlist | filter : search) | orderBy :sortKey:reverse |itemsPerPage:itemsPerPage" current-page="currentPage">
                        <td class="text-center">{{itemsPerPage *(currentPage-1)+$index+1}}</td>
                        <td class="text-left">{{ user.AMCST_FirstName}}&nbsp;{{ user.AMCST_MiddleName}}&nbsp;{{ user.AMCST_LastName}}</td>
                        <td class="text-left">{{ user.ASMAY_Year}}</td>
                        <td class="text-left">{{ user.EME_ExamName}}</td>
                        <td class="text-left">{{ user.AMCO_CourseName}}</td>
                        <td class="text-left">{{ user.AMB_BranchName}}</td>
                        <td class="text-left">{{ user.AMSE_SEMName}}</td>
                        <td class="text-left">{{ user.ISMS_SubjectName}}</td>
                        <td class="text-left">{{ user.ESAROOM_RoomName}}</td>
                        <td class="text-left">{{ user.ESAESLOT_SlotName}}</td>
                        <td class="text-center">{{ user.ESAABSTU_ExamDate|date:'dd-MM-yyyy'}}</td>                       
                        <td class="text-center">
                            <a href="javascript:void(0)" ng-click="Edit(user)"
                               data-toggle="tooltip" title="Edit">
                                <i class="fa fa-pencil-square-o text-black" aria-hidden="true"></i>
                            </a>
                            |
                            <a href="" ng-click="DeleteStudent(user)" data-toggle="tooltip" title="Edit">
                                <i class="fa fa-trash text-red" title="Delete Record"></i>
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <dir-pagination-controls max-size="5"
                                     direction-links="true"
                                     boundary-links="true">
            </dir-pagination-controls>
        </div>
    </div>
</section>