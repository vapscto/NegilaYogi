<style>
    .panel-heading {
        cursor: pointer;
    }

    .form-horizontal .form-group {
        margin-right: -27px;
        margin-left: -63px;
    }

    .btns {
        margin-top: -97px;
        margin-left: -29px;
    }

    .sndbtn2 {
        margin-right: 429px;
        margin-top: -1px;
    }

    .imgvi {
        margin-top: -11px;
        margin-left: 24px;
    }

    .upd1 {
        margin-left: 126px;
    }

    .upd2 {
        margin-left: 141px;
        padding-right: 19px;
    }

    .faa {
        margin-left: 8px;
    }

    .faa1 {
        margin-left: 8px;
    }


    .mainimg {
        margin-left: 397px;
    }

    .mainimg1 {
        margin-left: -7px;
    }

    .mainimg2 {
        margin-left: 0px;
    }

    .eyebtn {
        margin-top: -58px;
        margin-left: 177px;
    }

    .img-bordered {
        border: 3px solid #d2d6de;
        padding: 3px;
        margin-top: -142px;
        margin-left: 82px;
    }

    .modal-title {
        margin: 0;
        line-height: 1.428571;
        margin-bottom: -23px;
    }

    .ffffff {
        margin-top: -5px;
    }

    .xone {
        margin-left: 372px;
    }

    .yone {
        margin-left: 372px;
    }

    .xtwo {
        margin-left: 372px;
    }

    .ytwo {
        margin-left: 372px;
    }

    .spnview1 {
        margin-left: 10px;
    }

    .fnt {
    }
</style>
<link href="../css/print/PortalInteraction/interaction.css" rel="stylesheet" />
<section class="content" data-ng-init="loaddata()">
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Interactions</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div ng-if="roleflg=='Alumni'">
            <md-content>
                <md-tabs md-dynamic-height md-border-bottom>
                    <md-tab label="Inbox" ng-click="oninbox()">
                    </md-tab>
                    <md-tab label="Group" ng-click="typechangeG()">
                    </md-tab>
                    <md-tab label="Individual" ng-click="typechangeI()">
                    </md-tab>
                </md-tabs>
            </md-content>
        </div>





        <div class="box-body">
            <form class="form-horizontal ng-pristine ng-valid" name="myForm" role="form" novalidate>
                <div ng-if="composehead">
                    <!--*************************** User Details*************************** -->
                    <div class="box-body">
                        <div class="col-sm-10 col-sm-offset-1">
                            <div class="form-group">
                                <div class="text-center well">

                                    <!--<div ng-if="roleflg=='Staff' || roleflg=='HOD' || roleflg=='Principal' || roleflg=='AcademicSupervisor' || roleflg=='ExamCoordinator'">
                                        <label class="radio-inline" ng-show="chatwithstudent==true">
                                            <input type="radio" value="Student" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">Student</span>
                                        </label>
                                        <label class="radio-inline" ng-show="chatwithstaff==true">
                                            <input type="radio" value="Teachers" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">Teachers</span>
                                        </label>
                                        <div ng-if="ALSMINT_GroupOrIndFlg=='Individual'">
                                            <label ng-show="chatwithstaff==true">
                                                <label class="radio-inline" ng-if="hodflag" ng-hide="roleflg=='HOD'">
                                                    <input type="radio" value="HOD" name="user" ng-hide="roleflg=='HOD'" ng-model="obj.userflag" ng-change="getdetail()">
                                                    <span class="lbl padding-8">HOD</span>
                                                </label>
                                            </label>
                                            <label class="radio-inline" ng-show="chatwithstaff==true">
                                                <input type="radio" value="Principal" name="user" ng-hide="roleflg=='Principal'" ng-model="obj.userflag" ng-change="getdetail()">
                                                <span class="lbl">Principal</span>
                                            </label>
                                            <label class="radio-inline" ng-show="chatwithstaff==true">
                                                <input type="radio" value="AS" name="user" ng-model="obj.userflag" ng-hide="roleflg=='AcademicSupervisor'" ng-change="getdetail()">
                                                <span class="lbl padding-8">Academic Supervisor</span>
                                            </label>
                                            <label class="radio-inline" ng-show="chatwithstaff==true">
                                                <input type="radio" value="EC" name="user" ng-model="obj.userflag" ng-hide="roleflg=='ExamCoordinator'" ng-change="getdetail()">
                                                <span class="lbl padding-8">Exam Coordinator</span>
                                            </label>
                                        </div>
                                    </div>-->

                                    <div ng-if="roleflg=='Alumni'">
                                        <label class="radio-inline">
                                            <input type="radio" value="SameBatch" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">Same Batch</span>
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" value="AllBatch" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">All Batch </span>
                                        </label>
                                        <!--<label class="radio-inline">
                                            <input type="radio" value="Teachers" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">Teachers</span>
                                        </label>-->

                                    </div>
                                </div>
                            </div>
                            </div>
                            <!--========group alumni start =======-->
                            <div class="form-group" ng-show="obj.userflag=='SameBatch' && ALSMINT_GroupOrIndFlg=='Group' ">
                              
                                <div class="col-sm-6 col-sm-offset-4">
                                    <div class="multiselect col-sm-8">
                                        <span ng-if="getdetails.length>0">
                                            <input class="form-control" ng-model="searchValue" type="text" placeholder="search Alumni here...">
                                        </span>
                                        <label>
                                            <input name="classes" value="1" ng-model="usercheckT" type="checkbox" ng-click="all_checkT(usercheckT)">
                                            <span class="lbl padding-8">
                                                All
                                            </span>
                                        </label>
                                        <label ng-model="ALMST_Id" ng-repeat="user in getdetails | filter : searchValue">
                                            <input name="teacher" ng-model="user.tck" type="checkbox" ng-click="togchkbxT();" ng-required="isOptionsRequiredT()">
                                            <span class="lbl padding-8">
                                                {{user.alumniname}}
                                            </span>
                                        </label>
                                    </div>
                                    <div class="error-messages col-sm-8" ng-if="interacted(myForm.teacher)" ng-messages="myForm.teacher.$error">
                                        <div ng-message="required">Please Select Atleast One Checkbox</div>
                                    </div>
                                </div>
                            </div>

                        <div class="form-group" ng-show="obj.userflag=='AllBatch' && ALSMINT_GroupOrIndFlg=='Group' ">
                            <div>
                                <div class="col-sm-6 col-sm-offset-4">
                                    <div class="multiselect col-sm-8">
                                        <span ng-if="getdetails.length>0">
                                            <input class="form-control" ng-model="searchValue1" type="text" placeholder="search Alumni here...">
                                        </span>
                                        <label>
                                            <input name="classes" value="1" ng-model="usercheckT" type="checkbox" ng-click="all_checkT(usercheckT)">
                                            <span class="lbl padding-8">
                                                All
                                            </span>
                                        </label>
                                        <label ng-model="ALMST_Id" ng-repeat="user in getdetails | filter : searchValue1">
                                            <input name="teacher" ng-model="user.tck" type="checkbox" ng-click="togchkbxT();" ng-required="isOptionsRequiredT()">
                                            <span class="lbl padding-8">
                                                {{user.alumniname}}
                                            </span>
                                        </label>
                                    </div>
                                    <div class="error-messages col-sm-8" ng-if="interacted(myForm.teacher)" ng-messages="myForm.teacher.$error">
                                        <div ng-message="required">Please Select Atleast One Checkbox</div>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <!--<div class="col-sm-8 col-sm-offset-2">
                            <div class="form-group" ng-if="obj.userflag=='Teachers' && getdetails.length>0">
                                <div class="form-group">
                                    <div ng-if="getdetails.length>0">
                                        <label class="control-label col-sm-4">Teacher :<span style="color:Red">*</span></label>
                                        <div class="col-sm-8">
                                            <ui-select id="sel1" name="subjteacher" ng-model="obj.HRME_Id" theme="bootstrap" ng-keyup="searchfilter($select);" title="Select Subject Teacher" ng-required="(obj.userflag=='Teachers')  && (getdetails.length>0)" ng-change="change(obj.HRME_Id)">
                                                <ui-select-match ng-trim="false" placeholder="Select or search Subject Teacher in the list...">{{$select.selected.employeename}} </ui-select-match>
                                                <ui-select-choices repeat="option in getdetails | filter: $select.search " value="{{option.HRME_Id}}" ng-selected="{{option.Selected == true}}">
                                                    <div ng-bind-html="option.employeename | highlight: $select.search"></div>
                                                </ui-select-choices>
                                            </ui-select>
                                            <div class="error-messages" ng-if="interacted(myForm.subjteacher)" ng-messages="myForm.subjteacher.$error">
                                                <div ng-message="required">Please Select Teacher </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>-->

                        <!--========group alumni End =======-->
                        <!--========Individule alumni Start =======-->
                        <div class="form-group" ng-show="obj.userflag=='SameBatch' && ALSMINT_GroupOrIndFlg=='Individual'">
                            <label class="control-label col-sm-4" style="text-align:right">Alumni :<span style="color:red;">*</span></label>
                            <div class="col-sm-4">
                                <select class="form-control" id="sel1" ng-model="obj.ALMST_Id1" name="alu" ng-required="obj.userflag=='SameBatch' && ALSMINT_GroupOrIndFlg=='Individual'">
                                    <option value="">--Select Alumni-- </option>
                                    <option ng-repeat="opti in getdetails" value="{{opti.ALMST_Id}}">
                                        {{opti.alumniname}}
                                    </option>
                                </select>
                                <div class="error-messages" ng-if="interacted2(myForm1.alu)" ng-messages="myForm1.alu.$error">
                                    <div ng-message="required">Select Alumni</div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" ng-show="obj.userflag=='AllBatch' && ALSMINT_GroupOrIndFlg=='Individual' ">
                            <label class="control-label col-sm-4" style="text-align:right">Alumni :<span style="color:red;">*</span></label>
                            <div class="col-sm-4">
                                <select class="form-control" id="sel12" ng-model="obj.ALMST_Id1" name="subject1" ng-required="obj.userflag=='AllBatch' && ALSMINT_GroupOrIndFlg=='Individual'">
                                    <option value="">--Select Alumni-- </option>
                                    <option ng-repeat="op in getdetails" value="{{op.ALMST_Id}}">
                                        {{op.alumniname}}
                                    </option>
                                </select>
                                <div class="error-messages" ng-if="interacted2(myForm1.subject1)" ng-messages="myForm1.subject1.$error">
                                    <div ng-message="required">Select Alumni</div>
                                </div>
                            </div>
                        </div>

                        <!--<div class="form-group" ng-if="obj.userflag=='Teachers'">
                            <label class="control-label col-sm-4">Teachers :<span style="color:red;">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="sel1" ng-model="HRME_Id" name="subject" required>
                                    <option value="">--Select Alumni-- </option>
                                    <option ng-repeat="option in getdetails" value="{{option.HRME_Id}}">
                                        {{option.employeename}}
                                    </option>
                                </select>
                                <div class="error-messages" ng-if="interacted2(myForm1.subject)" ng-messages="myForm1.subject.$error">
                                    <div ng-message="required">Select Teachers</div>
                                </div>
                            </div>
                        </div>-->
                        <!--========Individule alumni End =======-->

                    </div>
                        <!--*************************** Compose Message************************ -->
                        <div class="col-sm-10 col-sm-offset-1">
                            <div class="box box-primary">
                                <div class="box-header with-border">
                                    <h3 class="box-title col-sm-9">New Message</h3>
                                    <h2 class="box-title">{{isminT_DateTime | date:'MM/dd/yyyy  h:mma'}}</h2>
                                </div>
                                <div class="box-body">
                                    <div class="col-sm-12">

                                        <div class="form-group">
                                            <label class="control-label col-sm-2 col-sm-offset-1"><b>Subject :</b><span style="color:Red">*</span></label>
                                            <div class="col-sm-8">
                                                <input type="text" name="subject" class="form-control active" placeholder="Interaction Subject" data-ng-model="obj.alsminT_Subject" required>
                                                <div class="error-messages" ng-if="interacted(myForm.subject)" ng-messages="myForm.subject.$error">
                                                    <div ng-message="required">Enter Message Subject</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">

                                            <label class="control-label col-sm-3"></label>
                                            <div class="col-sm-8">
                                                <textarea class="form-control" name="message" rows="5" id="comment" ng-model="obj.alsminT_Interaction" placeholder="Message" required></textarea>
                                                <div class="error-messages" ng-if="interacted(myForm.message)" ng-messages="myForm.message.$error">
                                                    <div ng-message="required">Enter Message</div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--image upload start-->
                                        <div class="form-group" ng-if="obj.userflag && getdetails.length>0">
                                            <div class="col-sm-3 col-sm-offset-1">
                                                <label for="upload-I" class="btn btn-primary upd1">Browse<i class="fa fa-upload faa1" aria-hidden="true"></i></label>
                                                <input id="upload-I" type="file" data-ng-model="Images" accept="image/png, image/jpeg, application/pdf, application/vnd.openxmlformats-officedocument.wordprocessingml.document" name="Images_name"
                                                       multiple onchange="angular.element(this).scope().imageUpload(this)" ng-hide="hidec==0" />

                                            </div>
                                        </div>
                                        &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;
                                        <div class="text-center" ng-if="obj.userflag && getdetails.length>0">
                                            <input type="hidden" ng-model="isminT_Id" value="{{isminT_Id}}" />
                                            <md-button type="button" ng-click="savedata()" class="md-raised md-primary btns">
                                                <i class="fa fa-paper-plane " aria-hidden="true"></i> Send
                                            </md-button>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;
                                            <md-button type="button" ng-click="Clearid()" class="md-raised md-warn btns">
                                                <i class="fa fa-times" aria-hidden="true"></i> Cancel
                                            </md-button>

                                        </div>


                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div>
                                                    <div class="imgview" ng-show="stepsModel.length>0">
                                                        <div class="row">
                                                            <div class="col-sm-2" ng-repeat="step in stepsModel track by $index">
                                                                <img class="img-responsive img-bordered" ng-src="{{step}}" ng-click="previewimg(step)" />

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <!--image upload end-->

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
              

            

                <!--********************************* InBOX ******************************* -->
                <div class="col-sm-12">
                    <div class="box box-primary" ng-if="inboxtab">
                        <div class="box-header with-border">
                            <h3 class="box-title col-sm-9">
                                Message Inbox
                                <span class="fa-stack fa-1x">
                                    <i class="fa fa-comment fa-stack-2x"></i>
                                    <strong class="fa-stack-1x fa-stack-text fa-inverse" title="You have {{inboxtotal}} message in your inbox"><b>{{inboxtotal}}</b></strong>
                                </span>
                            </h3>
                            <i class="fa fa-refresh " aria-hidden="true" ng-click="refresh()" title="Refresh">&nbsp;</i>
                            <h2 class="box-title">{{isminT_DateTime | date:'MM/dd/yyyy  h:mma'}}</h2>
                        </div>
                        <div class="box-body">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="panel-group accordion">
                                        <div class="panel panel-default" ng-repeat="msg in message_list">
                                            <div class="panel-heading" data-toggle="collapse" data-parent=".accordion" data-target=".{{msg.ALSTINT_Id}}">
                                                <div class="row">
                                                    <div class="col-sm-1 text-left">
                                                        <span ng-if="msg.ALSMINT_GroupOrIndFlg=='Group'">
                                                            <i class="fa fa-users ml-1" style="color:#2757a6;"></i>
                                                        </span>
                                                        <span ng-if="msg.ALSMINT_GroupOrIndFlg=='Individual'">
                                                            <i class="fa fa-user ml-1" style="color:green;"></i>
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-5 text-left">
                                                        <span class="panel-title" style="font-weight: 700;">

                                                            <a>
                                                                {{msg.ALSMINT_Subject}}
                                                            </a>
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-3 text-right">
                                                        <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Individual'">
                                                            <span ng-show="msg.ALSMINT_ComposedById==userhrmE_Id">
                                                                <span style="font-weight:700;">To:</span>{{msg.Receiver }}

                                                            </span>
                                                            <span ng-show="msg.ALSMINT_ComposedById!=userhrmE_Id">
                                                                <span style="font-weight:700;">From:</span>{{msg.Sender}}

                                                            </span>
                                                        </span>
                                                        <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Group'">
                                                            <span ng-show="msg.ALSMINT_ComposedById==userhrmE_Id">
                                                                <span style="font-weight:700;">From:</span>{{msg.Sender }}

                                                            </span>
                                                            <span ng-show="msg.ALSMINT_ComposedById!=userhrmE_Id">
                                                                <span style="font-weight:700;">From:</span>{{msg.Sender}}

                                                            </span>
                                                        </span>




                                                        <!--===========-->
                                                        <!--<span ng-if="roleflg=='Staff'||roleflg=='HOD'||roleflg=='Principle'||roleflg=='EC'||roleflg=='AS'">
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Staff'">
                                                                <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Individual'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">TO:</span>{{msg.Receiver}}
                                                                </span>
                                                                <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Group'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">FROM:{{msg.Sender}}</span>

                                                                </span>
                                                            </span>
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Student'">
                                                                <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Individual'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">From :</span>{{msg.Sender}}
                                                                </span>
                                                                <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Group'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">From :</span>{{msg.Sender}}
                                                                </span>
                                                            </span>
                                                        </span>


                                                        <span ng-if="roleflg=='Student'">
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Student'">
                                                                <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Individual'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">TO:</span>{{msg.Receiver}}
                                                                </span>
                                                                <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Group'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">FROM:{{msg.Sender}}</span>
                                                                </span>
                                                            </span>
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Staff'">
                                                                <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Individual'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">From :</span>{{msg.Sender}}
                                                                </span>
                                                                <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Group'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">From :</span>{{msg.Sender}}
                                                                </span>
                                                            </span>
                                                        </span>-->
                                                        <!--==========-->

                                                    </div>
                                                    <div class="col-sm-2 text-right" style="font-weight:700;">
                                                        {{msg.ALSMINT_DateTime | date:'dd/MM/yyyy  h:mma'}}
                                                    </div>
                                                    <div class="col-sm-1 text-right">
                                                        <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Individual'">
                                                            <span ng-show="msg.ALSMINT_ComposedById==userhrmE_Id">
                                                                <i class="fa fa-paper-plane ml-1" style="color:dodgerblue;"></i>

                                                            </span>
                                                            <span ng-show="msg.ALSMINT_ComposedById!=userhrmE_Id">

                                                                <i class="fa fa-envelope ml-1" style="color:#2757a6;"></i>

                                                            </span>
                                                        </span>
                                                        <span style="font-weight:600;" ng-if="msg.ALSMINT_GroupOrIndFlg=='Group'">
                                                            <i class="fa fa-envelope ml-1" style="color:#2757a6;"></i>
                                                        </span>
                                                    </div>

                                                    <!--<div class="col-sm-1 text-right">
                                                        <span ng-if="roleflg=='Staff'">
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Staff'">
                                                                <i class="fa fa-paper-plane ml-1" style="color:dodgerblue;">
                                                                </i>
                                                            </span>
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Student'">
                                                                <i class="fa fa-envelope ml-1" style="color:#2757a6;"></i>
                                                            </span>
                                                        </span>
                                                        <span ng-if="roleflg=='Student'">
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Student'">
                                                                <i class="fa fa-paper-plane ml-1" style="color:dodgerblue;"></i>
                                                            </span>
                                                            <span ng-if="msg.ALSMINT_GroupOrIndFlg=='Staff'">
                                                                <i class="fa fa-envelope ml-1" style="color:#2757a6;"></i>
                                                            </span>
                                                        </span>
                                                    </div>-->
                                                </div>
                                            </div>
                                            <div class="panel-collapse collapse {{msg.ALSTINT_Id}}">
                                                <div class="panel-body">
                                                    <div class="col-sm-7 text-left">
                                                        <a style="color:black" href="" ng-click="urlview(msg.ALSMINT_Interaction)">
                                                            {{ msg.ALSMINT_Interaction}}
                                                        </a>

                                                        <!--{{msg.alsminT_Interaction}}-->
                                                    </div>
                                                    <div class="col-sm-3 text-center">

                                                        <span ng-if="msg.ALSTINT_Attachment!=''&& msg.filetype2=='jpg' || msg.filetype2=='png' || msg.filetype2=='svg'|| msg.filetype2=='jpeg' || msg.filetype2=='gif'">
                                                            <a class="text-aqua" href="" ng-click="viewphoto1(msg.ALSTINT_Attachment)" data-placement="bottom" data-toggle="tooltip" title="View">
                                                                <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                                                            </a>
                                                        </span>

                                                        <span ng-if="msg.ALSTINT_Attachment!='' && msg.filetype2=='pdf' ">
                                                            <a class="text-aqua" href="" ng-click="previewpdf(msg.ALSTINT_Attachment)" data-placement="bottom" data-toggle="modal" data-target="#showpdf1" title="View">
                                                                <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                                                            </a>
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-2 text-right">
                                                        <span>
                                                            <a href="javascript:void(0)" class="text-primary" data-placement="bottom" data-toggle="modal" title="View" data-ng-model="reply" data-target="#viewrplyModal" data-ng-click="reply(msg)">
                                                                <i class="fa fa-bars fa-1x" aria-hidden="true">View & Reply</i>
                                                            </a>
                                                        </span>
                                                        <!--<span class="spnview1" ng-hide="msg.ISMINT_ComposedByFlg=='Student'">
                                                            <a class="text-aqua" href="" ng-click="deleteinboxmsg(msg)" data-placement="bottom" data-toggle="tooltip" title="delete">
                                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                            </a>
                                                        </span>-->

                                                        <!--<span class="spnview1" ng-show="userhrmE_Id==msg.ALSMINT_ComposedById  && roleflg!='Student'">
                                                            <a class="text-aqua" href="" ng-click="deleteinboxmsg(msg)" data-placement="bottom" data-toggle="tooltip" title="delete">
                                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                            </a>
                                                        </span>-->

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!--================== View Reply Model============== -->
    <div class="modal fade" id="viewrplyModal" role="dialog" data-backdrop="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="fa fa-times text-white" aria-hidden="true"></i>
                    </button>
                    <h4 class="modal-title text-white" style="text-align:center">{{subject}}</h4>

                    <!--<span class="xone" ng-if="ISTINT_Attachment!=''&& filetype1=='jpg' || filetype1=='png' || filetype1=='svg'|| filetype1=='jpeg' || filetype1=='gif'">
                        <a class="text-aqua" href="" ng-click="viewphoto1(ISTINT_Attachment)" data-placement="bottom" data-toggle="tooltip" title="View">
                            <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                        </a>
                    </span>

                    <span class="yone" ng-if="ISTINT_Attachment!='' && filetype1=='pdf' ">
                        <a class="text-aqua" href="" ng-click="previewpdf(ISTINT_Attachment)" data-placement="bottom" data-toggle="modal" data-target="#showpdf1" title="View">
                            <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                        </a>
                    </span>-->
                    <!--<button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>-->
                </div>
                <div class="modal-body" ng-if="roleflg=='Staff' || roleflg=='HOD' || roleflg=='Principal' || roleflg=='AcademicSupervisor' || roleflg=='ExamCoordinator'">
                    <div class="row" ng-show="viewmessage.length>0">
                        <h5 class="modal-title" style="text-align:center">{{subjdetails}}</h5>
                        <div class="col-sm-12">
                            <table class="table table-hover table-responsive table-bordered text-center">
                                <thead>
                                    <tr>
                                        <th>SL NO</th>
                                        <th width="50%"><a href="" ng-click="sort('ALSTINT_Interaction')">Interaction</a></th>
                                        <th>Attachment</th>
                                        <th><a href="" ng-click="sort('IINTSS_Date')">Reply By </a></th>
                                        <!--<th><a href="" ng-click="sort('IINTSS_Date')">To </a></th>-->
                                        <th><a href="" ng-click="sort('IINTSS_Date')">Date </a></th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="rply in viewmessage | orderBy:-ALSTINT_Interaction |filter:search">
                                        <td style="width:50px;">{{$index+1}}</td>
                                        <td style="overflow-wrap:break-word">
                                            <span>
                                                <a style="color:black" href="" ng-click="urlview(rply.ALSTINT_Interaction)">
                                                    {{ rply.ALSTINT_Interaction}}
                                                </a>
                                            </span>

                                        </td>
                                        <td>

                                            <span ng-if="rply.ALSTINT_Attachment!=''&& rply.filetype=='jpg' || rply.filetype=='png' || rply.filetype=='svg'|| rply.filetype=='jpeg' || rply.filetype=='gif'">
                                                <a class="text-aqua" href="" ng-click="viewphoto(rply)" data-placement="bottom" data-toggle="tooltip" title="View">
                                                    <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                                                </a>
                                            </span>

                                            <span ng-if="rply.ALSTINT_Attachment!='' && rply.filetype=='pdf' ">
                                                <a class="text-aqua" href="" ng-click="previewpdf(rply.ALSTINT_Attachment)" data-placement="bottom" data-toggle="modal" data-target="#showpdf1" title="View">
                                                    <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                                                </a>
                                            </span>

                                            <span ng-if="rply.ALSTINT_Attachment!='' && rply.filetype=='xls' ||rply.filetype=='xlsx' ">
                                                <a class="text-aqua" href="{{rply.ALSTINT_Attachment}}" data-placement="bottom" data-toggle="modal" target="_blank" title="View">
                                                    <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                                                </a>
                                            </span>
                                            <span ng-if="rply.ALSTINT_Attachment!='' && rply.filetype=='mp4' ">
                                                <a class="text-aqua" href="" ng-click="previewmp4(rply.ALSTINT_Attachment)" data-placement="bottom" data-toggle="modal" title="View">
                                                    <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                                                </a>
                                            </span>

                                            <span ng-if="rply.ALSTINT_Attachment==''">---</span>


                                        </td>
                                        <td style="overflow-wrap:break-word">{{ rply.Sender}}</td>

                                        <!--<td style="overflow-wrap:break-word">{{ rply.Receiver}}</td>-->
                                        <!--<td style="width:50px;" ng-if="rply.IINTSS_ByFlg=='Student'"> <i class="fa fa-graduation-cap  fa-1x" aria-hidden="true"></i></td>
                                        <td style="width:50px;" ng-if="rply.IINTSS_ByFlg=='Staff'"> <i class="fa fa-user fa-1x" aria-hidden="true"></i></td>-->
                                        <td style="overflow-wrap:break-word; width:105px;">{{rply.ALSTINT_DateTime | date:'medium'}}</td>
                                        <td>

                                            <span ng-show="userhrmE_Id==rply.ALSTINT_ComposedById">
                                                <a class="text-aqua" href="" ng-click="deletemsg(rply)" data-placement="bottom" data-toggle="tooltip" title="delete">
                                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                                </a>
                                            </span>
                                            <!--<span ng-if="userhrmE_Id!==rply.ISTINT_ComposedById">
                                                <a class="text-aqua" href="" ng-click="deletemsg(rply)" data-placement="bottom" data-toggle="tooltip" title="delete">
                                                    <i class="fa fa-trash" aria-hidden="true" ng-disabled="true"></i>
                                                </a>
                                            </span>-->

                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row" ng-show="viewmessage.length==0">
                        <div class="col-sm-12" ng-show="viewmessage.length==0">
                            <label class="col-sm-12" style="text-align:center;color:red"><b>NO REPLY FOUND</b></label>
                        </div>
                    </div>
                    <br />
                </div>


                <div class="modal-body" ng-show="roleflg=='Alumni'">
                    <div class="row">
                        <h5 class="modal-title" style="text-align:center" ng-show="viewmessage.length>0">{{subjdetails}}</h5>
                        <div class="col-sm-12" ng-show="viewmessage.length>0">
                            <table class="table table-hover table-responsive table-bordered text-center">
                                <thead>
                                    <tr>
                                        <th>SL NO</th>
                                        <th width="50%"><a href="" ng-click="sort('ALSTINT_Interaction')">Interaction</a></th>
                                        <th>Image</th>
                                        <th><a href="" ng-click="sort('IINTSS_Date')">Reply By </a></th>

                                        <th><a href="" ng-click="sort('IINTSS_Date')">Date </a></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="rply in viewmessage | orderBy:-ALSTINT_Interaction |filter:search">
                                        <td style="width:50px;">{{$index+1}}</td>
                                        <td style="overflow-wrap:break-word">{{ rply.ALSTINT_Interaction}}</td>
                                        <td>

                                            <span ng-if="rply.ALSTINT_Attachment!=''&& rply.filetype=='jpg' || rply.filetype=='png' || rply.filetype=='svg'|| rply.filetype=='jpeg' || rply.filetype=='gif'">
                                                <a class="text-aqua" href="" ng-click="viewphoto(rply)" data-placement="bottom" data-toggle="tooltip" title="View">
                                                    <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                                                </a>
                                            </span>

                                            <span ng-if="rply.ALSTINT_Attachment!='' && rply.filetype=='pdf' ">
                                                <a class="text-aqua" href="" ng-click="previewpdf(rply.ISTINT_Attachment)" data-placement="bottom" data-toggle="modal" data-target="#showpdf1" title="View">
                                                    <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                                                </a>
                                            </span>
                                            <span ng-if="rply.ALSTINT_Attachment!='' && rply.filetype=='xls' ||rply.filetype=='xlsx' ">
                                                <a class="text-aqua" href="{{rply.ALSTINT_Attachment}}" data-placement="bottom" data-toggle="modal" target="_blank" title="View">
                                                    <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                                                </a>
                                            </span>

                                            <span ng-if="rply.ISTINT_Attachment!='' && rply.filetype=='mp4' ">
                                                <a class="text-aqua" href="" ng-click="previewmp4(rply.ALSTINT_Attachment)" data-placement="bottom" data-toggle="modal" title="View">
                                                    <i class="fa fa-file-image-o fnt" aria-hidden="true"></i>
                                                </a>
                                            </span>


                                            <span ng-if="rply.ALSTINT_Attachment==''">---</span>


                                        </td>
                                        <td style="overflow-wrap:break-word">{{ rply.Sender}}</td>
                                       
                                        <!--<td style="overflow-wrap:break-word">{{ rply.Receiver}}</td>-->
                                        <!--<td style="width:50px;" ng-if="rply.IINTSS_ByFlg=='Student'"> <i class="fa fa-graduation-cap  fa-1x" aria-hidden="true"></i></td>
                                        <td style="width:50px;" ng-if="rply.IINTSS_ByFlg=='Staff'"> <i class="fa fa-user fa-1x" aria-hidden="true"></i></td>-->
                                        <td style="overflow-wrap:break-word; width:105px;">{{rply.ALSTINT_DateTime | date:'medium'}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="col-sm-12" ng-show="viewmessage.length==0">
                            <label class="col-sm-12" style="text-align:center;color:red"><b>NO REPLY FOUND</b></label>
                        </div>
                    </div>
                    <br />
                </div>

                <div class="modal-footer">
                    <md-button type="button" class="md-raised md-primary" data-placement="bottom" data-toggle="modal" title="Reply" data-ng-model="reply" data-target="#rplyModal" ng-click="replymsg();" ng-show="replyshow==true">
                        <i class="fa fa-reply" aria-hidden="true"> &nbsp;    Reply</i>
                    </md-button>
                    <label ng-show="replyshow==false" style="color:red;text-align:center">REPLY OPTION IS DISABLED</label>
                </div>
            </div>
        </div>
    </div>
    <!--================== Reply Model=================== -->
    <div class="modal fade" id="rplyModal" role="dialog" data-backdrop="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="fa fa-times text-white" aria-hidden="true"></i>
                    </button>
                    <h4 class="modal-title text-white" style="text-align:center; font-weight:800;">{{subject}}</h4>
                </div>
                <form class="form-horizontal ng-pristine ng-valid" name="myFormR" data-ng-submit="saveddata()" role="form" novalidate>
                    <div class="col-sm-12 margin-top-20">
                        <div class="col-sm-3">
                            <div class="form-group">
                                <h4 class="col-sm-10 col-sm-offset-1">Enter Reply :</h4>
                            </div>
                        </div>
                        <div class="col-sm-7">
                            <div class="form-group">
                                <textarea class="form-control" placeholder="Reply here....." name="reply" rows="8" id="comment" ng-model="istinT_Interaction" required></textarea>
                            </div>
                            <div class="error-messages" ng-if="interacted(myFormR.reply)" ng-messages="myFormR.reply.$error">
                                <div ng-message="required">Enter Reply</div>
                            </div>
                        </div>
                    </div>
                </form>
                <!--image upload start-->
                <div class="form-group">
                    <div class="col-sm-3 col-sm-offset-1">
                        <label for="upload-I" class="btn btn-primary upd2">Browse<i class="fa fa-upload faa" aria-hidden="true"></i></label>
                        <input id="upload-I" type="file" data-ng-model="Images" accept="image/png, image/jpeg, application/pdf" name="Images_name"
                               multiple onchange="angular.element(this).scope().imageUpload(this)" ng-hide="hidec==0" />

                    </div>
                </div>
                <div class="text-center">
                    <input type="hidden" ng-model="istinT_Id" value="{{istinT_Id}}" />
                    <md-button type="submit" ng-click="savereply(viewmessage)" class="md-raised md-primary sndbtn2">
                        <i class="fa fa-reply " aria-hidden="true">&nbsp; Send</i>
                    </md-button>
                </div>

                <div class="row">
                    <div class="col-sm-12">
                        <div>
                            <div class="imgview imgvi" ng-show="stepsModel.length>0">
                                <div class="row">
                                    <div class="col-sm-2" ng-repeat="step in stepsModel track by $index">
                                        <img class="img-responsive img-bordered" ng-src="{{step}}" ng-click="previewimg(step)" />

                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <!--image upload end-->


            </div>
        </div>
    </div>


    <!--==================== Image Preview Model ===========================-->
    <div id="myModalPreview" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="col-sm-8">
                        <md-button type="button" class="md-raised md-#fafafa" aria-disabled="false">
                            <a href="{{imagepreview1}}">
                                <i class="fa fa-download" aria-hidden="true"></i>
                                Download
                            </a>
                        </md-button>
                    </div>
                    <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true" data-target="#viewrplyModal" ng-click="closeimg()"></i></button>
                    <h3>{{filenames}}</h3>
                </div>
                <div class="modal-body">
                    <div class="box">
                        <div class="box-body">
                            <img id="preview" class="img-responsive" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="myModalPreview1" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="col-sm-8">
                        <md-button type="button" class="md-raised md-#fafafa" aria-disabled="false">
                            <a href="{{imagepreview2}}">
                                <i class="fa fa-download" aria-hidden="true"></i>
                                Download
                            </a>
                        </md-button>
                    </div>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
                <div class="modal-body">
                    <div class="box">
                        <div class="box-body">
                            <img id="preview1" class="img-responsive" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!--=============== Video View-->
    <div id="myvideoPreview" class="modal fade" role="dialog">
        <div class="modal-dialog" style="width:60%;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
                    <h4 class="modal-title text-white">Videos </h4>
                </div>
                <div class="modal-body">

                    <div ng-repeat="vd in view_videos">
                        <div class="row">

                            <div class="col-sm-6 col-sm-offset-2 vdoleft1">
                                <video width="420" height="240" controls="controls">
                                    <source ng-src="{{vd.video | trustUrl}}" type="video/mp4">
                                    Your browser does not support HTML5 video.
                                </video>
                            </div>

                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</section>
<div id="showpdf" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
        <form id="qqqq">

            <div class="modal-content">
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>


                <div id="pdfIdzz">


                </div>
            </div>
        </form>
    </div>
</div>




