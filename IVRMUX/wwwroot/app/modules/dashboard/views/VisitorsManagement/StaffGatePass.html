

<section class="content">
    <form class="form-horizontal ng-pristine ng-valid" name="myForm" role="form" ng-init="BindData()" novalidate>
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">Staff Gate Pass</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>

                </div>
            </div>
            <div class="box-body">

                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Staff Name:<span style="color:red">*</span></label>
                            <div class="col-sm-8">

                                <ui-select id="sel1" name="empna" ng-model="$parent.hrmE_Id" theme="bootstrap" ng-keyup="searchfilter($select);"
                                           ng-change="get_empdetails($parent.hrmE_Id)" title="Select emp">

                                    <ui-select-match ng-trim="false" placeholder="Select or search employee in the list...">
                                        {{$select.selected.empname}}
                                    </ui-select-match>
                                    <ui-select-choices repeat="option in emplist | filter: $select.search " value="{{option.hrmE_Id}}"
                                                       ng-selected="{{option.Selected == true}}">
                                        <div ng-bind-html="(option.empname) | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <div class="error-messages" ng-if="interacted(myForm.empna)" ng-messages="myForm.empna.$error">
                                    <div ng-message="required">Please Select Staff Name</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--<div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Card No:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" name="cardno" ng-model="gphsT_IDCardNo" allow-pattern="(\s|[a-zA-Z-0-9])" placeholder="Enter Card No." ng-maxlength="100">
                                <div class="error-messages" ng-if="interacted(myForm.cardno)" ng-messages="myForm.cardno.$error">
                                    <div ng-message="required">Enter Card No</div>
                                </div>
                            </div>
                        </div>
                    </div>-->
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Date:<span style="color:red">*</span></label>
                            <div class="col-sm-8">
                                <md-datepicker name="sch_date" onkeydown="return false" ng-model="gphsT_DateTime" md-placeholder="Enter Date" md-max-date="maxdate"
                                               md-min-date="mindate" required></md-datepicker>
                                <div class="error-messages" ng-if="interacted(myForm.sch_date)" ng-messages="myForm.sch_date.$error">
                                    <div ng-message="required" style="color:red">Please Select Date</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Department Name:<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="sel1" name="stafdep" ng-model="hrmD_Id" ng-disabled="true" required>

                                    <option value="">--Select--</option>
                                    <option ng-repeat="user in filldepartment" value="{{user.hrmD_Id}}" ng-selected="{{user.hrmD_Id == hrmD_Id}}">
                                        {{user.hrmD_DepartmentName}}
                                    </option>
                                </select>
                                <div class="error-messages" ng-if="interacted(myForm.stafdep)" ng-messages="myForm.stafdep.$error">
                                    <div ng-message="required">Please Select Department</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Designation Name:<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="sel1" name="stafdep11" ng-model="hrmdeS_Id" ng-disabled="true" required>

                                    <option value="">--Select--</option>
                                    <option ng-repeat="user in filldesignation" value="{{user.hrmdeS_Id}}" ng-selected="{{user.hrmdeS_Id == hrmdeS_Id}}">
                                        {{user.hrmdeS_DesignationName}}
                                    </option>
                                </select>
                                <div class="error-messages" ng-if="interacted(myForm.stafdep11)" ng-messages="myForm.stafdep11.$error">
                                    <div ng-message="required">Please Select Designation</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4" style="padding-top:7%;">Out Time : <strong style="color:red;">*</strong></label>
                            <div class="col-sm-7">
                                <!--<div uib-timepicker="" name="sch_time1" ng-model="FOMST_IHalfLoginTime" show-meridian="ismeridian"  required></div>-->
                                <div uib-timepicker name="out_time1" ng-model="GPHST_OutTime" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian" required></div>
                                <div class="error-messages" ng-if="interacted(myForm.out_time1)" ng-messages="myForm.out_time1.$error">
                                    <div ng-message="required">Select Out Time</div>
                                </div>
                            </div>
                        </div>
                        <!--<div class="form-group" style="margin-top:28px">
                            <label class="control-label col-sm-4">In Time:</label>
                            <div uib-timepicker name="sch_time1" ng-model="GPHST_InTime" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"  required></div>
                            <div class="error-messages" ng-if="interacted(myForm.in_time1)" ng-messages="myForm.in_time1.$error">
                                <div ng-message="required">Select In Time</div>
                            </div>
                        </div>-->
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Remarks :</label>
                            <div class="col-sm-8">
                                <textarea type="text" name="rmrk" ng-model="gphsT_Remarks" class="form-control" maxlength="250" rows="3" />
                                <div class="error-messages" ng-if="interacted(myForm.rmrk)" ng-messages="myForm.rmrk.$error">
                                    <div ng-message="required">Please fill Remarks</div>
                                </div>
                            </div>
                        </div>
                        <!--<div class="form-group">
                            <label class="control-label col-sm-4">Out Time:<span style="color:red;">*</span></label>
                            <div uib-timepicker name="out_time1" ng-model="GPHST_OutTime" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"></div>
                            <div class="error-messages" ng-if="interacted(myForm.out_time1)" ng-messages="myForm.out_time1.$error">
                                <div ng-message="required">Select Out Time</div>
                            </div>
                        </div>-->



                    </div>

                </div>





                <div class="row">
                    <div class="text-center">
                        <input type="hidden" ng-model="gphsT_Id" value="{{gphsT_Id}}" />
                        <md-button type="submit" class="md-raised md-primary" ng-disabled="form.$invalid" id="save-btn" ng-click="savedata()">
                            <i class="fa fa-floppy-o" aria-hidden="true"></i>
                            Save
                        </md-button>
                        <md-button type="button" class="md-raised md-warn" ng-click="cancel()">
                            <i class="fa fa-times" aria-hidden="true"></i>
                            Cancel
                        </md-button>
                        <md-button type="button" class="md-raised md-primary" id="print-btn" ng-disabled="staff_printoption" ng-click="Print()">
                            <i class="fa fa-print" aria-hidden="true"></i>
                            Print
                        </md-button>
                    </div>
                </div>
            </div>
        </div>
    </form>


    <div class="box box-primary" ng-show="alldata.length>0">
        <div class="box-header with-border">
            <h3 class="box-title">Staff Gate Pass List</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
            </div>
        </div>

        <div class="box-body">
            <div class="row">
                <div class="col-sm-4">
                    <div class="form-group">
                        <label class="control-label">
                            <b> Total Grid Records :</b>
                            <label class="badge">
                                {{alldata.length}}
                            </label>
                        </label>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group" ng-if="searchValue!=''">
                        <label class="control-label">
                            <b>Total Records Searched : </b>
                            <label class="badge">
                                {{filterValue1.length}}
                            </label>
                        </label>
                    </div>
                </div>
                <div class="col-sm-4 pull-right">
                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon">
                                <i class="fa fa-search"></i>
                            </span>
                            <input class="form-control" type="text" ng-model="searchValue" placeholder="search here...">
                        </div>
                    </div>
                </div>
            </div>
            <table class="table table-bordered table-responsive">
                <thead>
                    <tr>
                        <th>Sl.No.</th>
                        <th><a href="" ng-click="sort('empname')">Staff Name</a></th>
                        <th><a href="" ng-click="sort('hrmD_DepartmentName')">Department</a></th>
                        <th><a href="" ng-click="sort('hrmdeS_DesignationName')"> Designation </a></th>
                        <th><a href="" ng-click="sort('gphsT_GatePassNo')">Gate Pass No.</a></th>
                        <!--<th><a href="" ng-click="sort('gphsT_IDCardNo')"> Card No.</a></th>-->
                        <th><a href="" ng-click="sort('gphsT_DateTime')">Date</a></th>
                        <!--<th><a href="" ng-click="sort('gphsT_DateTime')">In Time</a></th>-->
                        <th><a href="" ng-click="sort('gphsT_DateTime')">Out Time</a></th>
                        <th><a href="" ng-click="sort('gphsT_Remarks')"> Remark</a></th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr dir-paginate="newuser1 in filterValue1 = (alldata | filter : searchValue) | orderBy:sortKey:sortReverse  | itemsPerPage:itemsPerPage" current-page="currentPage">
                        <td class="text-center">{{itemsPerPage *(currentPage-1)+$index+1}}</td>
                        <td class="text-left">{{newuser1.empname}}</td>
                        <td class="text-left">{{newuser1.hrmD_DepartmentName}}</td>
                        <td class="text-left">{{newuser1.hrmdeS_DesignationName}}</td>
                        <td class="text-left">{{newuser1.gphsT_GatePassNo}}</td>
                        <!--<td class="text-left">{{newuser1.gphsT_IDCardNo}}</td>-->
                        <td class="text-center">{{newuser1.gphsT_DateTime | date:'dd-MM-yyyy'}}</td>
                        <!--<td class="text-center">{{newuser1.gphsT_InTime}}</td>-->
                        <td class="text-center">{{newuser1.gphsT_OutTime}}</td>
                        <td class="text-left">{{newuser1.gphsT_Remarks}}</td>
                        <td class="text-center">

                            <a href="javascript:void(0)" ng-click="EditRecord(newuser1)" data-toggle="tooltip" title="Edit"><i class="fa fa-pencil-square-o text-primary" aria-hidden="true"></i></a>

                            <a href="javascript:void(0)" ng-click="PrintGatePass(newuser1)" data-toggle="tooltip" title="Print Gate Pass"><i class="fa fa-print text-primary" aria-hidden="true"></i></a>

                            <span ng-if="!newuser1.gphsT_ActiveFlg">
                                <a href="" ng-click="deactivate(newuser1)" class="text-green" data-placement="bottom" data-toggle="tooltip" title="Activate">
                                    Activate
                                </a>
                            </span>
                            <span ng-if="newuser1.gphsT_ActiveFlg">
                                <a href="" ng-click="deactivate(newuser1)" class="text-danger" data-placement="bottom" data-toggle="tooltip" title="Deactivate">
                                    De-Activate
                                </a>
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
            <dir-pagination-controls max-size="5"
                                     direction-links="true"
                                     boundary-links="true">
            </dir-pagination-controls>
        </div>
    </div>

    <div class="box box-primary" ng-show="staff_gate_pass">
        <div class="box-header with-border">
            <h3 class="box-title">Staff Gate Pass</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
            </div>
        </div>

        <div class="border" id="printSectionId">

            <div class="box-body">

                <div id="printSectionIdgirls">
                    <div class="col-sm-12">
                        <div class="col-sm-6">
                            <div style="padding:10px;" ng-repeat="vss in currentstaffdata">
                                <div class="text-center">
                                    <h3>Staff Gate Pass</h3>
                                </div>
                                <div class="text-center" style="margin-top:-10px;">
                                    <img style="width: 95%;" src="{{SchoolLogo}}" class="img-responsive" />
                                </div>
                                <div class="col-sm-9">
                                    <table style="width:100%;">

                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Sr. No.</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="5">{{vss.gphsT_Id}}</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Staff Name</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.empname}}</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Department</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.hrmD_DepartmentName}}</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Designation</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.hrmdeS_DesignationName}}</td>
                                            <td></td>
                                        </tr>

                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>

                                        <tr style="height:10px">


                                            <td width="30"></td>

                                            <td align="left" style="font-size:15px;font-weight:700">
                                                Gate
                                                Pass No
                                            </td>

                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.gphsT_GatePassNo}}</td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Date & Time</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.gphsT_DateTime| date:"dd-MM-yyyy"}} & {{vss.gphsT_OutTime}} </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Remark.</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.gphsT_Remarks}}</td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>

                                    </table>
                                </div>

                                <div class="col-sm-3">

                                    <img style="width:150px;height:120px;cursor: none;" src="{{vss.hrmE_Photo}}" class="img-responsive" />
                                </div>


                                <div class="col-sm-12" style="padding:10px">

                                    <div class="col-sm-6">
                                        <p style="font-size:15px;font-weight:700">Signature of Incharge</p>
                                    </div>
                                    <div class="col-sm-6">
                                        <p style="font-size:15px;font-weight:700;text-align:right">Signature of Principal/Manager</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div style="padding:10px;" ng-repeat="vss in currentstaffdata">
                                <div class="col-sm-12 text-center">
                                    <h3>Staff Gate Pass</h3>
                                </div>
                                <div class="text-center" style="margin-top:-10px;">
                                    <img style="height: auto;width: 95%;margin-top:0px;" src="{{SchoolLogo}}" class="img-responsive" />
                                </div>
                                <div class="col-sm-9">
                                    <table style="width:100%;">

                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Sr. No.</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="5">{{vss.gphsT_Id}}</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Staff Name</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.empname}}</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Department</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.hrmD_DepartmentName}}</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Designation</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.hrmdeS_DesignationName}}</td>
                                            <td></td>
                                        </tr>

                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>

                                        <tr style="height:10px">


                                            <td width="30"></td>

                                            <td align="left" style="font-size:15px;font-weight:700">
                                                Gate
                                                Pass No
                                            </td>

                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.gphsT_GatePassNo}}</td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Date & Time</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.gphsT_DateTime| date:"dd-MM-yyyy"}} & {{vss.gphsT_OutTime}} </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                        <tr style="height:10px">
                                            <td width="30"></td>
                                            <td style="font-size:15px;font-weight:700" align="left">Remark.</td>
                                            <td style="font-size:15px;font-weight:700" align="left" colspan="2">{{vss.gphsT_Remarks}}</td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>

                                    </table>
                                </div>
                                <div class="col-sm-3">

                                    <img style="width:150px;height:120px;cursor: none;" src="{{vss.hrmE_Photo}}" class="img-responsive" />
                                </div>
                                <div class="col-sm-12" style="padding:10px">

                                    <div class="col-sm-6">
                                        <p style="font-size:15px;font-weight:700">Signature of Incharge</p>
                                    </div>
                                    <div class="col-sm-6">
                                        <p style="font-size:15px;font-weight:700;text-align:right">Signature of Principal/Manager</p>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>

</section>