<style>
    .lessonplanner .file-blue:before {
        content: 'Upload';
        font-size: 13px;
        text-align: center
    }
</style>
<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400,700" rel="stylesheet" type="text/css">
<section class="content">
    <div data-ng-init="loadData()">
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">GUEST DETAILS</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
                <form class="form-horizontal ng-pristine ng-valid" role="form" name="myForm" novalidate>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Program Name: <span style="color:Red">*</span></label>
                                <div class="col-sm-8" style="padding-left:24px">
                                    <select class="form-control" id="sel1" name="acd" ng-model="pryR_Id" ng-change="getStudentBYYear(pryR_Id)" required>
                                        <option value="">--Select--</option>
                                        <option ng-repeat="user in programlist" value="{{user.pryR_Id}}">
                                            {{user.pryR_ProgramName}}
                                        </option>
                                    </select>
                                    <div class="error-messages" ng-if="interacted(myForm.acd)" ng-messages="myForm.acd.$error">
                                        <div ng-message="required">Please Select Program Name</div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-4">Guest Name: <span style="color:Red">*</span></label>
                                <div class="col-sm-8" style="padding-left:24px">
                                    <input type="text" ng-model="gname" name="gname" required class="form-control" />

                                    <div class="error-messages" ng-if="interacted(myForm.gname)" ng-messages="myForm.gname.$error">
                                        <div ng-message="required">Enter Guest Name</div>
                                    </div>
                                </div>

                            </div>


                            <div class="form-group">
                                <label class="control-label col-sm-4">Email Id: <span style="color:Red">*</span></label>
                                <div class="col-sm-8" style="padding-left:24px">
                                    <!--<input type="text" ng-model="emailid" required class="form-control" />-->

                                    <input name="stuemailid" type="email" id="reservation" class="form-control" data-ng-model="emailid" required
                                           ng-pattern="/^[A-Za-z0-9]+[A-Za-z0-9._]+@[A-Za-z0-9]+\.[A-Za-z.]{2,5}$/">

                                    <div class="error-messages" ng-if="interacted(myForm.stuemailid)" ng-messages="myForm.stuemailid.$error">
                                        <div ng-message="pattern">Enter Valid email-id</div>
                                        <div ng-message="required">Enter Email Id</div>
                                    </div>
                                </div>

                            </div>

                            <br />
                        </div>

                        <div class="col-sm-6">

                            <div class="form-group">
                                <label class="control-label col-sm-4">Guest Type: <span style="color:Red">*</span></label>
                                <div class="col-sm-8" style="padding-left:24px">
                                    <input type="text" name="Guest" ng-model="gtype" required class="form-control" />

                                    <div class="error-messages" ng-if="interacted(myForm.Guest)" ng-messages="myForm.Guest.$error">
                                        <div ng-message="required">Enter Guest Type</div>
                                    </div>
                                </div>

                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4">Mobile No: <span style="color:Red">*</span></label>
                                <div class="col-sm-8" style="padding-left:24px">
                                    <!--<input type="text" ng-model="gno" required class="form-control" />-->

                                    <input name="stumobno" type="text" id="reservation" class="form-control" required data-ng-model="gno" maxlength="10" ng-minlength="10" ng-pattern="/^[6-9]{1,1}[0-9]{9,9}?$/" allow-pattern="\d">

                                    <div class="error-messages" ng-if="interacted(myForm.stumobno)" ng-messages="myForm.stumobno.$error">
                                        <div ng-message="pattern">Enter Valid Mobile Number</div>
                                        <div ng-message="required">Enter Mobile No</div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4">Guest Speech:</label>
                                <div class="col-sm-8" style="padding-left:24px">
                                    <textarea class="form-control active" value="" id="reservation" name="waiveoffrema" type="text" data-ng-model="gspeech"></textarea>
                                </div>

                            </div>
                            <br />



                        </div>


                        <div class="box-body margin-top-10">
                            <table class="table table-responsive table-bordered clearfix" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>SL.NO.</th>
                                        <th>Profile Detail(PDF)</th>
                                        <th>View</th>
                                        <th>Image</th>
                                        <th>View</th>
                                        <th>Video</th>
                                        <th>View</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="text-center"> 1</td>

                                        <td class="text-center lessonplanner">
                                            <input class="custom-file-input file-blue text-center" id="{{studentGuardianDetails[0].lpmtR_Resources}}"
                                                   data-ng-model="studentGuardianDetails[0].lpmtR_Resources" type="file" 
                                                   accept="application/pdf" name="filetype{{$index}}"
                                                   onchange="angular.element(this).scope().UploaddianPhoto1(this, angular.element(this).scope().studentGuardianDetails[0])">
                                            <div class="error-messages" ng-if="interacted(myForm['filetype'+$index])" ng-messages="myForm['filetype'+$index].$error">
                                                <div ng-message="required">Upload File</div>
                                            </div>
                                        </td>

                                        <td>
                                            <span ng-if="studentGuardianDetails[0].lpmtR_Resources !=null && studentGuardianDetails[0].lpmtR_Resources !=''">
                                                <a ng-if="studentGuardianDetails[0].filetype=='pdf'"
                                                   style="color:blue;display:inline; " href="{{studentGuardianDetails[0].lpmtR_Resources}}" target="_blank" full-frame="">
                                                    <b style="color:orangered;display:inline; ">(Download Pdf)</b>
                                                </a>
                                            </span>
                                        </td>

                                        <td class="text-center lessonplanner">
                                            <input class="custom-file-input file-blue text-center" id="{{studentGuardianDetailsimg[0].lpmtR_Resources}}"
                                                   data-ng-model="studentGuardianDetailsimg[0].lpmtR_Resources" type="file" 
                                                   accept="image/*" name="filetype{{$index}}"
                                                   onchange="angular.element(this).scope().uploadimage(this, angular.element(this).scope().studentGuardianDetailsimg[0])">
                                            <div class="error-messages" ng-if="interacted(myForm['filetype'+$index])" ng-messages="myForm['filetype'+$index].$error">
                                                <div ng-message="required">Upload File</div>
                                            </div>

                                        </td>
                                        <td>
                                            <span ng-if="studentGuardianDetailsimg[0].lpmtR_Resources !=null && studentGuardianDetailsimg[0].lpmtR_Resources !=''">
                                                <a ng-if="studentGuardianDetailsimg[0].filetype=='jpg'"
                                                   style="color:red;display:inline; font-weight: bolder;" data-toggle="modal" data-target="#myModal"
                                                   data-ng-click="showGuardianPhoto(studentGuardianDetailsimg[0])">
                                                    Image
                                                </a>
                                            </span>
                                        </td>



                                        <td class="text-center lessonplanner">
                                            <input class="custom-file-input file-blue text-center" id="{{studentGuardianvideo[0].lpmtR_Resources}}"
                                                   data-ng-model="studentGuardianvideo[0].lpmtR_Resources" type="file" 
                                                   accept="video/mp4" name="filetype{{$index}}"
                                                   onchange="angular.element(this).scope().uploadGuardianvideo(this, angular.element(this).scope().studentGuardianvideo[0])">
                                            <div class="error-messages" ng-if="interacted(myForm['filetype'+$index])" ng-messages="myForm['filetype'+$index].$error">
                                                <div ng-message="required">Upload File</div>
                                            </div>

                                        </td>
                                        <td>
                                            <span ng-if="studentGuardianvideo[0].lpmtR_Resources !=null && studentGuardianvideo[0].lpmtR_Resources !=''">

                                                <a ng-if="studentGuardianvideo[0].filetype=='mp4'"
                                                   style="color:red;display:inline; font-weight: bolder;" data-toggle="modal" data-target="#popup15"
                                                   data-ng-click="showGuardianPhotonew(studentGuardianvideo[0])">
                                                    Video
                                                </a>

                                            </span>
                                        </td>


                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <hr />
                    <div class="text-center">
                        <input type="hidden" ng-model="PRYRG_Id" value="{{PRYRG_Id}}" />
                        <md-button type="button" ng-disabled="form.$invalid" class="md-raised md-primary" ng-click="savemappedeventsdata()">
                            <i class="fa fa-save" aria-hidden="true"></i> Save
                        </md-button>
                        <md-button type="button" class="md-raised md-warn" ng-click="clear2()">
                            <i class="fa fa-times" aria-hidden="true"></i> Cancel
                        </md-button>
                    </div>
                </form>
            </div>

            <div class="box-body">
                <table class="table table-responsive table-bordered clearfix" style="width:100%;">
                    <thead>
                        <tr>
                            <th>SL.NO.</th>
                            <th>Program Name</th>
                            <th>Guest Type</th>
                            <th>Guest Name</th>
                            <th>Phone No</th>
                            <th>Email Id</th>
                            <th>Images</th>
                            <th>Videos</th>
                            <th>Guest Profile</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="user in gridOptions2| orderBy:predicate:default | filter:paginate| filter:searchd" ng-class-odd="'odd'">
                            <td class="text-center">{{ $index + 1 }}</td>
                            <td>{{ user.programname}}</td>
                            <td>{{ user.pryrG_GuestType}}</td>
                            <td>{{ user.pryrG_GuestName}}</td>
                            <td>{{ user.pryrG_GuestPhoneNo}}</td>
                            <td>{{ user.pryrG_GuestEmailId}}</td>
                            <td>
                                <span ng-if="user.pryrG_GuestPhoto !=' ' && user.pryrG_GuestPhoto != null">
                                    <a style="color:blue;display:inline;" data-toggle="modal" data-target="#myModal" title="Image"
                                       data-ng-click="showGuardianPhoto1(user)">
                                        <i class="fa fa-file-image-o" style="font-size:21px"></i>
                                    </a>
                                    </span>
                            </td>
                            <td>
                                <span ng-if="user.pryrG_GuestVideo !=' ' && user.pryrG_GuestVideo != null">
                                    <a style="color:blue;display:inline;" data-toggle="modal" data-target="#popup15" title="Video(MP4)"
                                       data-ng-click="showGuardianPhotonew1(user)">
                                        <i class="fa fa-video-camera" style="font-size:21px"></i>
                                    </a>
                                </span>
                            </td>
                            <td>
                                <span ng-show="user.pryrG_GuestProfile !=' ' && user.pryrG_GuestProfile !=null">
                                    <a style="color:blue;display:inline; " href="{{user.pryrG_GuestProfile}}" target="_blank" title="Pdf" full-frame="">
                                        <i class="fa fa-file-pdf-o" style="font-size:21px"></i>
                                        <!--<b style="color:orangered;display:inline; ">(Download pdf)</b>-->
                                    </a>
                                </span>
                            </td>


                            <td class="text-center">
                                <a href="javascript:void(0)" ng-click="getorgvalue(user)" class="text-primary" data-placement="bottom" data-toggle="tooltip" title="Edit">
                                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                </a>

                                <a class="text-danger padding-right-5" href="" data-placement="bottom" data-toggle="tooltip" title="Delete">
                                    <i class="fa fa-trash" aria-hidden="true" ng-click="DeletRecord(user)"></i>
                                </a>
                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>

        </div>

    </div>
</section>

<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-body">
                <img id="preview" class="img-responsive" />
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>

<div class="modal fade modal-small" id="popup15" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>

        </div>
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-body">
                <div style="padding-bottom:20px">
                    <video width="320" height="240" controls="controls">
                        <source ng-src="{{ videdfd }}" type="video/mp4">
                        Your browser does not support HTML5 video.
                    </video>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="clearpopupgrid15()" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>

