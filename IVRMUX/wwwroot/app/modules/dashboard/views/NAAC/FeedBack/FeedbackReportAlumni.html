<section class="content">
    <form class="form-horizontal ng-pristine ng-valid" name="myForm" role="form" ng-init="BindData()" novalidate>
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">AlumniFeed back Report</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <div class="box-body">
                <div class="row" ng-init="FMTY_StakeHolderFlag='Alumni'">
                    <div class="col-sm-12">
                        <div class="text-center well" ng-init="onchangeradio()"  hidden>
                            <label class="radio-inline">
                                Feed Back Type
                            </label>
                            <label class="radio-inline">
                                <input name="optradio" ng-model="FMTY_StakeHolderFlag" value="Student" type="radio" ng-change="onchangeradio()" required>
                                <span class="lbl padding-8">Student</span>
                            </label>
                            <label class="radio-inline">
                                <input name="optradio" ng-model="FMTY_StakeHolderFlag" value="Parents" type="radio" ng-change="onchangeradio()" required>
                                <span class="lbl padding-8">Parents</span>
                            </label>
                            <label class="radio-inline">
                                <input name="optradio" ng-model="FMTY_StakeHolderFlag" value="Alumni" type="radio" ng-change="onchangeradio()" required>
                                <span class="lbl padding-8">Alumni</span>
                            </label>
                            <label class="radio-inline">
                                <input name="optradio" ng-model="FMTY_StakeHolderFlag" value="Staff" type="radio" ng-change="onchangeradio()" required>
                                <span class="lbl padding-8">Staff</span>
                            </label>
                            <div class="error-messages" ng-if="interacted(myForm.optradio)" ng-messages="myForm.optradio.$error">
                                <div ng-message="required">Select Type</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Left Year:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="sel1" name="stuclass" data-ng-model="ASMAY_Id" ng-change="onchangeyear()" required>
                                        <option value="">--Select Year--</option>
                                        <option ng-repeat="class in yearlist" value="{{class.asmaY_Id}}" ng-selected="{{class.Selected == true}}">
                                            {{class.asmaY_Year}}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.stuclass)" ng-messages="myForm.stuclass.$error">
                                    <div ng-message="required">Select Year</div>
                                </div>
                            </div>
                        </div>

                        <div class=" col-sm-6">
                            <div class="text-center well" ng-init="flagtype='Yearwise'">
                                <label class="radio-inline">
                                    <input name="optradioq" ng-model="flagtype" value="Yearwise" type="radio" ng-change="onchangeradioflag()" required>
                                    <span class="lbl padding-8">Year Wise</span>
                                </label>
                                <label class="radio-inline">
                                    <input name="optradioq" ng-model="flagtype" value="Overall" type="radio" ng-change="onchangeradioflag()" required>
                                    <span class="lbl padding-8">Over All</span>
                                </label>
                                <label class="radio-inline">
                                    <input name="optradioq" ng-model="flagtype" value="question" type="radio" ng-change="onchangeradioflag()" required>
                                    <span class="lbl padding-8">Question Wise</span>
                                </label>
                                <label class="radio-inline">
                                    <input name="optradioq" ng-model="flagtype" value="total" type="radio" ng-change="onchangeradioflag()" required>
                                    <span class="lbl padding-8">Student List</span>
                                </label>
                                <!--<label class="radio-inline">
                                    <input name="optradioq" ng-model="flagtype" value="remarks" type="radio" ng-change="onchangeradioflag()" required>
                                    <span class="lbl padding-8">Remarks List</span>
                                </label>-->
                                <div class="error-messages" ng-if="interacted(myForm.optradioq)" ng-messages="myForm.optradioq.$error">
                                    <div ng-message="required">Select Type</div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Feedback Type:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="sel12" name="feedbCK" data-ng-model="FMTY_Id" ng-change="onchangefeedback()" required>
                                        <option value="">--Select Feedback Type--</option>
                                        <option ng-repeat="class in feedbacktype" value="{{class.fmtY_Id}}" ng-selected="{{class.Selected == true}}">
                                            {{class.fmtY_FeedbackTypeName}}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.feedbCK)" ng-messages="myForm.feedbCK.$error">
                                    <div ng-message="required">Select Feedback Type</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Course:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="sel12" name="cour" data-ng-model="AMCO_Id" ng-required="flagtype!='question' && flagtype!='total'"
                                            ng-disabled="flagtype=='question' || flagtype=='total'">
                                        <option value="">--Select Course--</option>
                                        <option ng-repeat="class in coursedetails" value="{{class.amcO_Id}}" ng-selected="{{class.Selected == true}}">
                                            {{class.amcO_CourseName}}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.cour)" ng-messages="myForm.cour.$error">
                                    <div ng-message="required">Select Course</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Question:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="sel112" name="ques" data-ng-model="FMQE_Id" ng-required="flagtype=='question' || flagtype=='remarks'" ng-disabled="flagtype!='question' && flagtype!='remarks' ">
                                        <option value="">--Select Question--</option>
                                        <option ng-repeat="quest in questiondetails" value="{{quest.fmqE_Id}}" ng-selected="{{quest.Selected == true}}">
                                            {{quest.fmqE_FeedbackQRemarks}}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.ques)" ng-messages="myForm.ques.$error">
                                    <div ng-message="required">Select Question</div>
                                </div>
                            </div>
                        </div>

                        <div class=" col-sm-6" ng-show="flagtype=='question'">
                            <div class="text-left well" ng-init="piecolumn='pie'">
                                <label class="radio-inline">
                                    <input name="optradioqd" ng-model="piecolumn" value="pie" type="radio" ng-change="onchangepiecolumnflag()"
                                           ng-required="flagtype=='question'">
                                    <span class="lbl padding-8">Pie Graph</span>
                                </label>
                                <label class="radio-inline">
                                    <input name="optradioqd" ng-model="piecolumn" value="columnper" type="radio" ng-change="onchangepiecolumnflag()"
                                           ng-required="flagtype=='question'">
                                    <span class="lbl padding-8">Percentage Column Graph</span>
                                </label>
                                <label class="radio-inline">
                                    <input name="optradioqd" ng-model="piecolumn" value="columnno" type="radio" ng-change="onchangepiecolumnflag()"
                                           ng-required="flagtype=='question'">
                                    <span class="lbl padding-8">No. Column Graph</span>
                                </label>

                                <div class="error-messages" ng-if="interacted(myForm.optradioqd)" ng-messages="myForm.optradioqd.$error">
                                    <div ng-message="required">Select Type Of Graph</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-12">
                        <div class="text-center">
                            <md-button type="submit" class="md-raised md-primary" ng-disabled="form.$invalid" id="save-btn" ng-click="onreport(AMCO_Id)">
                                <i class="fa fa-file" aria-hidden="true"></i>
                                Report
                            </md-button>
                            <!--<md-button type="submit" class="md-raised md-primary" ng-disabled="form.$invalid" id="save-btn" ng-click="onreport1(obj)" ng-if="flag!='Yearwise'">
                                <i class="fa fa-bar-chart " aria-hidden="true"></i>
                                Graphical Report
                            </md-button>-->
                            <md-button ng-hide="gridOptions.data.length>0" type="submit" class="md-raised md-warn" ng-click="cancel()">
                                <i class="fa fa-times" aria-hidden="true"></i>
                                Cancel
                            </md-button>
                            <md-button type="button" class="md-raised md-primary" ng-show="table" ng-click="PrintChart()">
                                <!--id="exportButton"-->
                                <i class="fa fa-print" aria-hidden="true"></i>Print
                            </md-button>
                            <md-button type="button" class="md-raised md-primary" ng-show="graphs" id="exportButton">
                                <i class="fa fa-print" aria-hidden="true"></i>Print
                            </md-button>
                            <input type="hidden" ng-model="FMTY_Id" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <div class="box" ng-show="table">
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">Alumni Feedback Report</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
                <div ng-show="printSectionIdyearwise" id="printSectionIdyearwise">
                    <div class="col-sm-12 text-center">
                        <h4>{{reportname}} </h4>
                    </div>
                    <br />
                    <div class="margin-top-10">
                        <table class="table table-hover table-responsive table-bordered">
                            <thead>
                                <tr>
                                    <th class="text-center">Course</th>
                                    <th class="text-center">Year</th>
                                    <th class="text-center">Question</th>
                                    <th class="text-center" ng-repeat="option in getoptions">
                                        {{option.fmoP_FeedbackOptions}}
                                    </th>
                                </tr>
                            </thead>
                            <tbody ng-repeat="user in tempnew">
                                <tr>
                                    <td rowspan="{{user.rowcount+1}}" class="text-left padding-left-5">{{user.coursenamedetails}} {{user.semyearname}}</td>
                                    <td rowspan="{{user.rowcount+1}}" class="text-left padding-left-5">{{yearnamedetails}}</td>
                                </tr>
                                <tr ng-repeat="ques in getquestions">
                                    <td class="text-left padding-left-5"> {{ques.fmqE_FeedbackQRemarks}}</td>

                                    <td ng-repeat="options in getoptions">
                                        <span ng-repeat="marks in report" ng-if="marks.amcoid==user.coursedetailsid && marks.amseid==user.semid
                                              && marks.qid==ques.fmqE_Id && options.fmoP_Id==marks.opid">
                                            {{marks.total}}
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div ng-show="printSectionIdoverall" id="printSectionIdoverall">
                    <div class="col-sm-12 text-center">
                        <h4>{{reportname}} </h4>
                    </div>
                    <br />
                    <div class="margin-top-10">
                        <table class="table table-hover table-responsive table-bordered">
                            <thead>
                                <tr>
                                    <th class="text-center">Course</th>
                                    <th class="text-center">Year</th>
                                    <th class="text-center">Question</th>
                                    <th class="text-center" ng-repeat="option in getoptions">
                                        {{option.fmoP_FeedbackOptions}}
                                    </th>
                                </tr>
                            </thead>
                            <tbody ng-repeat="user in tempnew">
                                <tr>
                                    <td rowspan="{{user.rowcount+1}}" class="text-left padding-left-5">{{user.coursenamedetails}} {{user.semyearname}}</td>
                                    <td rowspan="{{user.rowcount+1}}" class="text-left padding-left-5">{{yearnamedetails}}</td>
                                </tr>
                                <tr ng-repeat="ques in getquestions">
                                    <td class="text-left padding-left-5"> {{ques.fmqE_FeedbackQRemarks}}</td>

                                    <td ng-repeat="options in getoptions">
                                        <span ng-repeat="marks in report" ng-if="marks.amcoid==user.coursedetailsid && marks.amseid==user.semid
                                              && marks.qid==ques.fmqE_Id && options.fmoP_Id==marks.opid">
                                            {{marks.total}}
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="box-body">
                        <img id="chartImage" style="height: 260px; width: 100%;" ng-show="imgdiv">
                        <div id="chartContainer" style="height: 450px; width: 100%;"></div>
                    </div>
                </div>

                <div ng-show="printSectionIdquestion" id="printSectionIdquestion">
                    <div class="col-sm-12 text-center">
                        <h4>{{reportname}} </h4>
                    </div>
                    <br />
                    <div class="margin-top-10">
                        <table class="table table-hover table-responsive table-bordered">
                            <thead>
                                <tr>
                                    <th class="text-center">Feedback Option</th>
                                    <th class="text-center" ng-repeat="option in getcoursenewdetails">
                                        {{option.courseidname}}
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="report1 in getoptions">
                                    <td class="text-left"> {{report1.fmoP_FeedbackOptions}}</td>
                                    <td class="text-center" ng-repeat="option1 in getcoursenewdetails">
                                        <span ng-repeat="list in  report" ng-if="option1.courseid==list.amcoid && report1.fmoP_Id==list.opid">
                                            {{list.total}}
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="box-body" ng-if="piecolumn=='columnper'">
                        <img id="chartImage1" style="height: 500px; width: 100%;" ng-show="imgdiv1">
                        <div id="chartContainer1" style="height: 500px; width: 100%;"></div>
                    </div>

                    <div class="box-body" ng-if="piecolumn=='columnno'">
                        <img id="chartImage112" style="height: 500px; width: 100%;" ng-show="imgdiv112">
                        <div id="chartContainer112" style="height: 500px; width: 100%;"></div>
                    </div>
                </div>

                <div ng-show="printSectionIdquestionpie" id="printSectionIdquestionpie">
                    <div class="col-sm-12 text-center">
                        <h4>{{reportname}} </h4>
                    </div>
                    <br />
                    <div class="margin-top-10">
                        <table class="table table-hover table-responsive table-bordered">
                            <thead>
                                <tr>
                                    <th class="text-center">Sl.No</th>
                                    <th class="text-center">Feedback Option</th>
                                    <th class="text-center">Score</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="report1 in report">
                                    <td class="text-center">{{$index+1}}</td>
                                    <td class="text-left"> {{report1.options}}</td>
                                    <td class="text-center">{{report1.total}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="box-body">
                        <img id="chartImage1pie" style="height: 500px; width: 100%;" ng-show="imgdiv1pie">
                        <div id="chartContainer1pie" style="height: 500px; width: 100%;"></div>
                    </div>
                </div>

                <div ng-show="printSectionIdtotal" id="printSectionIdtotal">
                    <div class="col-sm-12 text-center">
                        <h4>{{reportname}} </h4>
                    </div>
                    <br />
                    <div class="margin-top-10">
                        <table class="table table-hover table-responsive table-bordered">
                            <thead>
                                <tr>
                                    <th class="text-center">Course</th>
                                    <th class="text-center" ng-repeat="option in semlist">
                                        {{option.semyear}}
                                    </th>
                                    <th class="text-center">
                                        Total
                                    </th>
                                    <th class="text-center">
                                        Feedback Give Students List
                                    </th>
                                    <th class="text-center">
                                        Feedback Not Give Students List
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="report1 in coursenewdetails">
                                    <td class="text-left"> {{report1.courseidname}}</td>
                                    <td class="text-center" ng-repeat="option1 in semlist">
                                        <span ng-repeat="list in report" ng-if="option1.semyear==list.semyear && report1.courseid==list.AMCO_Id">
                                            {{list.GIVENSTUDENTS}}
                                        </span>
                                    </td>
                                    <td>{{report1.total}}</td>
                                    <td>
                                        <a href="javascript:void(0)" class="text-primary" data-placement="bottom" data-toggle="modal" title="Click To View Details"
                                           ng-click="getstudentlistgiven(report1)" data-target="#myModal35">
                                            View Details
                                            <i class="fa fa-eye" aria-hidden="true"></i>
                                        </a>
                                    </td>
                                    <td>
                                        <a href="javascript:void(0)" class="text-primary" data-placement="bottom" data-toggle="modal" title="Click To View Details"
                                           ng-click="getstudentlistnotgiven(report1)" data-target="#myModal35">
                                            View Details
                                            <i class="fa fa-eye" aria-hidden="true"></i>
                                        </a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div ng-show="printSectionIdremarks" id="printSectionIdremarks">
                    <div class="col-sm-12 text-center">
                        <h4>{{reportname}} </h4>
                    </div>
                    <br />
                    <div class="margin-top-10">
                        <table class="table table-hover table-responsive table-bordered">
                            <thead>
                                <tr>
                                    <th class="text-center">Year</th>
                                    <th class="text-center">Semester</th>
                                    <th class="text-center">Feedback Question Remarks</th>
                                    <th class="text-center">Remarks</th>
                                </tr>
                            </thead>
                            <tbody ng-repeat="user in reportnewremarks">
                                <tr>
                                    <td rowspan="{{user.rowcount+1}}" class="text-left padding-left-5">{{user.ASMAY_Year}}</td>
                                    <td rowspan="{{user.rowcount+1}}" class="text-left padding-left-5">{{user.AMCO_CourseName}} - {{user.AMSE_SEMName}}</td>
                                    <td rowspan="{{user.rowcount+1}}" class="text-left padding-left-5">{{user.FMQE_FeedbackQRemarks}}</td>
                                </tr>
                                <tr ng-repeat="marks in user.details">
                                    <td class="text-left padding-left-5">
                                        {{$index+1}}. {{marks.FCSTR_FeedBack}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="modal fade modal-medium" id="myModal35" role="dialog" data-backdrop="static">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-footer">
                <div class="row">
                    <div class="col-sm-9 text-right">
                        <h4 style="padding-right:100px;">{{feedback}} Student List</h4>
                    </div>
                    <div class="col-sm-3 pull-right">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-default" ng-click="printstudentlist()">
                            <i class="fa fa-print" aria-hidden="true"></i>Print
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-3 pull-right">
                        <div class="pull-right">
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-search"></i>
                                </div>
                                <input class="form-control" ng-model="search55" type="text" style="width:200px" placeholder="search here..">
                            </div>
                        </div>
                    </div>
                </div>
                <table class="table table-hover table-responsive table-bordered margin-top-15">
                    <thead>
                        <tr>
                            <th>SLNO</th>
                            <th>Student Name</th>
                            <th>Admno</th>
                            <th>Course</th>
                            <th>Branch</th>
                            <th>Semester</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="user in getstudentlist |filter:search55">
                            <td>{{$index+1}}</td>
                            <td class="text-left padding-left-5">{{ user.studentname}}</td>
                            <td>{{ user.AMCST_AdmNo}}</td>
                            <td>{{ user.AMCO_CourseName}}</td>
                            <td>{{ user.AMB_BranchName}}</td>
                            <td>{{ user.AMSE_SEMName}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

                <button type="button" class="btn btn-default" ng-click="printstudentlist()">
                    <i class="fa fa-print" aria-hidden="true"></i>Print
                </button>
            </div>
        </div>

    </div>
</div>

<div ng-show="printSectionIdtotalnew" id="printSectionIdtotalnew">
    <div class="col-sm-12 text-center">
        <h4>{{reportname}} </h4>
    </div>
    <br />
    <div class="margin-top-10">
        <table class="table table-hover table-responsive table-bordered">
            <thead>
                <tr>
                    <th class="text-center">Course</th>
                    <th class="text-center" ng-repeat="option in semlist">
                        {{option.semyear}}
                    </th>
                    <th class="text-center">
                        Total
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="report1 in coursenewdetails">
                    <td class="text-left"> {{report1.courseidname}}</td>
                    <td class="text-center" ng-repeat="option1 in semlist">
                        <span ng-repeat="list in report" ng-if="option1.semyear==list.semyear && report1.courseid==list.AMCO_Id">
                            {{list.GIVENSTUDENTS}}
                        </span>
                    </td>
                    <td>{{report1.total}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div ng-show="printSectionIdtotalstudentlist" id="printSectionIdtotalstudentlist">
    <div class="col-sm-12 text-center">
        <h4>{{reportname}} </h4>
    </div>
    <br />
    <div class="col-sm-12 text-center">
        <h4>{{feedback}} Student List</h4>
    </div>
    <br />
    <div class="margin-top-10">
        <table class="table table-hover table-responsive table-bordered">
            <thead>
                <tr>
                    <th>SLNO</th>
                    <th>Student Name</th>
                    <th>Admno</th>
                    <th>Course</th>
                    <th>Branch</th>
                    <th>Semester</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="user in getstudentlist">
                    <td>{{$index+1}}</td>
                    <td class="text-left padding-left-5">{{ user.studentname}}</td>
                    <td>{{ user.AMCST_AdmNo}}</td>
                    <td>{{ user.AMCO_CourseName}}</td>
                    <td>{{ user.AMB_BranchName}}</td>
                    <td>{{ user.AMSE_SEMName}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>



