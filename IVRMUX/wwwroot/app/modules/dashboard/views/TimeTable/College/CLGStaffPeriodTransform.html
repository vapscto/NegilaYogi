
<section class="content">
    <form class="form-horizontal" role="form" name="myForm" novalidate>
        <div class="box box-primary" data-ng-init="BindData()">
            <div class="box-header with-border">
                <h3 class="box-title">Staff Periods Transfer</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                </div>
            </div>

            <div class="box-body">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Academic Year:<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="sel" name="acd" ng-model="ASMAY_Id" ng-change="onyrchange()" required>
                                    <option value="">--Select--</option>
                                    <option ng-repeat="year in academic" value="{{year.asmaY_Id}}" ng-selected="{{year.Selected == true}}">
                                        {{year.asmaY_Year}}
                                    </option>
                                </select>
                                <div class="error-messages" ng-if="interacted(myForm.acd)" ng-messages="myForm.acd.$error">
                                    <div ng-message="required"> Select Academic Year</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">From Staff :<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <ui-select id="sel1" name="bookname" ng-model="$parent.HRME_Id" theme="bootstrap" title="Select Staff" ng-change="staffchange()">
                                    <ui-select-match ng-trim="false" placeholder="Select or search Staff...">{{$select.selected.staffNamelst}}</ui-select-match>

                                    <ui-select-choices repeat="option in stafflst | filter: $select.search " value="{{option.hrmE_Id}}" ng-selected="{{option.Selected == true}}">
                                        <div ng-bind-html="(option.staffNamelst) | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <label id="upnme" ng-show="updateshowlabel">{{updatename}}</label>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="text-center">
                    <div class="">
                        <md-button type="submit" ng-disabled="form.$invalid" class="md-raised md-primary" data-ng-click="GetReport()">
                            <i class="fa fa-file" aria-hidden="true"></i> Report
                        </md-button>
                        <md-button type="button" class="md-raised md-warn" ng-click="clearid()">
                            <i class="fa fa-times" aria-hidden="true"></i> Cancel
                        </md-button>
                    </div>
                </div>


                <div class="row">

                    <!--<div class="col-sm-6" ng-show="datareport">-->
                    <div class="col-sm-6" ng-show="false">
                        <div class="">
                            <div class="subwell" style="line-height:30px;">
                                <div class="row">
                                    <label class="col-sm-4">
                                        Replacement From
                                    </label>
                                    <label class="col-sm-8">
                                        {{}}
                                    </label>
                                </div>
                                <div class="row">
                                    <label class="col-sm-4">
                                        Replacement To
                                    </label>
                                    <label class="col-sm-8">
                                        {{}}
                                    </label>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!--<div ng-show="datareport">-->
                    <div ng-show="false">
                        <md-button type="submit" class="md-raised md-warn">
                            <i class="fa fa-refresh" aria-hidden="true"></i> Replace
                        </md-button>
                    </div>
                </div>
            </div>

        </div>
        <div class="box box-primary tt" ng-show="grid_view">
            <div class="box-header with-border">
                <h3 class="box-title">Report Grid View</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                </div>
            </div>

            <div class="box-body" style="overflow:scroll">
                <div class="col-sm-12" ng-show="datareport">
                    <!--<div class="col-sm-4" ng-show="false">-->

                    <div class="">

                        <div>
                            <div class="row">

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Course :<span style="color:Red">*</span></label>
                                        <div class="col-sm-6">
                                            <select class="form-control" id="sel12" name="cls11" ng-model="AMCO_Id"  ng-change="gettimetable()">
                                                <option value="0">--ALL--</option>
                                                <option ng-repeat="class in courselist" value="{{class.amcO_Id}}" ng-selected="{{class.Selected == true}}">
                                                    {{class.amcO_CourseName}}
                                                </option>
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm.cls11)" ng-messages="myForm.cls11.$error">
                                                <div ng-message="required"> Select class</div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Branch :<span style="color:Red">*</span></label>
                                        <div class="col-sm-6">
                                            <select class="form-control" id="sel12" name="sec11" ng-model="AMB_Id"  ng-change="gettimetable()">
                                                <option value="0">--ALL--</option>
                                                <option ng-repeat="brr in branchlist" value="{{brr.amB_Id}}" ng-selected="{{brr.Selected == true}}">
                                                    {{brr.amB_BranchName}}
                                                </option>
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm.sec11)" ng-messages="myForm.sec11.$error">
                                                <div ng-message="required"> Select Section</div>
                                            </div>
                                        </div>
                                    </div>

                                </div> 
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Sem :<span style="color:Red">*</span></label>
                                        <div class="col-sm-6">
                                            <select class="form-control" id="sel12" name="cls11" ng-model="AMSE_Id"  ng-change="gettimetable()">
                                                <option value="0">--ALL--</option>
                                                <option ng-repeat="brr in semisterlist" value="{{brr.amsE_Id}}" ng-selected="{{brr.Selected == true}}">
                                                    {{brr.amsE_SEMName}}
                                                </option>
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm.cls11)" ng-messages="myForm.cls11.$error">
                                                <div ng-message="required"> Select Semester</div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Section :<span style="color:Red">*</span></label>
                                        <div class="col-sm-6">
                                            <select class="form-control" id="sel12" name="sec11" ng-model="ACMS_Id"  ng-change="gettimetable()">
                                                <option value="0">--ALL--</option>
                                                <option ng-repeat="section in secdetails" value="{{section.acmS_Id}}" ng-selected="{{section.Selected == true}}">
                                                    {{section.acmS_SectionName}}
                                                </option>
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm.sec11)" ng-messages="myForm.sec11.$error">
                                                <div ng-message="required"> Select Section</div>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Subject :<span style="color:Red">*</span></label>
                                        <div class="col-sm-6">
                                            <select class="form-control" id="sel12" name="sec1122" ng-model="ismS_Id"  ng-change="gettimetable()">
                                                <option value="0">--ALL--</option>
                                                <option ng-repeat="ss in subjectdet" value="{{ss.ismS_Id}}" ng-selected="{{ss.Selected == true}}">
                                                    {{ss.ismS_SubjectName}}
                                                </option>
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm.sec1122)" ng-messages="myForm.sec1122.$error">
                                                <div ng-message="required"> Select Section</div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="text-center">
                        <div class="subwell" style="padding:6px !important">
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" ng-true-value="true" ng-false-value="false" ng-model="allper" ng-click="clickAllprd(allper)">
                                    <span class="lbl padding-8"> ALL</span>
                                </label>


                            </div>

                        </div>
                    </div>



                </div>
                <br />
                <table class="table table-hover table-responsive table-bordered text-center" id="table" ng-show="grid_view">
                    <thead style="font-weight: bold;">
                        <tr>
                            <th><a href="" ng-click="sort('Name')">Day / Period</a></th>
                            <th ng-repeat="period in period_list"><a href="" ng-click="sort('period.ttmP_PeriodName')">Period {{period.ttmP_PeriodName}}</a><input type="hidden" value="{{period.ttmP_Id}}" /></th>

                        </tr>
                    </thead>
                    <tbody>

                        <tr ng-repeat="table in table_list |orderBy:sortKey:reverse | filter:paginate | filter:search" ng-class-odd="'odd'">

                            <td style="color:blue">{{table[0].dayname}}</td>
                            <td ng-repeat="i in table" style="color:{{i.color}};background:{{i.background}}; " width="120px">
                                <div data-ng-click="cell_click(i.dayid,i.pedid,i.dayname,i.pedname,i.color)">
                                    <!--allow-drag="true" allow-drop="true" drag-drop="onDragDrop(e)" draggable="true"-->
                                    <input type="hidden" value="{{i.pedid}}" /><input type="hidden" value="{{i.dayid}}" />{{i.value}}
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <pagination total-items="totalItems" ng-model="currentPage"
                            max-size="5" boundary-links="true"
                            items-per-page="numPerPage" class="pagination-sm">
                </pagination>

            </div>
            <div class="text-center">
                <div class="subwell" style="padding:6px !important">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" ng-true-value="true" ng-false-value="false" ng-model="deleteflg" >
                            <span class="lbl padding-8"> DELETE SELECTED PERIODS</span>
                        </label>


                    </div>

                </div>
            </div>
            <div class="row" style="padding-left:50px" ng-show="trantimetable.length>0 && deleteflg ==true">
                <div class="col-sm-6 col-lg-offset-4">
                    <md-button type="submit" class="md-raised md-warn" ng-click="Delete_to_save()">
                        <i class="fa fa-refresh" aria-hidden="true"></i> Delete Periods
                    </md-button>
                </div>
            </div>
            <div class="row" style="padding-left:50px" ng-show="trantimetable.length>0 && deleteflg ==false">
                <div class="col-sm-6" ng-show="grid_view">
                    <div class="">
                        <div class="form-group">
                            <label class="control-label col-sm-4">To Staff :<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="sel1211" name="staff1" ng-model="hrmE_Idto" ng-required="trantimetable.length>0">
                                    <option value="">--Select--</option>
                                    <option ng-repeat="objstf in stafflstto" value="{{objstf.hrmE_Id}}" ng-selected="{{objstf.Selected == true}}">
                                        {{objstf.staffNamelst}}
                                    </option>
                                </select>
                                <div class="error-messages" ng-if="interacted(myForm.staff1)" ng-messages="myForm.staff1.$error">
                                    <div ng-message="required"> Select Staff</div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div>
                    <md-button type="submit" class="md-raised md-warn" ng-click="replacement_to_save()">
                        <i class="fa fa-refresh" aria-hidden="true"></i> Transfer Periods
                    </md-button>
                </div>
            </div>
        </div>
    </form>
</section>
