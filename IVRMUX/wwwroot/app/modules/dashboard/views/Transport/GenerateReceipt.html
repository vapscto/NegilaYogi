<section class="content" ng-init="loaddata()">
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Generate Receipt</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <!-- /.box-header -->
        <div class="box-body">
            <form class="form-horizontal" role="form" name="myForm" novalidate>
                <!--<md-content class="md-padding">-->
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <div class="text-center col-sm-12">
                                <div class="well">
                                    <label>Please Select Radio Button:<span style="color:red;">*</span></label>
                                    <label class="radio-inline">
                                        <input type="radio" id="1" value="trip" name="searchradio" ng-model="searchradio" ng-click="onchangeradiobtn()" required />
                                        <span class="lbl padding-8">Search By Booking Id</span>
                                    </label>
                                    <label class="radio-inline">
                                        <input type="radio" id="2" value="hirer" name="searchradio" ng-model="searchradio" ng-click="onchangeradiobtn()" required />
                                        <span class="lbl padding-8">Search By Hirer</span>
                                    </label>
                                    <div class="error-messages" ng-if="interacted(myForm.searchradio)" ng-messages="myForm.searchradio.$error">
                                        <div ng-message="required">Please Select Radio Button</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-left:25%" ng-show="searchradio=='trip'">
                    <div class="col-sm-6 pull-left">
                        <div class="form-group searchbox">
                            <label class="control-label col-sm-6">Search By Booking Id:</label>
                            <div class="input-group">
                                <select class="form-control" name="srchtrip" data-ng-model="TRVD_TripId1" ng-required="searchradio=='trip'">
                                    <option value="">--Select--</option>
                                    <option ng-repeat="val in tripDrpwn2" value="{{val.trvD_TripId}}" ng-selected="val.Selected==true">{{val.trtoB_BookingId}}                   </option>
                                </select>
                                <span class="input-group-addon">
                                    <button class="btn" type="submit" ng-click="SearchByTripId1()"><i class="fa fa-search"></i></button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-left:25%" ng-show="searchradio=='hirer'">
                    <div class="col-sm-6 pull-left">
                        <div class="form-group searchbox">
                            <label class="control-label col-sm-6">Search By Hirer:</label>
                            <div class="input-group">
                                <select class="form-control" name="hire" ng-model="trmH_HirerName" ng-required="searchradio=='hirer'">
                                    <option value="">--Select--</option>
                                    <option ng-repeat="val in hirerDrpDwn2" value="{{val.trmH_HirerName}}" ng-selected="val.Selected==true">{{val.trmH_HirerName}}</option>
                                </select>
                                <span class="input-group-addon">
                                    <button class="btn" type="submit" ng-click="SearchByHirer()"><i class="fa fa-search"></i></button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div ng-show="genrecSearchResult.length>0 && searchradio=='trip'">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Booking Date:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_BookingDate|date:'dd-MM-yyyy'}}</label>
                                </div>
                            </div>
                        </div>
                       
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Hirer Name:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_HirerName}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Contact No.:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_HirerContactNo}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">PickUp Location:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{PickUpLocation}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Trip Address:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_TripAddress}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">PickUp Date:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_TripFromDate|date:'dd-MM-yyyy'}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Drop Date:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_TripToDate|date:'dd-MM-yyyy'}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="box box-primary">
                        <div class="box-header with-border">
                            <h3 class="box-title">Assigned Vehicles &amp; Drivers</h3>
                        </div>
                        <div class="box-body">

                            <table class="table table-hover table-responsive table-bordered text-center">
                                <thead>
                                    <tr>
                                        <th>
                                            Vehicle&nbsp;<span style="color:red;">*</span>
                                        </th>
                                        <th>
                                            Driver&nbsp;<span style="color:red;">*</span>
                                        </th>
                                        <th>
                                            Opening K.M &nbsp;<span style="color:red;">*</span>
                                        </th>
                                        <th>
                                            Closing K.M &nbsp;<span style="color:red;">*</span>
                                        </th>
                                        <!--<th>
                                           Action
                                        </th>-->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-ng-repeat="vehicle in vehicles  track by $index | filter:nameText">
                                        <td>
                                            <select name="vhcle{{$index}}" ng-model="vehicles[$index].trmV_Id" class="form-control" ng-disabled="disableDriverallottment">
                                                <option value="">--Select--</option>
                                                <option ng-repeat="vehicle1 in vehicleList" value="{{vehicle.trmV_Id}}" ng-selected="vehicle1.trmV_Id==vehicle.trmV_Id">
                                                    {{vehicle1.trmV_VehicleNo}}
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm['vhcle'+$index])" ng-messages="myForm['vhcle'+$index].$error">
                                                <div ng-message="required">Please Select Vehicle</div>
                                            </div>
                                        </td>
                                        <td>
                                            <select class="form-control" name="driver{{$index}}" ng-model="vehicles[$index].trvD_Id" ng-disabled="disableDriverallottment">
                                                <option value="">--Select--</option>
                                                <option ng-repeat="driver1 in driverList" value="{{driver1.trmD_Id}}" ng-selected="driver1.trmD_Id==vehicle.trvD_Id">{{driver1.trmD_DriverName}}</option>
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm['driver'+$index])" ng-messages="myForm['driver'+$index].$error">
                                                <div ng-message="required">Please Select Driver</div>
                                            </div>
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" name="opening{{$index}}" ng-model="vehicles[$index].trtP_OpeningKM" allow-pattern="\d" placeholder="Enter Opening K.M" maxlength="11" ng-disabled="disableDriverallottment">
                                            <div class="error-messages" ng-if="interacted(myForm['opening'+$index])" ng-messages="myForm['opening'+$index].$error">
                                                <div ng-message="required">Please Enter Opening K.M</div>
                                            </div>
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" name="closing{{$index}}" ng-model="vehicles[$index].trtP_ClosingKM" allow-pattern="\d" placeholder="Enter Closing K.M" maxlength="11" ng-disabled="disableDriverallottment">
                                            <div class="error-messages" ng-if="interacted(myForm['closing'+$index])" ng-messages="myForm['closing'+$index].$error">
                                                <div ng-message="required">Please Enter Closing K.M</div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!--<div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Vehicle:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{vehicleName}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Driver:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{driverName}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Opening K.M:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_OpeningKM}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Closing K.M:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_ClosingKM}}</label>
                                </div>
                            </div>
                        </div>
                    </div>-->
                </div>
                <div ng-show="hirerTripList.length > 0 && searchradio=='hirer'">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Mobile No:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRMH_MobileNo}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Email Id:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRMH_EmailId}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="error-messages" ng-if="interacted(myForm.adcheckt)" ng-messages="myForm.adcheckt.$error">
                        <div ng-message="required">Select atleast one check box</div>
                    </div>
                    <div class="error-messages" ng-if="interacted(myForm.pendingbillamt)" ng-messages="myForm.pendingbillamt.$error">
                        <div ng-message="required">Please Enter Amount</div>
                    </div>
                    <table class="table table-hover table-responsive table-bordered text-center">
                        <thead>
                            <tr>
                                <th>Select</th>
                                <th><a href="#" ng-click="sort('trtP_BillNo')">Pending Bills</a></th>
                                <th><a href="#" ng-click="sort('trtP_TotalReceivable')">Total Payable</a></th>
                                <th><a href="#" ng-click="sort('trtP_PaidAmount')">Amount Received</a></th>
                                <th><a href="#" ng-click="sort('trtP_BalanceAmount')">Balance Amount</a></th>
                                <th>View Details</th>
                                <th>Type</th>
                                <th>Discount(%)</th>
                                <th>Discount Amount</th>
                                <th><a href="#" ng-click="sort('trtpP_PaidAmount')">Enter Amount</a></th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="val in hirerTripList" ng-class-odd="'odd'">
                                <td>
                                    <input type="checkbox" name="adcheckt" ng-model="val.checked" ng-required="isOptionsRequired()" ng-disabled="val.trtP_BalanceAmount=='0'">
                                    <span class="lbl padding-8"></span><span style="color:lightgreen;font-size:20px;"></span>
                                </td>
                                <td>{{val.trtP_BillNo}}</td>
                                <td>{{val.trtP_TotalReceivable}}</td>
                                <td>{{val.trtP_PaidAmount}}</td>
                                <td>{{val.trtP_BalanceAmount}}</td>
                                <td><a ng-click="viewDetails(val)"> <i class="fa fa-eye text-purple"></i></a></td>
                                <td>
                                    <select class="form-control" id="sel111" ng-model="val.fsC_ConcessionType" ng-change="typechange(val)"  ng-disabled="!val.checked" >
                                        <option value=""> Select </option>
                                        <option value="Amount"> Amount </option>
                                        <option value="Percent"> Percent </option>
                                    </select>
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="pendingbillamt1111" id="pendingbillamt1" ng-blur="changeper(val)" ng-model="val.TRTP_DiscountAmountpe" ng-disabled="!val.checked || val.fsC_ConcessionType !='Percent'" />
                                    <div class="error-messages" ng-if="interacted(myForm.pendingbillamt1111)" ng-messages="myForm.pendingbillamt1111.$error">
                                        <div ng-message="required">Please Enter </div>
                                    </div>
                                </td>
                               
                                <td>
                                    <input type="text" class="form-control" name="pendingbillamt11" id="pendingbillamt1" ng-model="val.TRTP_DiscountAmount" ng-disabled="!val.checked ||val.fsC_ConcessionType !='Amount'" ng-blur="changedisc(val)" />
                                    <div class="error-messages" ng-if="interacted(myForm.pendingbillamt1)" ng-messages="myForm.pendingbillamt1.$error">
                                        <div ng-message="required">Please Enter Discount</div>
                                    </div>
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="abillamt" id="pendingbillamt" ng-model="val.TRTPP_PaidAmount" ng-required="val.checked" ng-disabled="!val.checked" ng-blur="changedisc1(val)" />
                                    <div class="error-messages" ng-if="interacted(myForm.abillamt)" ng-messages="myForm.abillamt.$error">
                                        <div ng-message="required">Please Enter Amount</div>
                                    </div>
                                </td>

                            </tr>
                        </tbody>
                    </table>
                </div>
                <div ng-show="genrecSearchResult.length > 0 && searchradio=='trip'">
                    <!--<div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4"> Total Bill Amount:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_billamt11}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Amount Received:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_PaidAmount}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Balance Amount:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_BalanceAmount}}</label>
                                </div>
                            </div>
                        </div>
                    </div>-->
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Total Bill Amount:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_TotalReceivable}}</label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4">Enter Amount:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" name="amt" ng-model="TRTPP_PaidAmount" placeholder="Enter Amount" allow-pattern="(\d|[.])" maxlength="10" ng-required="searchradio=='trip'" ng-blur="mainamtchange()">
                                    <div class="error-messages" ng-if="interacted(myForm.amt)" ng-messages="myForm.amt.$error">
                                        <div ng-message="required">Enter Amount</div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!--<div class="col-sm-6">
        <div class="form-group">
            <label class="control-label col-sm-4">Total Discount:</label>
            <div class="col-sm-8">
                <label class="control-label form-control">{{TRTP_discAmount11}}</label>
            </div>
        </div>
    </div>-->
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Type:</label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="sel111" ng-model="amttype" ng-change="typemainchange1()">
                                        <option value=""> Select </option>
                                        <option value="Amount"> Amount </option>
                                        <option value="Percent"> Percent </option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4">Discount (%):</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" name="amt11" ng-model="TRTP_Discounprc" placeholder="Enter Amount" allow-pattern="(\d|[.])" maxlength="10" ng-required="searchradio=='trip' && amttype=='Percent' " ng-blur="trippercchange()" ng-disabled="amttype!='Percent'">
                                    <div class="error-messages" ng-if="interacted(myForm.amt155551)" ng-messages="myForm.amt11.$error">
                                        <div ng-message="required">Enter data</div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-4">Discount Amount:</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" name="amt11" ng-model="TRTP_DiscountAmount" placeholder="Enter Amount" allow-pattern="(\d|[.])" maxlength="10" ng-required="searchradio=='trip'" ng-blur="tripdiscchange()" ng-disabled="amttype!='Amount'">
                                    <div class="error-messages" ng-if="interacted(myForm.amt11)" ng-messages="myForm.amt11.$error">
                                        <div ng-message="required">Enter Amount</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                          
                        </div>

                    </div>
                </div>
                <br />
                <div ng-show="genrecSearchResult.length>0 || hirerTripList.length > 0">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Receipt No.:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" value="{{TRTPP_ReceiptNo}}" name="receiptno" ng-model="TRTPP_ReceiptNo" required ng-blur="duprecpcheck()"> <!--ng-disabled="recdisable==true"-->
                                    <div class="error-messages" ng-if="interacted(myForm.receiptno)" ng-messages="myForm.receiptno.$error">
                                        <div ng-message="required">Receipt No Required</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Receipt Date:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <md-datepicker name="receiptdte" ng-model="TRTPP_ReceiptDate" required md-placeholder="Select Date" onkeydown="return false"></md-datepicker>
                                    <div class="error-messages" ng-if="interacted(myForm.receiptdte)" ng-messages="myForm.receiptdte.$error">
                                        <div ng-message="required">Please Select Receipt Date</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Mode Of Payment:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <div class="well">
                                        <label class="radio-inline" ng-repeat="val in modeOfPaymentList2">
                                            <input type="radio" value="{{val.ivrmmoD_ModeOfPayment}}" name="modofpay" ng-model="TRTPP_PaymentMode" ng-required="reqSelection" ng-click="modeofPayment1(TRTPP_PaymentMode)" />
                                            <span class="lbl padding-8">{{val.ivrmmoD_ModeOfPayment}}</span>
                                        </label>
                                        <div class="error-messages" ng-if="interacted(myForm.modofpay)" ng-messages="myForm.modofpay.$error">
                                            <div ng-message="required">Please Select Mode Of Payment</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-show="Cheque==true">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Cheque DD No:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" name="ddno" ng-model="TRTPP_ChequeDDNo" placeholder="Enter Cheque DD No" allow-pattern="\d" ng-required="Cheque==true">
                                    <div class="error-messages" ng-if="interacted(myForm.ddno)" ng-messages="myForm.ddno.$error">
                                        <div ng-message="required">Please Enter Cheque DD No</div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Cheque DD Date:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <md-datepicker name="chequedate" ng-model="TRTPP_ChequeDDDate" ng-required="Cheque==true" md-placeholder="Select Date" onkeydown="return false"></md-datepicker>
                                    <div class="error-messages" ng-if="interacted(myForm.chequedate)" ng-messages="myForm.chequedate.$error">
                                        <div ng-message="required">Please Select Cheque DD Date</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Bank Name :<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" name="banknme" ng-model="TRTPP_BankName" allow-pattern="[A-Za-z ]" ng-required="Cheque==true" />
                                    <div class="error-messages" ng-if="interacted(myForm.banknme)" ng-messages="myForm.banknme.$error">
                                        <div ng-message="required">Enter Bank Name</div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>


                    <hr />
                    <div class="text-center">
                        <md-button type="button" class="md-raised md-primary" data-ng-click="pay()">
                            <i class="fa fa fa-credit-card" aria-hidden="true"></i>
                            PAY
                        </md-button>
                        <md-button type="button" class="md-raised md-warn" ng-click="cancel()">
                            <i class="fa fa-times" aria-hidden="true"></i> Cancel
                        </md-button>
                    </div>
                </div>
                <!--</md-content>-->
            </form>
        </div>
    </div>
    <div class="box box-primary" ng-show="generatedReceiptsList.length> 0 && genrecSearchResult.length >0">
        <!--&& searchradio=='trip'-->
        <div class="box-header with-border">
            <h3 class="box-title">Receipt Details</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div class="box-body">
            <div class="row">
                <div class="col-sm-4">
                    <div class="form-group">
                        <label class="control-label">
                            <b> Total Grid Records :</b>
                            <label class="badge">
                                {{presentCountgrid}}
                            </label>
                        </label>
                    </div>
                </div>
                <div class="col-sm-5">
                    <div class="form-group" ng-if="searchValue!=''">
                        <label class="control-label">
                            <b>Total Records Searched : </b>
                            <label class="badge">
                                {{filterValue1.length}}
                            </label>
                        </label>
                    </div>
                </div>
                <div class="col-sm-3 pull-right">
                    <div class="form-group">


                        <input class="form-control" ng-model="searchValue" type="text" placeholder="search here...">

                    </div>
                </div>
            </div>

            <table class="table table-hover table-responsive table-bordered text-center">
                <thead>
                    <tr>
                        <th><a href="">SL.No.</a></th>
                        <!--<th><a href="" ng-click="sort('trtP_BillNo')">Bill No.</a></th>
                    <th><a href="" ng-click="sort('trtP_BillDate')">Bill Date</a></th>
                    <th><a href="" ng-click="sort('trtP_BillAmount')">BillAmount</a></th>
                    <th><a href="" ng-click="sort('trtP_DiscountAmount')">Discount Amount</a></th>
                    <th><a href="" ng-click="sort('trtP_TotalReceivable')">Total Receivable</a></th>-->
                        <th><a href="" ng-click="sort('trtpP_ReceiptNo')">Receipt No.</a></th>
                        <th><a href="" ng-click="sort('trtpP_ReceiptDate')">Receipt Date</a></th>
                        <th><a href="" ng-click="sort('trtpP_PaidAmount')">Paid Amount</a></th>
                        <!--<th><a href="" ng-click="sort('trtP_PaidAmount')">Total Paid</a></th>
                    <th><a href="" ng-click="sort('trtP_BalanceAmount')">Balance Amount</a></th>-->
                        <th>PRINT</th>
                    </tr>
                </thead>
                <tbody>
                    <tr dir-paginate="user in filterValue1 = (generatedReceiptsList | filter : searchValue) |orderBy:sortKey:sortReverse |itemsPerPage:itemsPerPage" current-page="currentPage" ng-class-odd="'odd'">
                        <td>{{itemsPerPage *(currentPage-1)+$index+1}}</td>
                        <!--<td>{{user.trtP_BillNo}}</td>
                    <td>{{user.trtP_BillDate|date:'dd-MM-yyyy'}}</td>
                    <td>{{user.trtP_BillAmount}}</td>
                    <td>{{user.trtP_DiscountAmount}}</td>
                    <td>{{user.trtP_TotalReceivable}}</td>-->
                        <td>{{user.trtpP_ReceiptNo}}</td>
                        <td>{{user.trtpP_ReceiptDate|date:'dd-MM-yyyy'}}</td>
                        <td>{{user.trtpP_PaidAmount}}</td>
                        <!--<td>{{user.trtP_PaidAmount}}</td>
                    <td>{{user.trtP_BalanceAmount}}</td>-->
                        <td>
                            <a href="" data-toggle="modal" data-target="#myModal3" data-backdrop="static" data-ng-click="viewprintbilldetails(user)">
                                <i class="fa fa-eye" aria-hidden="true"></i>
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>

            <dir-pagination-controls max-size="5"
                                     direction-links="true"
                                     boundary-links="true">
            </dir-pagination-controls>
        </div>
    </div>
    <div id="myModal1" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-ng-click="removeall1()"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
                    <h4 class="modal-title text-white">Bill Details</h4>
                </div>
                <div class="modal-body">
                    <div class="row" style="margin-top:5px">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Booking Date:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_BookingDateDet|date:'dd-MM-yyyy'}}</label>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row" style="margin-top:5px">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Hirer Name:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_HirerNameDet}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Contact No.:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_HirerContactNoDet}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="margin-top:5px">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">PickUp Location:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{PickUpLocationDet}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Trip Address:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_TripAddressDet}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="margin-top:5px">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">PickUp Date:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_TripFromDateDet|date:'dd-MM-yyyy'}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Drop Date:</label>
                                <div class="col-sm-8">
                                    <label class="control-label form-control">{{TRTP_TripToDateDet|date:'dd-MM-yyyy'}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="box box-primary">
                        <div class="box-header with-border">
                            <h3 class="box-title">Assigned Vehicles &amp; Drivers</h3>
                        </div>
                        <div class="box-body">

                            <table class="table table-hover table-responsive table-bordered text-center">
                                <thead>
                                    <tr>
                                        <th>
                                            Vehicle&nbsp;<span style="color:red;">*</span>
                                        </th>
                                        <th>
                                            Driver&nbsp;<span style="color:red;">*</span>
                                        </th>
                                        <th>
                                            Opening K.M &nbsp;<span style="color:red;">*</span>
                                        </th>
                                        <th>
                                            Closing K.M &nbsp;<span style="color:red;">*</span>
                                        </th>
                                        <!--<th>
                                           Action
                                        </th>-->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-ng-repeat="vehicle in vehicles  track by $index | filter:nameText">
                                        <td>
                                            <select name="vhcle{{$index}}" ng-model="vehicles[$index].trmV_Id" class="form-control" ng-disabled="disableDriverallottment">
                                                <!--required-->
                                                <option value="">--Select--</option>
                                                <option ng-repeat="vh1 in vehicleList" value="{{vh1.trmV_Id}}" ng-selected="vh1.trmV_Id==vehicle.trmV_Id">
                                                    {{vh1.trmV_VehicleNo}}
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm['vhcle'+$index])" ng-messages="myForm['vhcle'+$index].$error">
                                                <div ng-message="required">Please Select Vehicle</div>
                                            </div>
                                        </td>
                                        <td>
                                            <select class="form-control" name="driver{{$index}}" ng-model="vehicles[$index].trvD_Id" ng-disabled="disableDriverallottment">
                                                <!--required-->
                                                <option value="">--Select--</option>
                                                <option ng-repeat="driver in driverList" value="{{driver.trmD_Id}}" ng-selected="driver.trmD_Id==vehicle.trvD_Id">{{driver.trmD_DriverName}}</option>
                                            </select>
                                            <div class="error-messages" ng-if="interacted(myForm['driver'+$index])" ng-messages="myForm['driver'+$index].$error">
                                                <div ng-message="required">Please Select Driver</div>
                                            </div>
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" name="opening{{$index}}" ng-model="vehicles[$index].trtP_OpeningKM" allow-pattern="\d" placeholder="Enter Opening K.M" maxlength="11" ng-disabled="disableDriverallottment"><!--required-->
                                            <div class="error-messages" ng-if="interacted(myForm['opening'+$index])" ng-messages="myForm['opening'+$index].$error">
                                                <div ng-message="required">Please Enter Opening K.M</div>
                                            </div>
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" name="closing{{$index}}" ng-model="vehicles[$index].trtP_ClosingKM" allow-pattern="\d" placeholder="Enter Closing K.M" maxlength="11" ng-disabled="disableDriverallottment"><!--required-->
                                            <div class="error-messages" ng-if="interacted(myForm['closing'+$index])" ng-messages="myForm['closing'+$index].$error">
                                                <div ng-message="required">Please Enter Closing K.M</div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">

                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>



</section>
<div class="modal fade" id="myModal3" role="dialog">
    <div class="modal-dialog modal-lg">
        <link href="../../../../../css/print/trnRecieptprint.css" rel="stylesheet" />
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <i class="fa fa-times text-white" aria-hidden="true"></i>
                </button>
                <h4 class="modal-title text-white">Bill Details</h4>
            </div>
            <div class="modal-body" id="printareaId">
                <div class="col-sm-12 text-center" style="margin-top:50px">
                    <label class="col-sm-12 text-center"><b style="font-size:17px">{{inst_name|uppercase}}</b></label>
                    <label class="col-sm-12 text-center"><b style="font-size:14px">{{add}},{{add1}},{{city}}-{{pin}}</b></label>
                </div>
                <div class="col-sm-12 text-center" style="margin-top:10px"><b>HIRE BILL</b></div>
                <table class="table table-responsive table-bordered" style="margin-top:10px">

                    <tbody>
                        <tr>
                            <td>Receipt NO.</td>
                            <td>{{recno}}</td>
                            <td>Date</td>
                            <td>{{recnodate|date:'dd/MM/yyyy'}}</td>
                        </tr>
                        <!--<tr ng-repeat="st in receptprint">
                            <td>Vehicle NO</td>
                            <td>{{st.TRMV_VehicleNo}}</td>
                            <td>Driver Name</td>
                            <td>{{st.TRMD_DriverName}}</td>
                        </tr>-->
                        <tr>
                            <td>Booked By</td>
                            <td>{{hirename}}</td>
                            <td>Opening Time</td>
                            <td>{{openingtime}}</td>
                        </tr>
                        <tr>
                            <td>Booked Date</td>
                            <td colspan="3" class="text-left">{{bookeddate|date:'dd/MM/yyyy'}}</td>

                        </tr>
                        <tr>
                            <td>Trip Location </td>
                            <td colspan="3" class="text-left">{{triploc}}</td>

                        </tr>
                        <tr>
                            <td>Purpose </td>
                            <td colspan="3" class="text-left">{{trippurpose}}</td>

                        </tr>
                        <tr>
                            <td>Required Date </td>
                            <td colspan="3" class="text-left">{{reqdate|date:'dd/MM/yyyy'}} &nbsp; &nbsp; TO &nbsp; &nbsp; {{reqdateto|date:'dd/MM/yyyy'}}</td>

                        </tr>

                    </tbody>
                </table>

                <table class="table table-responsive table-bordered">
                    <tbody>
                        <tr>
                            <td><b>Driver's Name </b></td>
                            <td><b>Vehicle NO </b></td>
                            <td><b>Opening K.M</b></td>
                            <td><b>Closing K.M</b></td>
                            <td><b>NET K.M    </b></td>
                            <td><b>Rate/K.M   </b></td>
                            <td><b>Discount Amt   </b></td>
                            <td><b>Paid Amt   </b></td>

                        </tr>
                        <tr ng-repeat="st1 in temparray">
                            <td>{{st1.TRMD_DriverName}}</td>
                            <td>{{st1.TRMV_VehicleNo}}</td>
                            <td>{{st1.TRTP_OpeningKM}}</td>
                            <td>{{st1.TRTP_ClosingKM}}</td>
                            <td>{{st1.NET_KM}}</td>
                            <td>{{st1.TRHR_RatePerKM}}</td>
                            <td rowspan="{{receptprint.length}}"
                                ng-if="st1.TRTP_DiscountAmount =='0' ">
                                {{st1.TRTP_DiscountAmount }}
                            </td>
                            <td rowspan="{{receptprint.length}}"
                                ng-if="st1.TRTP_DiscountAmount !=''">
                                {{st1.TRTP_DiscountAmount }}
                            </td>
                            <td rowspan="{{receptprint.length}}" ng-if="st1.TRTPP_PaidAmount!=''"> {{st1.TRTPP_PaidAmount }}</td>
                        </tr>
                        <tr ng-repeat="tt in ttarray">
                            <td colspan="2"><b>TOTAL</b></td>
                            <td><b>{{tt.opentotal}}</b></td>

                            <td><b>{{tt.closetotal}}</b></td>
                            <td><b>{{tt.nettotal}}</b></td>
                            <td><b>{{tt.ratetotal}}</b></td>
                            <td><b>{{tt.disamttotal}}</b></td>
                            <td><b>{{tt.amttotal}}</b></td>
                        </tr>
                        <tr>
                            <td colspan="8"><b>(RUPEES {{amtinwords|uppercase}} ONLY)</b> </td>

                        </tr>

                        <tr>
                            <td colspan="8" style="height:70px;vertical-align:bottom" valign="bottom">
                                <label style="float:left;margin-left:10%">Transport Incharge</label>
                                <label style="float:right;margin-right:10%">Manager</label>

                            </td>
                            <!--<td colspan="3" style="height:70px;vertical-align:bottom" valign="bottom">Manager </td>-->

                        </tr>
                    </tbody>
                </table>



            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" ng-click="rprint();">print</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>