<section class="content">
    <div data-ng-init="loadData()">
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">HR AUTHORISATION</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
                <form class="form-horizontal ng-pristine ng-valid" role="form" name="myForm" novalidate>
                    <div class="row">
                        <div class="col-sm-6">

                            <div class="form-group">
                                <label class="control-label col-sm-4">
                                    Select Group :<span style="color:red;">*</span>
                                </label>
                                <div class="col-sm-8">
                                    <select class="form-control" name="gtname" ng-model="hhhrmgT_Id" ng-disabled="addtocartflag==true" required>
                                        <option value="">--Select--</option>
                                        <option ng-repeat="option in GroupTypelist" value="{{option.hrmgT_Id}}" ng-selected="{{option.Selected===true}}">
                                            {{option.hrmgT_EmployeeGroupType}}
                                        </option>
                                    </select>

                                    <div class="error-messages" ng-if="interacted(myForm.gtname)" ng-messages="myForm.gtname.$error">
                                        <div ng-message="required">Please Select Group</div>
                                    </div>
                                </div>

                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4">
                                    Department :<span style="color:red;">*</span>
                                </label>
                                <div class="col-sm-8">
                                    <select class="form-control" name="depname" data-ng-model="hrhrmDd_Id" ng-disabled="addtocartflag==true" required>
                                        <option value="">--Select--</option>
                                        <option ng-repeat="option in Departmentlist" value="{{option.hrmD_Id}}" ng-selected="{{option.Selected===true}}">
                                            {{option.hrmD_DepartmentName}}
                                        </option>
                                    </select>

                                    <div class="error-messages" ng-if="interacted(myForm.depname)" ng-messages="myForm.depname.$error">
                                        <div ng-message="required">Please Select Group Type</div>
                                    </div>
                                </div>

                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4">
                                    Designation Type :<span style="color:red;">*</span>
                                </label>
                                <div class="col-sm-8">
                                    <select class="form-control" name="designame" data-ng-model="hrchrmdeS_Id" ng-disabled="addtocartflag==true" required>
                                        <option value="">--Select--</option>
                                        <option ng-repeat="option in Designationlist" value="{{option.hrmdeS_Id}}" ng-selected="{{option.Selected===true}}">
                                            {{option.hrmdeS_DesignationName}}
                                        </option>
                                    </select>

                                    <div class="error-messages" ng-if="interacted(myForm.designame)" ng-messages="myForm.designame.$error">
                                        <div ng-message="required">Please Select Department</div>
                                    </div>
                                </div>

                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4">
                                    Grade Type :<span style="color:red;">*</span>
                                </label>
                                <div class="col-sm-8">
                                    <select class="form-control" name="gradename" data-ng-model="hrcchrmG_Id" ng-disabled="addtocartflag==true" required>
                                        <option value="">--Select--</option>
                                        <option ng-repeat="option in gradelist" value="{{option.hrmG_Id}}" ng-selected="{{option.Selected===true}}">
                                            {{option.hrmG_GradeName}}
                                        </option>
                                    </select>
                                    <div class="error-messages" ng-if="interacted(myForm.gradename)" ng-messages="myForm.gradename.$error">
                                        <div ng-message="required">Please Select Department</div>
                                    </div>
                                </div>

                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4">
                                    Activities:<span style="color:red;">*</span>
                                </label>
                                <div class="multiselect col-sm-8" style="width:60%">
                                    <label ng-repeat="Activity in allActivity">
                                        <input type="checkbox" data-ng-model="Activity.Selected" name="activity" ng-disabled="addtocartflag==true || activitydesable==true" ng-required="isOptionsRequired()" ng-true-value="true" ng-false-value="false">
                                        <span class="lbl padding-8">
                                            {{Activity.hR_PR_NAME}}
                                        </span>
                                    </label>
                                </div>
                                <div class="error-messages" ng-if="interacted(myForm.activity)" ng-messages="myForm.activity.$error">
                                    <div ng-message="required" style="padding-left:37%">Please Select Activities</div>
                                </div>
                            </div>

                           

                        </div>

                        <div class="col-sm-6">

                            <div class="form-group">
                                <label class="control-label col-sm-4">Email:</label>
                                <div class="col-sm-8">
                                    <input type="text" name="Email" class="form-control active" ng-pattern="/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/" 
                                           data-ng-model="hremail" maxlength="100" ng-disabled="addtocartflag==true" placeholder="Enter Email" >

                                    <div class="error-messages" ng-if="interacted(myForm.Email)" ng-messages="myForm.Email.$error">
                                        <div ng-message="required">Please Select Activities</div>
                                    </div>
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="control-label col-sm-4">Email CC:</label>
                                <div class="col-sm-8">
                                    <input type="text" name="emailCC" class="form-control active" ng-pattern="/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/" 
                                           ng-model="hremailcc" maxlength="100" ng-disabled="addtocartflag==true" placeholder="Enter Email CC" >

                                    <div class="error-messages" ng-if="interacted(myForm.emailCC)" ng-messages="myForm.emailCC.$error">
                                        <div ng-message="required">Enter Email CC</div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4">
                                    Orderby :<span style="color:red;">*</span>
                                </label>
                                <div class="col-sm-8">
                                    <select class="form-control" name="order" ng-model="httapproveidorder" required>
                                        <option value="">--Select--</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                    </select>
                                    <div class="error-messages" ng-if="interacted(myForm.order)" ng-messages="myForm.order.$error">
                                        <div ng-message="required">Please Select Activities</div>
                                    </div>
                                </div>

                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4">
                                    Approved by :<span style="color:red;">*</span>
                                </label>
                                <div class="col-sm-8">
                                    <select class="form-control" name="Approvename" data-ng-model="id" required>
                                        <option value="">--Select--</option>
                                        <option ng-repeat="option in approve" value="{{option.id}}" ng-selected="{{option.Selected===true}}">
                                            {{option.userName}}
                                        </option>
                                    </select>

                                    <div class="error-messages" ng-if="interacted(myForm.Approvename)" ng-messages="myForm.Approvename.$error">
                                        <div ng-message="required">Please Select UserName</div>
                                    </div>
                                </div>

                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-6">
                                    <input type="checkbox" ng-model="HRPAON_FinalFlg">
                                    <span class="lbl padding-8"></span>
                                    Final Authority
                                </label>

                            </div>
                            <br />
                        </div>
                        <br />
                        <br />
                        <div class="col-sm-12">

                        </div>
                    </div>

                    <hr />
                    <div class="row text-center" ng-hide="hrpaoN_Id>0 && TempData.length>0">
                        <input type="hidden" value="{{HRPA_Id}}" ng-model="hrpA_Id" />
                        <md-button type="button" ng-click="AddToCart()" class="md-raised md-primary">
                            <i class="fa fa-plus" aria-hidden="true"></i> Add To Cart
                        </md-button>
                        <md-button type="button" class="md-raised md-warn" ng-click="cancel()">
                            <i class="fa fa-times" aria-hidden="true"></i> Cancel
                        </md-button>
                    </div>



                    <div class="box box-primary" hidden>
                        <div class="box-header with-border">
                            <h3 class="box-title">Grid View</h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body">
                            <div ui-grid="gridAuth" ui-grid-pagination ui-grid-edit class="grid text-center" id="style-4" style="height: 270px;"></div>
                        </div>
                    </div>


                </form>
            </div>
        </div>
        <!-- /.box-body -->
    </div>

    <div class="box box-primary"  ng-if="TempData.length>0">
        <div class="box-header with-border">
            <h3 class="box-title">Cart Details</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div class="box-body">
            <div class="row">
                <div class="col-sm-12">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <td>Sl.No</td>
                                <th>Activities</th>
                                <th>Approved Person</th>
                                <th>Approved Level</th>
                                <th>Final Flag</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="dd in TempData">
                                <td class="text-center">{{$index+1}}</td>
                                <td class="text-left">{{dd.hR_PR_NAME}}</td>
                                <td class="text-left">{{dd.ApprovalEmpName}}</td>
                                <td class="text-center">{{dd.ApprovalLevelNo}}</td>
                                <td class="text-center">
                                    <span ng-if="dd.ApprovalFinalFlag">
                                        <i class="fa fa-check text-green" title="Final Flag"></i>
                                    </span>
                                    <span ng-if="!dd.ApprovalFinalFlag">
                                        <i class="fa fa-times text-red" title=""></i>
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span ng-click="DeleteTempdata(dd, $index)">
                                        <i class="fa fa-trash text-red" title="Delete Record"></i>
                                    </span>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                </div>
            </div>
            <hr />
            <div class="text-center" ng-if="TempData.length>0">
                <input ng-model="hrpaoN_Id" class="" type="hidden" />
                <md-button type="submit" ng-disabled="form.$invalid" ng-click="SaveData()" class="md-raised md-primary">
                    <i class="fa fa-save" aria-hidden="true"></i> Save
                </md-button>
                <md-button type="button" class="md-raised md-warn" ng-click="cancel()">
                    <i class="fa fa-times" aria-hidden="true"></i> Cancel
                </md-button>
            </div>

        </div>
    </div>

    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">HR AUTHORISATION LIST</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div class="box-body">

            <div class="col-sm-12 text-wrap" style="overflow-x:auto">

                <table class="table table-responsive table-bordered clearfix">
                    <thead>
                        <tr style="background: aliceblue;">
                            <th>
                                <input class="form-control" ng-model="searchValue.hrpA_TypeFlag" type="text" placeholder="Search Type">
                            </th>
                            <th>
                                <input class="form-control" ng-model="searchValue.hrmgT_NAME" type="text" placeholder="Search Group Type">
                            </th>
                            <th>
                                <input class="form-control" ng-model="searchValue.hrmD_NAME" type="text" placeholder="Search Department Name">
                            </th>
                            <th>
                                <input class="form-control" ng-model="searchValue.hrmdeS_NAME" type="text" placeholder="Search Designation Name">
                            </th>
                            <th>
                                <input class="form-control" ng-model="searchValue.HRMG_GradeName" type="text" placeholder="Search Grade Name">
                            </th>
                            <th>
                                <input class="form-control" ng-model="searchValue.ivrmstauL_UserName" type="text" placeholder="Search UserName">
                            </th>
                            <th>
                                <input class="form-control" ng-model="searchValue.hrlP_EmailTo" type="text" placeholder="Search Email">
                            </th>

                        </tr>
                    </thead>
                </table>
                <table class="table table-bordered table-striped mb-0">
                    <thead>
                        <tr>
                            <th>SL.NO.</th>
                            <th>Type</th>
                            <th>Group</th>
                            <th>Departmant</th>
                            <th>Designation</th>
                            <th>Grade</th>
                            <th>Order</th>
                            <th>UserName</th>
                            <th>Final Flag</th>
                            <th>Email</th>
                            <th>Action </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr dir-paginate="user in filterValue=(griddatalist |filter:searchValue) |orderBy:sortKey:sortReverse  |itemsPerPage:itemsPerPage" current-page="currentPage">

                            <td class="text-center">{{itemsPerPage *(currentPage-1)+$index+1}}</td>
                            <td class="text-left">{{user.hrpA_TypeFlag}}</td>
                            <td class="text-left">{{user.hrmgT_NAME}}</td>
                            <td class="text-left">{{user.hrmD_NAME}}</td>
                            <td class="text-left">{{user.hrmdeS_NAME}}</td>
                            <td class="text-left">{{user.HRMG_GradeName}}</td>
                            <td class="text-left">{{user.hrpaoN_SanctionLevelNo}}</td>
                            <td class="text-left">{{user.ivrmstauL_UserName}}</td>
                            <td class="text-center">
                                <span ng-if="user.hrpaoN_FinalFlg==true">
                                    <i class="fa fa-check  text-green"></i>
                                </span>
                                <span ng-if="user.hrpaoN_FinalFlg==false">
                                    <i class="fa fa-times  text-red"></i>
                                </span>
                            </td>
                            <td class="text-left">{{user.hrlP_EmailTo}}</td>
                            <td class="text-center">
                                <span>
                                    <a href="javascript:void(0)" ng-click="getorgvalue(user)" class="text-primary" data-placement="bottom" data-toggle="tooltip" title="Edit">
                                        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                    </a>
                                    |

                                    <span>
                                         <a href="javascript:void(0)" ng-click="deletedataY(user)" data-placement="bottom" data-toggle="tooltip" title="Delete"> <i class="fa fa-trash"></i></a>
                                    </span>
                                </span>
                            </td>


                        </tr>
                    </tbody>
                </table>
                <dir-pagination-controls max-size="10"
                                         direction-links="true"
                                         boundary-links="true">
                </dir-pagination-controls>
            </div>
        </div>
    </div>


</section>