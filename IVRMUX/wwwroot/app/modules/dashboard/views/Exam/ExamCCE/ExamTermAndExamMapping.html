<section class="content">
    <form class="form-horizontal ng-pristine ng-valid" name="myForm" role="form" novalidate>
        <div data-ng-init="BindData()">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Master Term And Exam Mapping</h3>
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Academic Year :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sm" name="yeardd" ng-model="asmaY_Id" ng-change="onchangeyear()" required
                                                ng-disabled="dis==true">
                                            <option value="">Select</option>
                                            <option ng-repeat="year in yearlst" value="{{year.asmaY_Id}}" ng-selected="year.Selected == true">{{year.asmaY_Year}}</option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.yeardd)" ng-messages="myForm.yeardd.$error">
                                            <div ng-message="required">Select Academic Year</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Category :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sm1" name="cat" ng-model="EMCA_Id" ng-change="onchangecategory()" required
                                                ng-disabled="dis==true">
                                            <option value="">Select</option>
                                            <option ng-repeat="year in categorylist" value="{{year.emcA_Id}}" ng-selected="{{year.emcA_Id == EMCA_Id}}">{{year.emcA_CategoryName}}</option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.cat)" ng-messages="myForm.cat.$error">
                                            <div ng-message="required">Select Category</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Term Name :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <input type="text" name="etname" class="form-control" maxlength="100" ng-blur="checktermname()" data-ng-model="ECT_Name"
                                               ng-disabled="dis==true" required />
                                        <div class="error-messages" ng-if="interacted(myForm.etname)" ng-messages="myForm.etname.$error">
                                            <div ng-message="required">Enter Term Name</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label class="control-label col-sm-6">Term Marks :<span style="color:Red">*</span></label>
                                    <div class="col-sm-6">
                                        <input type="text" name="etmarks" class="form-control" maxlength="3" allow-pattern="[0-9]" data-ng-model="ECT_Marks"
                                               ng-disabled="dis==true" required />
                                        <div class="error-messages" ng-if="interacted(myForm.etmarks)" ng-messages="myForm.etmarks.$error">
                                            <div ng-message="required">Enter Term Marks</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label class="control-label col-sm-5">Min Marks :<span style="color:Red">*</span></label>
                                    <div class="col-sm-7">
                                        <input type="text" name="ECT_MinMarks" class="form-control" maxlength="3" allow-pattern="[0-9]" data-ng-model="ECT_MinMarks"
                                               ng-disabled="dis==true" required />
                                        <div class="error-messages" ng-if="interacted(myForm.ECT_MinMarks)" ng-messages="myForm.ECT_MinMarks.$error">
                                            <div ng-message="required">Enter Min Marks</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="control-label col-sm-5">
                                        Term Start Date:
                                        <strong style="color:red;display:inline; font-weight: bolder;">*</strong>
                                    </label>
                                    <div class="col-sm-4 input-group text-right" style="">
                                        <md-datepicker ng-model="ECT_TermStartDate" onkeydown="return false" name="From_Date" id="date1"
                                                       md-placeholder="Enter Date" md-min-date="mindate" md-max-date="maxdate"
                                                       ng-disabled="dis==true" ng-change="onchangedate()" required>
                                        </md-datepicker>
                                    </div>
                                    <div class="error-messages" ng-if="interacted(myForm.From_Date)" ng-messages="myForm.From_Date.$error">
                                        <div ng-message="required" style="margin-left:210px; ">Select Start Date</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="control-label col-sm-5">Term End Date:<strong style="color:red;display:inline; font-weight: bolder;">*</strong>
                                    </label>
                                    <div class="col-sm-4 input-group text-right" style="">
                                        <md-datepicker ng-model="ECT_TermEndDate" onkeydown="return false" name="To_Date" id="date2" ng-change="onchangetodate()"
                                                       md-placeholder="Enter Date" ng-disabled="dis==true" md-min-date="minDatef" md-max-date="maxdate" required>
                                        </md-datepicker>
                                    </div>
                                    <div class="error-messages" ng-if="interacted(myForm.To_Date)" ng-messages="myForm.To_Date.$error">
                                        <div ng-message="required" style="margin-left:210px; ">Select End Date</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Term Publish Date:<strong style="color:red;display:inline; font-weight: bolder;">*</strong>
                                    </label>
                                    <div class="col-sm-4 input-group text-right" style="">
                                        <md-datepicker ng-model="ECT_PublishDate" onkeydown="return false" name="Pu_Date" id="date2"
                                                       md-placeholder="Enter Date"   md-min-date="minpbuDatef" md-max-date="maxdate" required>
                                        </md-datepicker>
                                    </div>
                                    <div class="error-messages" ng-if="interacted(myForm.Pu_Date)" ng-messages="myForm.Pu_Date.$error">
                                        <div ng-message="required" style="margin-left:210px; ">Select Publish Date</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Exam :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sdm" name="emeid" ng-model="EME_Id" required>
                                            <option value="">Select</option>
                                            <option ng-repeat="year in examlist" value="{{year.emE_Id}}" ng-selected="year.Selected == true">{{year.emE_ExamName}}</option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.emeid)" ng-messages="myForm.emeid.$error">
                                            <div ng-message="required">Select Exam</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Grade :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sdm1" name="emgrid" ng-model="EMGR_Id" required>
                                            <option value="">Select</option>
                                            <option ng-repeat="grade in gradelist" value="{{grade.emgR_Id}}" ng-selected="grade.Selected == true">
                                                {{grade.emgR_GradeName}}
                                            </option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.emgrid)" ng-messages="myForm.emgrid.$error">
                                            <div ng-message="required">Select Exam</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <div class="well text-center" ng-init="ECTEX_MarksPerFlag='M'">
                                        <label class="radio-inline">
                                            <input type="radio" name="mrks" value="M" data-ng-model="ECTEX_MarksPerFlag">
                                            <span class="lbl padding-8">Marks</span>
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="perc" value="P" data-ng-model="ECTEX_MarksPerFlag">
                                            <span class="lbl padding-8">Percentage</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Marks / Percentage :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <input type="text" name="et" class="form-control" maxlength="3" allow-pattern="[0-9.]"
                                               ng-pattern="/^[0-9]{0,4}\.?[0-9]{1,2}?$/" data-ng-model="ECTEX_MarksPercentValue" required />
                                        <div class="error-messages" ng-if="interacted(myForm.et)" ng-messages="myForm.et.$error">
                                            <div ng-message="required">Enter Term Marks</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <div class="well text-center">
                                        <div class="checkbox-inline">
                                            <label><input type="checkbox" data-ng-model="ECTEX_RoundOffReqFlg" value="1"><span class="lbl padding-8">Exam Wise Roundoff Required</span></label>
                                        </div>
                                        <div class="checkbox-inline">
                                            <label>
                                                <input type="checkbox" data-ng-model="ECTEX_ConversionReqFlg" value="1"><span class="lbl padding-8">
                                                    Exam Wise Conversion Required
                                                </span>
                                            </label>
                                        </div>
                                        <div class="checkbox-inline">
                                            <label>
                                                <input type="checkbox" data-ng-model="ECTEX_NotApplToTotalFlg" value="1"><span class="lbl padding-8">
                                                    Exam Not Applicable To Total
                                                </span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <div class="text-center">
                                        <input type="hidden" ng-model="ivrmstauL_Id" value="{{ivrmstauL_Id}}" />
                                        <md-button type="submit" class="md-raised md-primary" ng-click="adddetails()">
                                            <i class="fa fa-plus" aria-hidden="true"></i>
                                            Add
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" ng-click="cancel()">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                            Cancel
                                        </md-button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <div class="box box-primary" ng-show="selectedclass.length>0">
        <div class="box-header with-border">
            <h3 class="box-title">Details</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div class="box-body">
            <table class="table table-hover table-responsive table-bordered">
                <thead>
                    <tr>
                        <th>SLNO</th>
                        <th>Exam</th>
                        <th>Marks / Percentage</th>
                        <th>Marks / Percentage Flag</th>
                        <th>Round Of Flag</th>
                        <th>Conversion Of Flag</th>
                        <th>Not Applicable To Total</th>
                        <th colspan="2">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="cls in selectedclass ">
                        <td class="text-center">{{$index+1}}</td>
                        <td class="text-left">{{cls.examname}}</td>
                        <td class="text-center">{{cls.marksorpercentage}}</td>
                        <td class="text-center">{{cls.marksorpercentageflag}}</td>
                        <td class="text-center">
                            <span ng-if="cls.roundofflag==true">
                                <i class="fa fa-check text-green" aria-hidden="true"></i>
                            </span>
                            <span ng-if="cls.roundofflag==false">
                                <i class="fa fa-times text-red" aria-hidden="true"></i>
                            </span>
                        </td>
                        <td class="text-center">
                            <span ng-if="cls.converstionreqflag==true">
                                <i class="fa fa-check text-green" aria-hidden="true"></i>
                            </span>
                            <span ng-if="cls.converstionreqflag==false">
                                <i class="fa fa-times text-red" aria-hidden="true"></i>
                            </span>
                        </td>
                        <td class="text-center">
                            <span ng-if="cls.ECTEX_NotApplToTotalFlg==true">
                                <i class="fa fa-check text-green" aria-hidden="true"></i>
                            </span>
                            <span ng-if="cls.ECTEX_NotApplToTotalFlg!=true">
                                <i class="fa fa-times text-red" aria-hidden="true"></i>
                            </span>
                        </td>
                        <td class="text-center">
                            <span class="">
                                <a href="javascript:void(0)" ng-click="delete(cls,$index);">
                                    <i class="fa fa-trash text-danger"></i>
                                </a>
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="text-center">
                <md-button type="button" class="md-raised md-primary" ng-click="saveddata()">
                    <i class="fa fa-floppy-o" aria-hidden="true"></i>
                    Save
                </md-button>
            </div>
        </div>
    </div>
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Grid View</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div class="box-body">
            <div ui-grid="gridOptions" ui-grid-pagination ui-grid-edit class="grid text-center" id="style-4" style="height: 270px;"></div>
        </div>
    </div>
    <div class="modal fade  modal-large" id="popup" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
                <h4 class="modal-title text-white"> Exam Term Mapping Details </h4>
            </div>
            <div class="modal-content">
                <div class="modal-body">
                    <table class="table table-hover table-responsive table-bordered">
                        <thead>
                            <tr>
                                <th><a href="">SLNO</a></th>
                                <th><a href="">Exam Name</a></th>
                                <th><a href="">Marks / Percentage </a></th>
                                <th><a href=""> Marks / Percentage Value </a></th>
                                <th><a href="">Round Of Flag</a></th>
                                <th><a href="">Conversion Of Flag</a></th>
                                <th><a href="">Not Applicable To Total</a></th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="user in viewdetails" current-page="currentPage">
                                <td class="text-center">{{$index+1}}</td>
                                <td class="text-left">{{ user.emE_ExamName}}</td>
                                <td class="text-center">{{ user.ecteX_MarksPerFlag}}</td>
                                <td class="text-center">{{ user.ecteX_MarksPercentValue}}</td>
                                <td class="text-center">
                                    <span ng-if="user.ecteX_RoundOffReqFlg==true">
                                        <i class="fa fa-check text-green" aria-hidden="true"></i>
                                    </span>
                                    <span ng-if="user.ecteX_RoundOffReqFlg==false">
                                        <i class="fa fa-times text-red" aria-hidden="true"></i>
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span ng-if="user.ecteX_ConversionReqFlg==true">
                                        <i class="fa fa-check text-green" aria-hidden="true"></i>
                                    </span>
                                    <span ng-if="user.ecteX_ConversionReqFlg==false">
                                        <i class="fa fa-times text-red" aria-hidden="true"></i>
                                    </span>
                                </td>      
                                <td class="text-center">
                                    <span ng-if="user.ecteX_NotApplToTotalFlg==true">
                                        <i class="fa fa-check text-green" aria-hidden="true"></i>
                                    </span>
                                    <span ng-if="user.ecteX_NotApplToTotalFlg!=true">
                                        <i class="fa fa-times text-red" aria-hidden="true"></i>
                                    </span>
                                </td>

                                <td class="text-center">
                                    <a ng-if="user.ecteX_ActiveFlag === false" href="javascript:void(0)" style="color:green;" ng-click="deactivesub(user);"> <md-tooltip md-direction="down">Activate Now</md-tooltip> <i class="fa fa-toggle-off text-red" aria-hidden="true"></i></a>
                                    <a href="javascript:void(0)" style="color:red;" ng-if="user.ecteX_ActiveFlag === true" ng-click="deactivesub(user);">  <md-tooltip md-direction="down">Deactivate Now</md-tooltip> <i class="fa fa-toggle-on text-green" aria-hidden="true"></i></a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" ng-click="clearpopupgrid()" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</section>
