<section class="content twocoloumn">
    <form class="form-horizontal ng-pristine ng-valid" name="myForm" role="form" ng-init="BindData()" novalidate>
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">Promotion Setting</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <div class="box-body">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Academic Year :<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" name="year" id="sel1" ng-model="ASMAY_Id" data-ng-change="get_category(ASMAY_Id)" required>
                                    <option value="">--Select--</option>
                                    <option ng-repeat="option in year_list" value="{{option.asmaY_Id}}" ng-selected="{{option.Selected == true}}">
                                        {{option.asmaY_Year}}
                                    </option>
                                </select>
                            </div>
                            <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.year)" ng-messages="myForm.year.$error">
                                <div ng-message="required">Select Academic Year</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-4">Category :<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="sel1" name="category" ng-model="EYC_Id" data-ng-change="get_subjects(EYC_Id)" required>
                                    <option value="">--Select--</option>
                                    <option ng-repeat="option in category_list" value="{{option.eyC_Id}}" ng-selected="{{option.Selected == true}}">
                                        {{option.emcA_CategoryName}}
                                    </option>
                                </select>
                            </div>
                            <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.category)" ng-messages="myForm.category.$error">
                                <div ng-message="required">Select Category</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-4">Grade :<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="sel1" name="grade" ng-model="EMGR_Id" data-ng-change="get_gradename(EMGR_Id)" required>
                                    <option value="">--Select--</option>
                                    <option ng-repeat="option in grade_list" value="{{option.emgR_Id}}" ng-selected="{{option.Selected == true}}">
                                        {{option.emgR_GradeName}}
                                    </option>
                                </select>
                            </div>
                            <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.grade)" ng-messages="myForm.grade.$error">
                                <div ng-message="required">Select Grade</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="well text-center">
                            <label class="checkbox-inline">
                                <input type="checkbox" ng-model="EMP_PassToIndSubjectFlg"><!--ng-true-value="1" ng-false-value="0"-->
                                <span class="lbl padding-8">Pass to Individual Subjects</span>
                            </label>
                            <label class="checkbox-inline">
                                <input type="checkbox" ng-model="EMP_PassToOverallFlag"><!--ng-true-value="1" ng-false-value="0"-->
                                <span class="lbl padding-8">Pass to OverAll Subjects</span>
                            </label>

                        </div>
                        <div class="well text-center">
                            <label class="radio-inline">
                                <input type="radio" ng-model="EMP_MarksPerFlg" value="M" ng-click="select_subjs()">
                                <span class="lbl padding-8">Marks</span>
                            </label>
                            <label class="radio-inline">
                                <input type="radio" ng-model="EMP_MarksPerFlg" value="P" ng-click="select_subjs()">
                                <span class="lbl padding-8">Percentage</span>
                            </label>
                            <label class="radio-inline">
                                <input type="radio" ng-model="EMP_MarksPerFlg" value="T" ng-click="select_subjs()">
                                <span class="lbl padding-8">Total</span>
                            </label>
                            <label class="radio-inline">
                                <input type="radio" ng-model="EMP_MarksPerFlg" value="F" ng-click="select_subjs()">
                                <span class="lbl padding-8">Final Exam</span>
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-4">
                                <input type="checkbox" name="fhdcbx" data-ng-model="EMP_BestOfApplicableFlg">
                                <span class="lbl padding-8">Best Applicable</span>
                            </label>
                            <div class="col-sm-8">
                                <div class="form-group">
                                    <label class="control-label col-sm-3">Best Off :</label>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="text" placeholder="Enter Best Off" maxlength="2" allow-pattern="[0-9]"
                                               data-ng-model="EMP_BestOf" value="" name="EYCE_BestOfsdasd" ng-required="EMP_BestOfApplicableFlg"
                                               ng-disabled="!EMP_BestOfApplicableFlg" />
                                    </div>
                                    <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.EYCE_BestOfsdasd)"
                                         ng-messages="myForm.EYCE_BestOfsdasd.$error">
                                        <div ng-message="required">Enter Best Off</div>
                                    </div>
                                </div>
                            </div>
                        </div>                     
                    </div>
                </div>
                <div class="row">
                    <div ng-show="EMP_MarksPerFlg!='F'" class="col-sm-12">
                        <table class="table table-hover table-responsive table-bordered" ng-show="select_cat">
                            <thead>
                                <tr>
                                    <th><a href="" ng-click="order('sno')">SLNO</a></th>
                                    <th>
                                        <label>
                                            <input type="checkbox" value="" ng-click="toggleAll()" ng-model="all">
                                            <span class="lbl padding-8"></span>
                                        </label>
                                    </th>
                                    <th><a href="" ng-click="order('Name')">Subject Name(Code)</a></th>
                                    <th><a href="" ng-click="order('StudentDue')">Max.Marks</a>
                                    <input type="text" ng-model="maxmarks" ng-change="onchangemaxmarks(maxmarks)" class="form-control" /></th>
                                    <th><a href="" ng-click="order('InstitutionDue')">Min.Marks</a>
                                        <input type="text" ng-model="minmarks" ng-disabled="maxmarks==null || maxmarks==''" 
                                               ng-change="onchangeminmarks(minmarks)" class="form-control" />
                                    </th>
                                    <th><a href="" ng-click="order('StudentDue')">Convert Marks For</a>
                                        <input type="text" ng-model="maxentrymarks" ng-disabled="maxmarks==null || maxmarks==''"  
                                               ng-change="onchangemaxentrymarks(maxentrymarks)" class="form-control" />
                                    </th>
                                    <th><a href="" ng-click="order('InstitutionDue')">Appl to Result</a></th>
                                    <th><a href="" ng-click="order('InstitutionDue')">Grade</a></th>
                                    <th ng-if="EMP_MarksPerFlg=='M'|| EMP_MarksPerFlg=='P'">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="user in subject_list | orderBy:predicate:default | filter:paginate| filter:search" ng-class-odd="'odd'">
                                    <td class="text-center">{{ $index + 1}}</td>
                                    <td class="text-center">
                                        <label>
                                            <input type="checkbox" name="adcheckt" value="{{user.ismS_Id}}" ng-model="user.checkedvalue" ng-change="optionToggled()">
                                            <span class="lbl padding-8"></span>
                                        </label>
                                    </td>
                                    <td class="text-left">
                                        {{user.ismS_SubjectName}}({{user.ismS_SubjectCode}})
                                    </td>
                                    <td class="text-center">
                                        <input class="form-control" type="text" placeholder="Enter Marks..." ng-pattern="/^[0-9]{0,4}\.?[0-9]{1,2}?$/" allow-pattern="[0-9.]" data-ng-model="user.EMPS_MaxMarks" value="" name="t1_{{user.ismS_Id}}" ng-blur="valid_max(user.EMPS_MaxMarks,user)" ng-required="user.checkedvalue && EMP_MarksPerFlg!='F'" />
                                        <div class="error-messages" ng-if="interacted(myForm['t1_'+user.ismS_Id])" ng-messages="myForm['t1_'+user.ismS_Id].$error">
                                            <div ng-message="pattern">Enter valid Format[For Example 100.00,99.97,......]</div>
                                            <div ng-message="required">Enter Max Marks</div>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <input class="form-control" type="text" placeholder="Enter Marks..." ng-pattern="/^[0-9]{0,4}\.?[0-9]{1,2}?$/" allow-pattern="[0-9.]" data-ng-model="user.EMPS_MinMarks" value="" name="t2_{{user.ismS_Id}}"
                                               ng-required="user.checkedvalue && EMP_MarksPerFlg!='F'" ng-blur="valid_min(user.EMPS_MinMarks,user)" />
                                        <!---->
                                        <div class="error-messages" ng-if="interacted(myForm['t2_'+user.ismS_Id])" ng-messages="myForm['t2_'+user.ismS_Id].$error">
                                            <div ng-message="pattern">Enter valid Format[For Example 100.00,99.97,......]</div>
                                            <div ng-message="required">Enter Min Marks</div>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <input class="form-control" type="text" placeholder="Enter Marks..." ng-pattern="/^[0-9]{0,4}\.?[0-9]{1,2}?$/" allow-pattern="[0-9.]" data-ng-model="user.EMPS_ConvertForMarks" value="" ng-blur="valid_max_convert(user.EMPS_ConvertForMarks,user)" name="t3_{{user.ismS_Id}}" ng-required="user.checkedvalue && EMP_MarksPerFlg!='F'" />
                                        <div class="error-messages" ng-if="interacted(myForm['t3_'+user.ismS_Id])" ng-messages="myForm['t3_'+user.ismS_Id].$error">
                                            <div ng-message="pattern">Enter valid Format[For Example  100.00,99.97,......]</div>
                                            <div ng-message="required">Enter Max Marks Entry</div>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <label>
                                            <input type="checkbox" name="adcheckt" ng-model="user.EMPS_AppToResultFlg">
                                            <span class="lbl padding-8"></span>
                                        </label>
                                    </td>
                                    <td class="text-center">
                                        <select class="form-control" id="sel1" name="grade_{{user.ismS_Id}}" ng-model="user.EMGR_Id"
                                                ng-required="user.checkedvalue && EMP_MarksPerFlg!='F'">
                                            <option value="">--Select--</option>
                                            <option ng-repeat="option in grade_list" value="{{option.emgR_Id}}" ng-selected="{{option.emgR_Id == user.emgR_Id}}">
                                                {{option.emgR_GradeName}} 
                                            </option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm['grade_'+user.ismS_Id])"
                                             ng-messages="myForm['grade_'+user.ismS_Id].$error">
                                            <div ng-message="required">Select Grade</div>
                                        </div>
                                    </td>
                                    <td ng-if="EMP_MarksPerFlg=='M'|| EMP_MarksPerFlg=='P'">
                                        <a href="javascript:void(0)" data-toggle="modal" data-backdrop="static"
                                           ng-click="AddGroupDetails(user,user.ismS_SubjectName,user.ismS_SubjectCode,$index);">
                                            <i class="fa fa-eye text-purple"></i>
                                        </a>
                                    </td>
                                    <td hidden="hidden">{{user.ISMS_Id}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="text-center">
                        <input type="hidden" value="{{EMP_Id}}" ng-model="EMP_Id" />
                        <input type="hidden" value="{{EMPS_Id}}" ng-model="EMPS_Id" />
                        <md-button type="button" class="md-raised md-primary" ng-disabled="form.$invalid" id="save-btn" ng-click="saveddata()">
                            <i class="fa fa-floppy-o" aria-hidden="true"></i>
                            Save
                        </md-button>
                        <md-button type="button" class="md-raised md-warn" ng-click="clear()">
                            <i class="fa fa-times" aria-hidden="true"></i>
                            Cancel
                        </md-button>
                        <!--<md-button type="button" class="md-raised md-primary" data-toggle="modal" data-target="#myModal" ng-show="select_cat">
                            <i class="fa fa-sort" aria-hidden="true"></i>Set Order
                        </md-button>-->
                    </div>
                </div>
            </div>
        </div>
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">Promotion Settings Details</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
                <div class="row">
                    <div class="col-sm-4 pull-right">
                        <div class="form-group">
                            <div class="input-group">
                                <input class="form-control" ng-model="searchValue.$" type="text" placeholder="search here...">
                                <span class="input-group-addon">
                                    <i class="fa fa-search"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="overflow-x:scroll !important">
                    <div class="row">
                        <div class="col-sm-12">

                            <table class="table table-responsive table-bordered clearfix">
                                <thead>
                                    <tr style="background: aliceblue;">
                                        <th>
                                            <input class="form-control" ng-model="searchValue.asmaY_Year" type="text" placeholder="Search Year">
                                        </th>
                                        <th>
                                            <input class="form-control" ng-model="searchValue.emcA_CategoryName" type="text" placeholder="Search Category">
                                        </th>
                                        <th>
                                            <input class="form-control" ng-model="searchValue.emgR_GradeName" type="text" placeholder="Search Grade">
                                        </th>
                                        <th>
                                            <input class="form-control" ng-model="searchValue.emP_MarksPerFlg" type="text" placeholder="Search Promotion Type">
                                        </th>
                                    </tr>
                                </thead>
                            </table>



                            <table class="table table-bordered table-responsive">
                                <thead>
                                    <tr>
                                        <th>Sl.No</th>
                                        <th>Academic Year</th>
                                        <th>Category</th>
                                        <th>Grade Name</th>
                                        <th>Promotion Type</th>
                                        <th>Pass To Individual</th>
                                        <th>Pass To OverAll</th>
                                        <th>Best Applicable</th>
                                        <th>Best Off</th>
                                        <th>Subject Order</th>
                                        <th style="width: 10% !important;">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr dir-paginate="user in filterValue1=(promotion_details_list |filter:searchValue) |orderBy:sortKey:sortReverse |itemsPerPage:itemsPerPage" current-page="currentPage">
                                        <td class="text-center">{{itemsPerPage *(currentPage-1)+$index+1}}</td>
                                        <td class="text-center">{{user.asmaY_Year}}</td>
                                        <td class="text-left">{{user.emcA_CategoryName}}</td>
                                        <td class="text-left">{{user.emgR_GradeName}}</td>
                                        <td class="text-left">{{user.emP_MarksPerFlg}}</td>
                                        <td class="text-center">
                                            <a ng-if="user.emP_PassToIndSubjectFlg == true" href="javascript:void(0)"> <i class="fa fa-check  text-green"></i></a>
                                            <a ng-if="user.emP_PassToIndSubjectFlg == false" href="javascript:void(0)"> <i class="fa fa-times  text-red"></i></i></a>
                                        </td>
                                        <td class="text-center">
                                            <a ng-if="user.emP_PassToOverallFlag == true" href="javascript:void(0)"> <i class="fa fa-check  text-green"></i></a>
                                            <a ng-if="user.emP_PassToOverallFlag == false" href="javascript:void(0)"> <i class="fa fa-times  text-red"></i></i></a>
                                        </td>
                                        <td class="text-center">
                                            <a ng-if="user.emP_BestOfApplicableFlg == true" href="javascript:void(0)"> <i class="fa fa-check  text-green"></i></a>
                                            <a ng-if="user.emP_BestOfApplicableFlg == false" href="javascript:void(0)"> <i class="fa fa-times  text-red"></i></i></a>
                                        </td>
                                        <td class="text-center">{{user.emP_BestOf}}</td>
                                        <td class="text-center">
                                            <span ng-if="user.emP_MarksPerFlg!='Final Exam'">
                                                <a href="javascript:void(0)" data-toggle="modal" data-target="#myModal" data-backdrop="static"
                                                   ng-click="SetSubjectOrder(user);"><i class="fa fa-eye text-purple"></i></a>
                                            </span>
                                        </td>
                                        <td class="text-left">
                                            <span ng-if="user.emP_MarksPerFlg!='Final Exam'">
                                                <a href="javascript:void(0)" data-toggle="modal" data-target="#popup" data-backdrop="static"
                                                   ng-click="viewrecordspopup(user);"><i class="fa fa-eye text-purple"></i></a>
                                                |
                                            </span>
                                            <a href="javascript:void(0)" ng-click="getorgvalue(user);">
                                                <md-tooltip md-direction="down">Edit</md-tooltip><i class="fa fa-pencil-square-o"></i>
                                            </a>
                                            |
                                            <span>
                                                <a ng-if="user.emP_ActiveFlag === false" href="javascript:void(0)" style="color:green;" ng-click="deactive(user);">
                                                    <md-tooltip md-direction="down">Activate Now</md-tooltip> <i class="fa fa-toggle-off text-red" aria-hidden="true"></i>
                                                </a>

                                                <a ng-if="user.emP_ActiveFlag === true" href="javascript:void(0)" style="color:red;" ng-click="deactive(user);">
                                                    <md-tooltip md-direction="down">Deactivate Now</md-tooltip>
                                                    <i class="fa fa-toggle-on text-green" aria-hidden="true"></i>
                                                </a>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <dir-pagination-controls max-size="10"
                                                     direction-links="true"
                                                     boundary-links="true">
                            </dir-pagination-controls>
                        </div>
                    </div>
                </div>


                <!--<div ui-grid="gridOptions" ui-grid-pagination ui-grid-edit class="grid text-center" id="style-4" style="height: 270px;"></div>-->
            </div>
        </div>
    </form>
</section>

<div class="modal fade modal-medium" id="map_groups" role="dialog">
    <div class="modal-dialog modal-lg" style="width: 87% !important;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
            <h4 class="modal-title text-white">"{{subjectname}}" Groups Mapping</h4>
        </div>
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-body">
                <div ng-form="myForm1">
                    <div class="row">
                        <div class="col-sm-6">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Sl.No</th>
                                        <th></th>
                                        <th>Exam Name</th>
                                        <th>Converted Marks</th>
                                        <th>Conversion Required</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="exam in exam_list">
                                        <td class="text-center">{{$index+1}}</td>
                                        <td class="text-center">
                                            <label>
                                                <input type="checkbox" name="adchecktd" value="{{exam.emE_Id}}"
                                                       ng-model="exam.checked" ng-change="clr_max_bst()" ng-required="isOptionsRequired()">
                                                <span class="lbl padding-8"></span>
                                            </label>
                                        </td>
                                        <td class="text-left">{{exam.emE_ExamName}}</td>
                                        <td class="text-center">
                                            <input type="text" class="form-control" ng-model="exam.ForMaxMarkrs" name="exammarks{{exam.emE_Id}}"
                                                   ng-pattern="/^[0-9]{0,4}\.?[0-9]{1,2}?$/" allow-pattern="[0-9.]" ng-required="exam.checked"
                                                   ng-disabled="!exam.checked" ng-change="onchangeexammaxmarks()" />
                                            <div class="error-messages" ng-if="interacted1(myForm1['exammarks'+exam.emE_Id])"
                                                 ng-messages="myForm1['exammarks'+exam.emE_Id].$error">
                                                <div ng-message="pattern">Enter valid Format[For Example 100.00,99.97,......]</div>
                                                <div ng-message="required">Enter Marks</div>
                                            </div>
                                        </td>
                                        <td class="text-center">
                                            <label>
                                                <input ng-disabled="EMP_MarksPerFlg=='P'" type="checkbox" name="adcheckt" value="{{exam.emE_Id}}"
                                                       ng-model="exam.ConvertionReqOrNot">
                                                <span class="lbl padding-8"></span>
                                            </label>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <div class="error-messages" ng-if="interacted1(myForm1.adchecktd)" ng-messages="myForm1.adchecktd.$error">
                                <div ng-message="required" style="text-align:center;font-family:'Times New Roman';font-size:medium;"><strong>Please Select Atleast One Exam</strong></div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-6">Marks :<span style="color:red;" ng-show="EMP_MarksPerFlg=='M'">*</span></label>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="text" placeholder="Enter Marks..." ng-pattern="/^[0-9]{0,4}\.?[0-9]{1,2}?$/" allow-pattern="[0-9.]" data-ng-model="EMPSG_MarksValue" value="" ng-change="valid_marksval(EMPSG_MarksValue)" name="marks_val" ng-required="EMP_MarksPerFlg=='M'" ng-disabled="EMP_MarksPerFlg!='M'" />
                                        <div class="error-messages" ng-if="interacted1(myForm1.marks_val)" ng-messages="myForm1.marks_val.$error">
                                            <div ng-message="pattern">Enter valid Format[For Example 100.00,99.97,......]</div>
                                            <div ng-message="required">Enter  Marks</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-6">Percentage :<span style="color:red;" ng-show="EMP_MarksPerFlg=='P'">*</span></label>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="text" placeholder="Enter Percentage..." ng-pattern="/^[0-9]{0,4}\.?[0-9]{1,2}?$/" allow-pattern="[0-9.]" data-ng-model="EMPSG_PercentValue" value="" name="percentage_val" ng-change="valid_per(EMPSG_PercentValue)" ng-required="EMP_MarksPerFlg=='P'" ng-disabled="EMP_MarksPerFlg!='P'" />
                                        <div class="error-messages" ng-if="interacted1(myForm1.percentage_val)" ng-messages="myForm1.percentage_val.$error">
                                            <div ng-message="pattern">Enter valid Format[For Example 100.00,99.97,......]</div>
                                            <div ng-message="required">Enter Percentage</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-6">Group Name :<span style="color:red;">*</span></label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" maxlength="30" data-ng-model="EMPSG_GroupName" name="grp_name" 
                                               ng-blur="check_grp_name(EMPSG_GroupName)" ng-required="EMP_MarksPerFlg!='T' && EMP_MarksPerFlg!='F'"
                                               allow-pattern="(\s|[A-Z0-9])">
                                        <div class="error-messages" ng-if="interacted1(myForm1.grp_name)" ng-messages="myForm1.grp_name.$error">
                                            <div ng-message="required">Enter Group Name</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-6">Group Order :<span style="color:red;">*</span></label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" maxlength="2" allow-pattern="[0-9]"
                                               data-ng-model="EMPSG_Order" name="grp_name_order"
                                               ng-blur="check_grp_name_order(EMPSG_Order)" ng-required="EMP_MarksPerFlg!='T' && EMP_MarksPerFlg!='F'">
                                        <div class="error-messages" ng-if="interacted1(myForm1.grp_name_order)" ng-messages="myForm1.grp_name_order.$error">
                                            <div ng-message="required">Enter Group Order</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-6">Max Off :</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" data-ng-model="EMPSG_MaxOff" name="max_of" ng-required="EMP_MarksPerFlg!='T' && EMP_MarksPerFlg!='F'" ng-disabled="true">
                                        <div class="error-messages" ng-if="interacted1(myForm1.max_of)" ng-messages="myForm1.max_of.$error">
                                            <div ng-message="required">Enter Max Off</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-6">Best Off :<span style="color:red;">*</span></label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" data-ng-model="EMPSG_BestOff" name="best_of" allow-pattern="[0-9]" ng-change="valid_bestoff(EMPSG_BestOff)" ng-required="EMP_MarksPerFlg!='T' && EMP_MarksPerFlg!='F'">
                                        <div class="error-messages" ng-if="interacted1(myForm1.best_of)" ng-messages="myForm1.best_of.$error">
                                            <div ng-message="required">Enter Best Off</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-6">Display Name:<span style="color:red;">*</span></label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" data-ng-model="EMPSG_DisplayName" name="dis_name" ng-blur="check_dis_name(EMPSG_DisplayName)" allow-pattern="(\s|[A-Z0-9])" ng-required="EMP_MarksPerFlg!='T' && EMP_MarksPerFlg!='F'">
                                        <div class="error-messages" ng-if="interacted1(myForm1.dis_name)" ng-messages="myForm1.dis_name.$error">
                                            <div ng-message="required">Enter Display Name</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-12">
                                        <input type="checkbox" name="fhdcbx" data-ng-model="EMPSG_RoundOffFlag">
                                        <span class="lbl padding-8">Round Off Required</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="" ng-show="EMP_MarksPerFlg!='T' && EMP_MarksPerFlg!='F'">
                        <div class="text-center">
                            <input type="hidden" ng-model="EMPSG_Id" value="{{EMPSG_Id}}" />
                            <md-button type="button" class="md-raised md-primary" id="save-btn" ng-click="saveddata1()">
                                <i class="fa fa-plus" aria-hidden="true"></i>
                                ADD
                            </md-button>
                            <md-button type="button" class="md-raised md-warn" ng-click="clear1()">
                                <i class="fa fa-times" aria-hidden="true"></i>
                                Clear
                            </md-button>
                            <!--<md-button type="button" class="md-raised md-primary" data-toggle="modal" data-target="#myModal" ng-show="select_cat">
                                <i class="fa fa-sort" aria-hidden="true"></i>Set Order
                            </md-button>-->
                        </div>
                    </div>

                    <div class="" ng-show="EMP_MarksPerFlg!='T' && EMP_MarksPerFlg!='F' && group_cnt!=0">
                        <div class="text-center">
                            <table class="table table-hover table-responsive table-bordered">
                                <thead>
                                    <tr>
                                        <th><a href="" ng-click="sort('ASMCL_ClassName')">SLNO</a></th>
                                        <th>
                                            <label>
                                                <input type="checkbox" value="" ng-click="toggleAll1()" ng-model="all1">
                                                <span class="lbl padding-8"></span>
                                            </label>
                                        </th>
                                        <th><a href="" ng-click="sort('ASMCL_ClassName')">Group Name</a></th>
                                        <th><a href="" ng-click="order('StudentDue')">Display Name</a></th>
                                        <th><a href="" ng-click="order('InstitutionDue')">Percentage</a></th>
                                        <th><a href="" ng-click="sort('ASMC_SectionName')">Marks</a></th>
                                        <th><a href="" ng-click="sort('ASMCL_ClassName')">Max. Off</a></th>
                                        <th><a href="" ng-click="sort('ASMCL_ClassName')">Best. Off</a></th>
                                        <th><a href="" ng-click="sort('ASMCL_ClassName')">Order</a></th>
                                        <th><a href="" ng-click="sort('ASMCL_ClassName')">View Exams</a></th>
                                        <th><a href="" ng-click="sort('ASMCL_ClassName')">Round Off Flag</a></th>
                                        <th><a href="" ng-click="sort('ASMCL_ClassName')">Remove</a></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="user in group_list_subwise" current-page="currentPage">
                                        <td>{{$index+1}}</td>
                                        <td class="text-center">
                                            <label>
                                                <input type="checkbox" name="adcheckt" value="{{$index}}" ng-model="user.checkedvalue" ng-change="optionToggled1()">
                                                <span class="lbl padding-8"></span>
                                            </label>
                                        </td>
                                        <td class="text-left">{{ user.EMPSG_GroupName}}</td>
                                        <td class="text-left">{{user.EMPSG_DisplayName}}</td>
                                        <td class="text-center">{{user.EMPSG_PercentValue}}</td>
                                        <td class="text-center">{{user.EMPSG_MarksValue}}</td>
                                        <td class="text-center">{{user.EMPSG_MaxOff}}</td>
                                        <td class="text-center">{{user.EMPSG_BestOff}}</td>
                                        <td class="text-center">{{user.EMPSG_Order}}</td>
                                        <td class="text-center">
                                            <div><a href="javascript:void(0)" data-toggle="modal" data-target="#popup1" data-backdrop="static" ng-click="view_exams($index);"> <i class="fa fa-eye text-purple"></i></a></div>
                                        </td>
                                        <td class="text-center">
                                            <span>
                                                <a ng-if="user.EMPSG_RoundOffFlag" href="javascript:void(0)"><i class="fa fa-check text-green"></i></a>
                                                <a ng-if="!user.EMPSG_RoundOffFlag" href="javascript:void(0)"><i class="fa fa-times text-red"></i></a>
                                            </span>
                                        </td>
                                        <td class="text-left">

                                            <span class="">
                                                <a href="javascript:void(0)" ng-click="EditGroupMapping(user,$index);">
                                                    <i class="fa fa-pencil-square-o text-primary"></i><md-tooltip md-direction="down">Edit</md-tooltip>
                                                </a>
                                            </span>
                                            |
                                            <span class="">
                                                <a href="javascript:void(0)" ng-click="delete(user,$index);">
                                                    <i class="fa fa-trash text-danger"></i><md-tooltip md-direction="down">Delete</md-tooltip>
                                                </a>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="row" ng-if="group_list_subwise.length>0">
                    <div class="text-center">
                        <input type="hidden" ng-model="EMPSG_Id" value="{{EMPSG_Id}}" />
                        <md-button type="button" class="md-raised md-primary" id="save-btn" ng-click="AddToCart()">
                            <i class="fa fa-plus" aria-hidden="true"></i>
                            ADD & Close
                        </md-button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="clearpopupgrid_subgrps()" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade modal-small" id="popup1" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
            <h4 class="modal-title text-white">{{groupName}} Group Mapped Exams</h4>
        </div>
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-body">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Sl.No</th>
                            <th>Exam Name</th>
                            <th>Marks</th>
                            <th>Conversion Req Or Not</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="cl1 in view_exam_details">
                            <td class="text-center">{{$index+1}}</td>
                            <td class="text-left">{{cl1.emE_ExamName}}</td>
                            <td class="text-center">{{cl1.EMPSGE_ForMaxMarkrs}}</td>
                            <td class="text-center">
                                <span>
                                    <a href="" ng-if="cl1.EMPSGE_ConvertionReqOrNot">
                                        <i class="fa fa-check text-green" title="Conversion Required"></i>
                                    </a>
                                    <a href="" ng-if="!cl1.EMPSGE_ConvertionReqOrNot">
                                        <i class="fa fa-times text-red" title="Conversion Not Required"></i>
                                    </a>
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="clear_exams()" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade modal-medium" id="popup" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
            <h4 class="modal-title text-white">"{{Category_Name}}" Mapped Subjects</h4>
        </div>
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-body">
                <table class="table table-hover table-responsive table-bordered">
                    <thead>
                        <tr>
                            <th><a href="" ng-click="sort('emgS_Id')">SLNO</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Subject Name</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Grade Name</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Max. Marks</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Min. Marks</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Converted  Marks For</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Apl. Result</a></th>
                            <th><a href="" ng-click="sort('')">Actions</a></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="user in viewrecordspopupdisplay" current-page="currentPage">
                            <td class="text-center">{{$index+1}}</td>
                            <td class="text-left">{{ user.ismS_SubjectName}}</td>
                            <td class="text-left">{{ user.emgR_GradeName}}</td>
                            <td class="text-center">{{ user.empS_MaxMarks}}</td>
                            <td class="text-center">{{ user.empS_MinMarks}}</td>
                            <td class="text-center">{{ user.empS_ConvertForMarks}}</td>
                            <td class="text-center" ng-if="user.empS_AppToResultFlg"><i class="fa fa-check  text-green"></i></td>
                            <td class="text-center" ng-if="!user.empS_AppToResultFlg"><i class="fa fa-times  text-red"></i></td>
                            <td width="5%">
                                <div class="grid-action-cell">
                                    <a href="javascript:void(0)" ng-if="emP_MarksPerFlgtemp!='Total'" data-toggle="modal" data-target="#popup_subgrps" data-backdrop="static"
                                       ng-click="viewrecordspopup_subgrps(user);"><i class="fa fa-eye text-purple"></i></a>  &nbsp;
                                    <a ng-if="!user.empS_ActiveFlag" href="javascript:void(0)" style="color:green;" ng-click="deactive_sub(user);">  <i class="fa fa-toggle-off text-red" aria-hidden="true"></i><md-tooltip md-direction="down" md-z-index="1151">Activate Now</md-tooltip></a>
                                    <a ng-if="user.empS_ActiveFlag" href="javascript:void(0)" style="color:red;" ng-click="deactive_sub(user);">  <i class="fa fa-toggle-on text-green" aria-hidden="true"></i><md-tooltip md-direction="down" md-z-index="1151">Deactivate Now</md-tooltip> </a>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="clearpopupgrid()" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade modal-medium" id="popup_subgrps" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
            <h4 class="modal-title text-white">"{{Category_Name}}-{{pro_Subject}}" Mapped Groups</h4>
        </div>
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-body">
                <table class="table table-hover table-responsive table-bordered">
                    <thead>
                        <tr>
                            <th><a href="" ng-click="sort('emgS_Id')">SLNO</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Group Name</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Display Name</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Percentage</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Marks</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Max Off</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Best Off</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Round Off Flag</a></th>
                            <th><a href="" ng-click="sort('')">Actions</a></th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr ng-repeat="user in viewrecordspopup_subgrps_list" current-page="currentPage">
                            <td class="text-center">{{$index+1}}</td>
                            <td class="text-left">{{ user.empsG_GroupName}}</td>
                            <td class="text-left">{{ user.empsG_DisplayName}}</td>
                            <td class="text-center">{{ user.empsG_PercentValue}}</td>
                            <td class="text-center">{{ user.empsG_MarksValue}}</td>
                            <td class="text-center">{{ user.empsG_MaxOff}}</td>
                            <td class="text-center">{{ user.empsG_BestOff}}</td>
                            <td class="text-center">
                                <span>
                                    <a ng-if="user.empsG_RoundOffFlag">
                                        <i class="fa fa-check text-green"></i>
                                    </a>
                                    <a ng-if="!user.empsG_RoundOffFlag">
                                        <i class="fa fa-times text-red"></i>
                                    </a>
                                </span>
                            </td>
                            <td width="5%">
                                <div class="grid-action-cell">
                                    <a href="javascript:void(0)" data-toggle="modal" data-target="#popup_subgrps_exms" data-backdrop="static"
                                       ng-click="viewrecordspopup_sub_grp_exms(user);"><i class="fa fa-eye text-purple"></i></a>  &nbsp;
                                    <a ng-if="!user.empsG_ActiveFlag" href="javascript:void(0)" style="color:green;" ng-click="deactive_sub_grp(user);">  <i class="fa fa-toggle-off text-red" aria-hidden="true"></i><md-tooltip md-direction="down" md-z-index="1151">Activate Now</md-tooltip></a>
                                    <a ng-if="user.empsG_ActiveFlag" href="javascript:void(0)" style="color:red;" ng-click="deactive_sub_grp(user);">  <i class="fa fa-toggle-on text-green" aria-hidden="true"></i><md-tooltip md-direction="down" md-z-index="1151">Deactivate Now</md-tooltip> </a>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="clearpopupgrid_subgrps()" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade modal-medium" id="popup_subgrps_exms" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
            <h4 class="modal-title text-white">"{{sub_groupName}}" Group Mapped Exams</h4><!--{{Category_Name}}-{{pro_Subject}}--->
        </div>
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-body">
                <table class="table table-hover table-responsive table-bordered">
                    <thead>
                        <tr>
                            <th><a href="" ng-click="sort('emgS_Id')">SLNO</a></th>                            
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Exam Name</a></th>
                            <th><a href="" ng-click="sort('ismS_SubjectName')">Exam Code</a></th>
                            <th><a href="" ng-click="sort('empsgE_ForMaxMarkrs')">Marks/Percentage</a></th>                           
                            <th><a href="" ng-click="sort('empsgE_ConvertionReqOrNot')">Conversion Req Or Not</a></th>
                            <th><a href="" ng-click="sort('')">Actions</a></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="user in viewrecordspopup_subgrps_exms" current-page="currentPage">
                            <td class="text-center">{{$index+1}}</td>
                            <td class="text-left">{{ user.emE_ExamName}}</td>
                            <td class="text-left">{{ user.emE_ExamCode}}</td>
                            <td class="text-left">{{ user.empsgE_ForMaxMarkrs}}</td>
                            <td class="text-center">
                                <span>
                                    <a ng-if="user.empsgE_ConvertionReqOrNot">
                                        <i class="fa fa-check text-green" title="Conversion Required"></i>
                                    </a>
                                    <a ng-if="!user.empsgE_ConvertionReqOrNot">
                                        <i class="fa fa-times text-red" title="Conversion Not Required"></i>
                                    </a>
                                </span>
                            </td>
                            <td width="5%">
                                <div class="grid-action-cell">
                                    <a ng-if="!user.empsgE_ActiveFlg" href="javascript:void(0)" style="color:green;" ng-click="deactive_sub_grp_exm(user);">  <i class="fa fa-toggle-off text-red" aria-hidden="true"></i><md-tooltip md-direction="down" md-z-index="1151">Activate Now</md-tooltip></a>
                                    <a ng-if="user.empsgE_ActiveFlg" href="javascript:void(0)" style="color:red;" ng-click="deactive_sub_grp_exm(user);">  <i class="fa fa-toggle-on text-green" aria-hidden="true"></i><md-tooltip md-direction="down" md-z-index="1151">Deactivate Now</md-tooltip> </a>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="clearpopupgrid_subgrps_exms()" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade modal-medium" id="myModal" role="dialog">
    <div class="modal-dialog modal-md">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
                <h4 class="modal-title  text-white">Subject Order Setting</h4>
            </div>
            <div class="modal-body">
                <table class="table table-hover table-responsive table-bordered">
                    <thead>
                        <tr>
                            <th class="text-center">SLNO</th>
                            <th class="text-center">Subject Name</th>
                            <th class="text-center">Subject Code</th>
                            <th class="text-center">Subject Order</th>
                        </tr>
                    </thead>
                    <tbody ui-sortable="sortableOptions" ng-model="subject_list_temp">
                        <tr ng-repeat="user in subject_list_temp">
                            <td class="handle">{{$index+1}}</td>
                            <td class="handle text-left">{{ user.ismS_SubjectName}}</td>
                            <td class="handle text-left">{{ user.ismS_SubjectCode}}</td>
                            <td class="handle">{{ user.empS_SubjOrder}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="SaveSubjectOrder(subject_list_temp);">Save</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button><!--ng-click="get_subjects(EYC_Id)"-->
            </div>
        </div>
    </div>
</div>