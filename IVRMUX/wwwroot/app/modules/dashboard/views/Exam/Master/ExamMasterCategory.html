<!--<style>
    input[type="file"] {
        display: none !important;
    }
</style>
<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400,700" rel="stylesheet" type="text/css">-->

<section class="content">
    <div data-ng-init="loadData()">
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">  Category</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
                <div ng-cloak>
                    <md-content>
                        <md-tabs md-dynamic-height md-border-bottom>
                            <md-tab label="Master Category">
                                <!--ng-click="loadData()"-->
                                <md-content class="md-padding">
                                    <form class="form-horizontal ng-pristine ng-valid" role="form" method="post" name="myForm1" novalidate>
                                        <div class="box box-primary">
                                            <div class="box-header with-border">
                                                <h3 class="box-title">Master Category</h3>
                                                <div class="box-tools pull-right">
                                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                                </div>
                                            </div>
                                            <div class="box-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label class="control-label col-sm-4">Category Name:<span style="color:red;">*</span></label>
                                                            <div class="col-sm-8">
                                                                <input type="text" class="form-control" maxlength="100" required data-ng-model="EMCA_CategoryName"
                                                                       name="name" ng-paste="$event.preventDefault()"><!--allow-pattern="(\s|[a-zA-Z])"-->
                                                                <div class="error-messages" ng-if="interacted1(myForm1.name)" ng-messages="myForm1.name.$error">
                                                                    <div ng-message="required">Enter Category Name</div>
                                                                    <div ng-message="pattern">The field contains only alphabets</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <label class="checkbox-inline">
                                                            <input type="checkbox" ng-model="EMCA_CCECheckingFlg">
                                                            <span class="lbl padding-8">Applicable CCE Promotion</span>
                                                        </label>
                                                    </div>
                                                </div>
                                                <hr />
                                                <div class="text-center">
                                                    <input type="hidden" ng-model="EMCA_Id" value="{{EMCA_Id}}" />
                                                    <md-button type="submit" class="md-raised md-primary" ng-click="savecategoryddata()" id="save-btn">
                                                        <i class="fa fa-save" aria-hidden="true"></i>
                                                        Save
                                                    </md-button>
                                                    <md-button type="button" class="md-raised md-warn" data-ng-click="clear1()">
                                                        <i class="fa fa-times" aria-hidden="true"></i>
                                                        Cancel
                                                    </md-button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                    <div class="box box-primary">
                                        <div class="box-header with-border">
                                            <h3 class="box-title">Grid View</h3>
                                            <div class="box-tools pull-right">
                                                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                                            </div>
                                        </div>
                                        <!-- /.box-header -->
                                        <div class="box-body">
                                            <div ui-grid="gridOptions1" ui-grid-pagination class="grid text-center" id="style-4" style="height: 270px;"></div>
                                        </div>
                                    </div>
                                </md-content>
                            </md-tab>

                            <md-tab label="Category Class Mapping">
                                <!--ng-click="loadData()"-->
                                <md-content class="md-padding">
                                    <form class="form-horizontal ng-pristine ng-valid" role="form" name="myForm2" data-ng-submit="savecategoryclassmap()" novalidate>
                                        <div class="box box-primary">
                                            <div class="box-header with-border">
                                                <h3 class="box-title">Category Class Mapping</h3>
                                                <div class="box-tools pull-right">
                                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                                </div>
                                            </div>
                                            <div class="box-body">
                                                <div class="row">
                                                    <div class="col-sm-6 ">
                                                        <div class="form-group">
                                                            <label class="control-label col-sm-3">Academic Year:<span style="color:Red">*</span></label>
                                                            <div class="col-sm-8">
                                                                <select class="form-control" id="sel1" name="acd1" ng-model="ASMAY_Id"
                                                                        ng-disabled="selected_temp.length>0" ng-change="get_cate_class()" required>
                                                                    <option value="">--Select--</option>
                                                                    <option ng-repeat="acd in year_list" value="{{acd.asmaY_Id}}" ng-selected="{{acd.Selected==true}}">
                                                                        {{acd.asmaY_Year}}
                                                                    </option>
                                                                </select>
                                                                <div class="error-messages" ng-if="interacted2(myForm2.acd1)" ng-messages="myForm2.acd1.$error">
                                                                    <div ng-message="required">Select Academic Year</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-sm-3">Category:<span style="color:Red">*</span></label>
                                                            <div class="col-sm-8">
                                                                <select class="form-control" id="sel1" name="cat" ng-model="emcA_Id"
                                                                        ng-disabled="selected_temp.length>0" required>
                                                                    <option value="">--Select--</option>
                                                                    <option ng-repeat="catgry in category_list" value="{{catgry.emcA_Id}}"
                                                                            ng-selected="{{catgry.Selected==true}}">
                                                                        {{catgry.emcA_CategoryName}}
                                                                    </option>
                                                                </select>
                                                                <div class="error-messages" ng-if="interacted2(myForm2.cat)" ng-messages="myForm2.cat.$error">
                                                                    <div ng-message="required">Select Category</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-sm-3">Class:<span style="color:Red">*</span></label>
                                                            <div class="col-sm-8">
                                                                <select class="form-control" id="sel1" name="class" ng-model="ASMCL_Id"
                                                                        ng-change="get_cls_sections(emcA_Id)" required>
                                                                    <option value="">--Select--</option>
                                                                    <option ng-repeat="clas in class_list" value="{{clas.asmcL_Id}}"
                                                                            ng-selected="{{clas.Selected==true}}">
                                                                        {{clas.asmcL_ClassName}}
                                                                    </option>
                                                                </select>
                                                                <div class="error-messages" ng-if="interacted2(myForm2.class)" ng-messages="myForm2.class.$error">
                                                                    <div ng-message="required">Select Class</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 ">
                                                        <div class="form-group">
                                                            <label for="sel2" class="control-label col-sm-3">Section:<span style="color:Red">*</span></label>
                                                            <div class="multiselect col-sm-8">
                                                                <label ng-repeat="section in section_list">
                                                                    <input name="option1" value="{{section.asmS_Id}}" type="checkbox" ng-model="section.asmS_Id1"
                                                                           ng-required="isOptionsRequired1();">
                                                                    <span class="lbl padding-8">{{section.asmC_SectionName}}</span>
                                                                </label>
                                                            </div>
                                                            <div class="col-sm-3"></div>
                                                            <div class="col-sm-8 error-messages" ng-if="interacted2(myForm2.option1)"
                                                                 ng-messages="myForm2.option1.$error">
                                                                <div ng-message="required">Select Atleast One Section</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="">
                                                    <div class="">
                                                        <div class="text-center">
                                                            <input type="hidden" ng-model="ECAC_Id" value="{{ECAC_Id}}" />
                                                            <md-button type="button" class="md-raised md-primary" ng-click="save_temp()()">
                                                                <i class="fa fa-plus" aria-hidden="true"></i>
                                                                ADD
                                                            </md-button>
                                                            <md-button type="button" class="md-raised md-warn" ng-click="clear_temp()">
                                                                <i class="fa fa-times" aria-hidden="true"></i>
                                                                Clear
                                                            </md-button>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="box box-primary" ng-show="selected_temp.length>0">
                                                    <div class="box-header with-border">
                                                        <h3 class="box-title">Details</h3>
                                                        <div class="box-tools pull-right">
                                                            <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom"
                                                                    data-toggle="tooltip" title="collapsible">
                                                                <i class="fa fa-minus"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="box-body">
                                                        <table class="table table-hover table-responsive table-bordered">
                                                            <thead>
                                                                <tr>
                                                                    <th><a href="" ng-click="sort('sno')">SLNO</a></th>
                                                                    <th><a href="" ng-click="sort('ASMAY_Year')">Academic Year</a></th>
                                                                    <th><a href="" ng-click="sort('EMCA_CategoryName')">Category</a></th>
                                                                    <th><a href="" ng-click="sort('ASMCL_ClassName')">Class</a></th>
                                                                    <th><a href="" ng-click="sort('asmS_Id')">Sections</a></th>
                                                                    <th>Actions</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="user in selected_temp | orderBy:sortKey:reverse | filter:paginate| filter:search"
                                                                    ng-class-odd="'odd'">
                                                                    <td class="text-center">{{ $index + 1}}</td>
                                                                    <td class="text-center">{{user.ASMAY_Year}}</td>
                                                                    <td class="text-left">{{user.EMCA_CategoryName}}</td>
                                                                    <td class="text-left">{{user.ASMCL_ClassName}}</td>
                                                                    <td class="text-left"><div ng-repeat="sec in user.sections">{{sec.asmC_SectionName}}</div></td>
                                                                    <td>
                                                                        <span class="">
                                                                            <a href="javascript:void(0)" ng-click="edit(user,$index);">
                                                                                <i class="fa fa-pencil-square-o"></i><md-tooltip md-direction="down">Edit</md-tooltip>
                                                                            </a>
                                                                        </span>
                                                                        <span class="">
                                                                            <a href="javascript:void(0)" ng-click="delete(user,$index);">
                                                                                <i class="fa fa-trash text-danger"></i>
                                                                                <md-tooltip md-direction="down">Delete</md-tooltip>
                                                                            </a>
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <hr />
                                                <div class="text-center" ng-if="selected_temp.length >0">
                                                    <input type="hidden" ng-model="ECAC_Id" value="{{ECAC_Id}}" />
                                                    <md-button type="submit" class="md-raised md-primary" id="save-btn">
                                                        <i class="fa fa-floppy-o" aria-hidden="true"></i>
                                                        Save
                                                    </md-button>
                                                    <md-button type="button" class="md-raised md-warn" data-ng-click="clear2()">
                                                        <i class="fa fa-times" aria-hidden="true"></i>
                                                        Cancel
                                                    </md-button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                    <div class="box box-primary">
                                        <div class="box-header with-border">
                                            <h3 class="box-title">Category class mapping details</h3>
                                            <div class="box-tools pull-right">
                                                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                                            </div>
                                        </div>
                                        <!-- /.box-header -->
                                        <div class="box-body">
                                            <div ui-grid="gridOptions2" ui-grid-pagination class="grid text-center" id="style-4" style="height: 270px;"></div><!--ui-grid-edit-->
                                        </div>
                                    </div>
                                </md-content>
                            </md-tab>

                            <md-tab label="Yearly Category Progress Card Report Mapping">
                                <!--ng-click="loadData()"-->
                                <md-content class="md-padding">
                                    <form class="form-horizontal ng-pristine ng-valid" role="form" method="post" name="myForm122" novalidate>
                                        <div class="box box-primary">
                                            <div class="box-header with-border">
                                                <h3 class="box-title">Yearly Category Progress Card Report Mapping</h3>
                                                <div class="box-tools pull-right">
                                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                                </div>
                                            </div>
                                            <div class="box-body">
                                                <div class="row">
                                                    <div class="col-sm-6 col-sm-offset-3">
                                                        <div class="form-group">
                                                            <label class="control-label col-sm-3">Academic Year:<span style="color:Red">*</span></label>
                                                            <div class="col-sm-8">
                                                                <select class="form-control" id="sel1" name="acd122" ng-model="ASMAY_Id_new"  required>
                                                                    <option value="">--Select--</option>
                                                                    <option ng-repeat="acd in year_list" value="{{acd.asmaY_Id}}" 
                                                                            ng-selected="{{acd.asmaY_Id==ASMAY_Id_new}}">
                                                                        {{acd.asmaY_Year}}
                                                                    </option>
                                                                </select>
                                                                <div class="error-messages" ng-if="interacted122(myForm122.acd122)" 
                                                                     ng-messages="myForm122.acd122.$error">
                                                                    <div ng-message="required">Select Academic Year</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>                                                    
                                                </div>

                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <h4 style="color:red !important ; font-size:14px !important ;" >Note : If Report Card Format Is Same As Previous Year Then Click On Save The Same Format For Current Year. Else Contact Administratior. </h4>
                                                    </div>
                                                </div>
                                                <hr />
                                                <div class="text-center">                                                    
                                                    <md-button type="submit" class="md-raised md-primary" ng-click="Save_ReportCard_Format()" id="save-btn">
                                                        <i class="fa fa-save" aria-hidden="true"></i>
                                                        Save
                                                    </md-button>
                                                    <md-button type="button" class="md-raised md-warn" data-ng-click="clear122()">
                                                        <i class="fa fa-times" aria-hidden="true"></i>
                                                        Cancel
                                                    </md-button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                    <div class="box box-primary">
                                        <div class="box-header with-border">
                                            <h3 class="box-title">Grid View</h3>
                                            <div class="box-tools pull-right">
                                                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                                            </div>
                                        </div>                                         
                                        <div class="box-body">
                                            <div ui-grid="gridOptions122" ui-grid-pagination class="grid text-center" id="style-4" style="height: 270px;"></div>
                                        </div>
                                    </div>
                                </md-content>
                            </md-tab>
                        </md-tabs>
                    </md-content>
                </div>
            </div>
        </div>
    </div>
</section>
<div class="modal fade  modal-medium" id="popup" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
            <h4 class="modal-title text-white">"{{Category_Name}}-{{Class_Name}}" Mapped Sections</h4>
        </div>
        <div class="modal-content">
            <div class="modal-body">
                <table class="table table-hover table-responsive table-bordered">
                    <thead>
                        <tr>
                            <th><a href="" ng-click="sort('emgS_Id')">SLNO</a></th>
                            <th><a href="" ng-click="sort('asmcL_ClassName')">Class Name</a></th>
                            <th><a href="" ng-click="sort('asmC_SectionName')">Section Name</a></th>
                            <th><a href="" ng-click="sort('')">Actions</a></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="user in viewrecordspopupdisplay" current-page="currentPage">
                            <td class="text-center">{{itemsPerPage *(currentPage-1)+$index+1}}</td>
                            <td class="text-left">{{ user.asmcL_ClassName}}</td>
                            <td class="text-left">{{ user.asmC_SectionName}}</td>
                            <td class="text-center">
                                <div class="grid-action-cell">
                                    <a ng-if="!user.ecaC_ActiveFlag" href="javascript:void(0)" style="color:green;" ng-click="deactive2(user);">  <i class="fa fa-toggle-off text-red" aria-hidden="true"></i><md-tooltip md-direction="down" md-z-index="1151">Activate Now</md-tooltip></a>
                                    <a ng-if="user.ecaC_ActiveFlag" href="javascript:void(0)" style="color:red;" ng-click="deactive2(user);">  <i class="fa fa-toggle-on text-green" aria-hidden="true"></i><md-tooltip md-direction="down" md-z-index="1151">Deactivate Now</md-tooltip> </a>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="clearpopupgrid()" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>


