<section class="content">
    <form class="form-horizontal ng-pristine ng-valid" name="myForm" role="form" novalidate>
        <div data-ng-init="BindData()">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Final Promotion Report</h3>
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Academic Year :<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="sm" name="yeardd" ng-model="ASMAY_Id" ng-change="get_classes()" required>
                                        <option value="">Select Academic Year</option>
                                        <option ng-repeat="year in year_list" value="{{year.asmaY_Id}}" ng-selected="year.Selected == true">{{year.asmaY_Year}}</option>
                                    </select>
                                    <div class="error-messages" ng-if="interacted(myForm.yeardd)" ng-messages="myForm.yeardd.$error">
                                        <div ng-message="required">Select Academic Year</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Class :<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <select class="form-control" name="classssss" id="sel1" ng-model="ASMCL_Id" ng-change="get_sections()" required>
                                        <option value="">Select Class</option>
                                        <option ng-repeat="cls in class_list" value="{{cls.asmcL_Id}}" ng-selected="{{cls.Selected == true}}">
                                            {{cls.asmcL_ClassName}}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.classssss)" ng-messages="myForm.classssss.$error">
                                    <div ng-message="required">Select Class</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Section :<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="sel1" name="secionnnnn" ng-model="ASMS_Id" ng-change="get_students()" required>
                                        <option value="">Select Section</option>
                                        <option ng-repeat="sec in section_list" value="{{sec.asmS_Id}}" ng-selected="{{sec.Selected == true}}">
                                            {{sec.asmC_SectionName}}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.secionnnnn)" ng-messages="myForm.secionnnnn.$error">
                                    <div ng-message="required">Select Section</div>
                                </div>
                            </div>
                        </div>
                        <!--<div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-4">Student Name :<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="sel1" name="stude" ng-model="AMST_Id" ng-change="subject_list = []" required>
                                        <option value="">Select Student Name</option>
                                        <option ng-repeat="stu in student_list" value="{{stu.amsT_Id}}" ng-selected="{{stu.Selected == true}}">
                                            {{stu.amsT_FirstName}}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.stude)" ng-messages="myForm.stude.$error">
                                    <div ng-message="required">Please Select Student</div>
                                </div>
                            </div>
                        </div>-->
                    </div>
                    <hr />
                    <div class="">
                        <div class="">
                            <div class="text-center">
                                <!--<input type="hidden" ng-model="AMST_Id" />-->
                                <md-button type="button" class="md-raised md-primary" ng-click="get_report()" id="save-btn">
                                    <i class="fa fa-list-alt" aria-hidden="true"></i>
                                    Report
                                </md-button>
                                <md-button type="button" class="md-raised md-warn" ng-click="clear()">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                    Cancel
                                </md-button>
                                <md-button type="button" class="md-raised md-warn" ng-click="Print()" ng-show="exam_list.length>0 && subject_list.length>0">
                                    <i class="fa fa-file-pdf-o" aria-hidden="true"></i>
                                    Print
                                </md-button>
                                <!--<md-button type="button" class="md-raised md-warn" ng-click="exportToExcel('#table786')" ng-show="exam_list.length>0 && subject_list.length>0">
                                    <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                                    Export
                                </md-button>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box box-primary" ng-show="exam_list.length>0 && subject_list.length>0">
            <div class="box-header with-border">
                <h3 class="box-title">Final Promotion Report</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <div class="box-body" id="Final_Report" style="overflow:scroll;">
                <div class="" id="Baldwin">
                    <div class="BGIIPROGRESREPORT margin-top-120" ng-repeat="stud in student_list" style="page-break-before:always;">
                        <div class="header text-center margin-bottom-10">
                            <label>
                                <b>
                                    PROGRESS REPORT<br />
                                    ACADEMIC YEAR {{Year_Name}}<br />
                                    {{Exam_Name}}
                                </b>
                            </label>
                        </div>

                        <section class="content">
                            <div class="sect1">
                                <div class="margin-bottom-10">
                                    <div class="row">
                                        <div class="col-sm-5">
                                            <div class="form-group">
                                                <b>
                                                    <label class="control-label col-sm-3">NAME </label>
                                                    <label class="col-sm-9 control-label">
                                                        : {{stud.amsT_FirstName}}
                                                    </label>
                                                </b>
                                            </div>
                                            <div class="form-group">
                                                <b>
                                                    <label class="control-label col-sm-3">D.O.B </label>
                                                    <label class="col-sm-9 control-label">
                                                        : {{stud.amsT_DOB|date:'dd-MMM-yyyy'}}
                                                    </label>
                                                </b>
                                            </div>
                                            <div class="form-group">
                                                <b>
                                                    <label class="control-label col-sm-5">CLASS TEACHER </label>
                                                    <label class="col-sm-7 control-label">
                                                        : {{Class_Teacher_Name}}
                                                    </label>
                                                </b>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <b>
                                                    <label class="control-label col-sm-4">CLASS </label>
                                                    <label class="col-sm-8 control-label">
                                                        : {{Class_Name}}
                                                    </label>
                                                </b>
                                            </div>
                                            <div class="form-group">
                                                <b>
                                                    <label class="control-label col-sm-4">ROLL NO </label>
                                                    <label class="col-sm-8 control-label">
                                                        : {{stud.amaY_RollNo}}
                                                    </label>
                                                </b>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <b>
                                                    <label class="control-label col-sm-6">SECTION </label>
                                                    <label class="col-sm-6 control-label">
                                                        : {{Section_Name}}
                                                    </label>
                                                </b>
                                            </div>
                                            <div class="form-group">
                                                <b>
                                                    <label class="control-label col-sm-6">ADM. NO </label>
                                                    <label class="col-sm-6 control-label">
                                                        : {{stud.amsT_AdmNo}}
                                                    </label>
                                                </b>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="">
                                <table class="table-bordered text-center">
                                    <thead>
                                        <tr>
                                            <th class="text-left"  width="150"><b>SUBJECTS</b></th>
                                            <th class="text-center" ><b>MAX MARKS</b></th>
                                            <th class="text-center" ><b>MIN MARKS</b></th>
                                            <th class="text-center" ><b>MARKS OBTAINED</b></th>
                                            <th class="text-center"><b>PROJECT</b></th>
                                            <th class="text-center" ><b>SECTION AVERAGE</b></th>
                                            <th class="text-center" ><b>CLASS AVERAGE</b></th>
                                            <th class="text-center" ><b>SECTION HIGHEST</b></th>
                                            <th class="text-center" ><b>CLASS HIGHEST</b></th>

                                        </tr>

                                    </thead>

                                    <tbody>
                                        <tr ng-repeat="sub in stud.stu_subjects" ng-if="sub.flag">
                                            <td class="text-left"><b>{{sub.ismS_SubjectName}}</b></td>
                                            <td><span ng-repeat="subj_de in exam_subjectwise_details" ng-if="subj_de.ismS_Id==sub.ismS_Id && subj_de.eycE_Id==Final_EYCE_Id">{{subj_de.eyceS_MaxMarks}}</span></td>
                                            <td><span ng-repeat="subj_de in exam_subjectwise_details" ng-if="subj_de.ismS_Id==sub.ismS_Id && subj_de.eycE_Id==Final_EYCE_Id">{{subj_de.eyceS_MinMarks}}</span></td>
                                            <td><span ng-repeat="marks in stud.stu_student_marks" ng-if="marks.ismS_Id==sub.ismS_Id && marks.emE_Id==Final_Exam_Id"><label ng-if="marks.estmpS_PassFailFlg=='AB' || marks.estmpS_PassFailFlg=='M' || marks.estmpS_PassFailFlg=='L'"> {{marks.estmpS_PassFailFlg}}</label><label ng-if="marks.estmpS_PassFailFlg!='AB' && marks.estmpS_PassFailFlg!='M' && marks.estmpS_PassFailFlg!='L'">{{marks.estmpS_ObtainedMarks}}  <!--{{marks.estmpS_ObtainedGrade}}--> </label></span></td>
                                            <td><span ng-repeat="marks in stud.stu_student_marks" ng-if="marks.ismS_Id==sub.ismS_Id && marks.emE_Id==PROJECT_Exam_Id"><label ng-if="marks.estmpS_PassFailFlg=='AB' || marks.estmpS_PassFailFlg=='M' || marks.estmpS_PassFailFlg=='L'"> {{marks.estmpS_PassFailFlg}}</label><label ng-if="marks.estmpS_PassFailFlg!='AB' && marks.estmpS_PassFailFlg!='M' && marks.estmpS_PassFailFlg!='L'">{{marks.estmpS_ObtainedGrade}}</label></span></td>
                                            <td><span ng-repeat="marks in stud.stu_student_marks" ng-if="marks.ismS_Id==sub.ismS_Id && marks.emE_Id==Final_Exam_Id">{{marks.estmpS_SectionAverage}}</span></td>
                                            <td><span ng-repeat="marks in stud.stu_student_marks" ng-if="marks.ismS_Id==sub.ismS_Id && marks.emE_Id==Final_Exam_Id">{{marks.estmpS_ClassAverage}}</span></td>
                                            <td><span ng-repeat="marks in stud.stu_student_marks" ng-if="marks.ismS_Id==sub.ismS_Id && marks.emE_Id==Final_Exam_Id">{{marks.estmpS_SectionHighest}}</span></td>
                                            <td><span ng-repeat="marks in stud.stu_student_marks" ng-if="marks.ismS_Id==sub.ismS_Id && marks.emE_Id==Final_Exam_Id">{{marks.estmpS_ClassHighest}}</span></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left"><b> GRAND TOTAL</b></td>
                                            <td><span ng-repeat="tot_m_e in exam_process_details" ng-if="tot_m_e.amsT_Id==stud.amsT_Id && tot_m_e.emE_Id==Final_Exam_Id"><b>{{tot_m_e.estmP_TotalMaxMarks}}</b></span></td>
                                            <td><span ng-repeat="tot_m_e in exam_process_details" ng-if="tot_m_e.amsT_Id==stud.amsT_Id && tot_m_e.emE_Id==Final_Exam_Id"><b>{{tot_m_e.estmP_TotalMinMarks}}</b></span></td>
                                            <td>
                                                <span ng-repeat="tot_m_e in exam_process_details" ng-if="tot_m_e.amsT_Id==stud.amsT_Id && tot_m_e.emE_Id==Final_Exam_Id">
                                                    <b ng-if="tot_m_e.estmP_Result=='AB'">
                                                        &nbsp;
                                                    </b>
                                                    <b ng-if="tot_m_e.estmP_Result!='AB'">
                                                        {{tot_m_e.estmP_TotalObtMarks}}
                                                    </b>
                                                </span>
                                            </td>
                                            <td></td>
                                            <td colspan="4"></td>

                                        </tr>


                                        <tr>
                                            <!--<td colspan="3" class="text-left"><b>GRADE</b></td>-->
                                            <td  class="text-left"><b>GRADE</b></td>
                                            <td colspan="8"><span ng-repeat="tot_m_e in exam_process_details" ng-if="tot_m_e.amsT_Id==stud.amsT_Id && tot_m_e.emE_Id==Final_Exam_Id"><label ng-if="tot_m_e.estmP_Result=='Pass'"><b>{{tot_m_e.estmP_TotalGrade}}</b></label><label ng-if="tot_m_e.estmP_Result=='Fail'"><b>D</b></label></span></td><!--colspan="2"-->
                                            <!--<td colspan="7"><b><span ng-if="stud.estmP_Result!='Fail'"> {{stud.estmP_TotalGrade}}</span><span ng-if="stud.estmP_Result=='Fail' && stud.estmP_TotalGrade != ''">D</span></b></td>-->
                                           
                                            <!--<td rowspan="3" colspan="4"></td>-->
                                        </tr>
                                        <tr>
                                            <td class="text-left"><b>REMARKS</b></td>
                                            <!--<td colspan="2"><span ng-repeat="tot_m_e in exam_process_details" ng-if="tot_m_e.amsT_Id==stud.amsT_Id && tot_m_e.emE_Id==Final_Exam_Id && tot_m_e.estmP_Result=='Pass'"><label  ng-repeat="grade in Final_Exm_Grade_details" ng-if="grade.emgD_Name==tot_m_e.estmP_TotalGrade"><b>{{grade.emgD_Remarks}}</b></label></span></td>-->
                                            <td colspan="8"><span ng-repeat="tot_m_e in exam_process_details" ng-if="tot_m_e.amsT_Id==stud.amsT_Id && tot_m_e.emE_Id==Final_Exam_Id">
                                                <label ng-if="tot_m_e.estmP_Result=='Pass'"><label ng-repeat="grade in Final_Exm_Grade_details" ng-if="grade.emgD_Name==tot_m_e.estmP_TotalGrade"><b>{{grade.emgD_Remarks}}</b></label></label>
                                                <label ng-if="tot_m_e.estmP_Result=='Fail'"><b>NEEDS IMPROVEMENT</b></label>
                                                </span></td>

                                            <!--<td colspan="7"><b><span ng-if="stud.estmP_Result!='Fail'"> {{stud.estmP_TotalGradeRemark}}</span><span ng-if="stud.estmP_Result=='Fail' && stud.estmP_TotalGradeRemark != ''">NEEDS IMPROVEMENT</span></b></td>-->
                                          
                                            <!--<td colspan="4"></td>-->
                                        </tr>
                                        <tr>
                                            <td  class="text-left"><b>RANK IN SECTION</b></td>
                                            <td colspan="8"><span ng-repeat="tot_m_e in exam_process_details" ng-if="tot_m_e.amsT_Id==stud.amsT_Id && tot_m_e.emE_Id==Final_Exam_Id && tot_m_e.estmP_Result=='Pass'"><b>{{tot_m_e.estmP_SectionRank}}</b></span></td>
                                            <!--<td colspan="7"><b><span ng-if="stud.estmP_SectionRank != '0'">{{stud.estmP_SectionRank}}</span><span ng-if="stud.estmP_SectionRank == '0'"></span></b></td>-->
                                            
                                            <!--<td colspan="4"></td>-->
                                        </tr>
                                        <tr ng-repeat="sub in stud.stu_subjects" ng-if="!sub.flag">
                                            <td class="text-left"><b>{{sub.ismS_SubjectName}}</b></td>
                                            <td><span ng-repeat="subj_de in exam_subjectwise_details" ng-if="subj_de.ismS_Id==sub.ismS_Id && subj_de.eycE_Id==Final_EYCE_Id">{{subj_de.eyceS_MaxMarks}}</span></td>
                                            <td><span ng-repeat="subj_de in exam_subjectwise_details" ng-if="subj_de.ismS_Id==sub.ismS_Id && subj_de.eycE_Id==Final_EYCE_Id">{{subj_de.eyceS_MinMarks}}</span></td>
                                            <!--<td><span ng-repeat="marks in stud.stu_student_marks" ng-if="marks.ismS_Id==sub.ismS_Id && marks.emE_Id==Final_Exam_Id"><label ng-if="marks.estmpS_PassFailFlg=='AB' || marks.estmpS_PassFailFlg=='M' || marks.estmpS_PassFailFlg=='L'"> {{marks.estmpS_PassFailFlg}}</label><label ng-if="marks.estmpS_PassFailFlg!='AB' && marks.estmpS_PassFailFlg!='M' && marks.estmpS_PassFailFlg!='L'"> {{marks.estmpS_ObtainedGrade}} </label></span></td>-->
                                            <td><span ng-repeat="marks in stud.stu_student_marks" ng-if="marks.ismS_Id==sub.ismS_Id && marks.emE_Id==Final_Exam_Id"><label ng-if="marks.estmpS_PassFailFlg=='AB' || marks.estmpS_PassFailFlg=='M' || marks.estmpS_PassFailFlg=='L'"> {{marks.estmpS_PassFailFlg}}</label><label ng-if="marks.estmpS_PassFailFlg!='AB' && marks.estmpS_PassFailFlg!='M' && marks.estmpS_PassFailFlg!='L'"><label ng-if="sub.eyceS_MarksDisplayFlg">{{marks.estmpS_ObtainedMarks}}</label> </label></span></td>
                                            <!--<td><span ng-repeat="marks in stud.stu_student_marks" ng-if="marks.ismS_Id==sub.ismS_Id && marks.emE_Id==PROJECT_Exam_Id"><label ng-if="marks.estmpS_PassFailFlg=='AB' || marks.estmpS_PassFailFlg=='M' || marks.estmpS_PassFailFlg=='L'"> {{marks.estmpS_PassFailFlg}}</label><label ng-if="marks.estmpS_PassFailFlg!='AB' && marks.estmpS_PassFailFlg!='M' && marks.estmpS_PassFailFlg!='L'">{{marks.estmpS_ObtainedGrade}}</label></span></td>-->
                                            <td><span ng-repeat="marks in stud.stu_student_marks" ng-if="marks.ismS_Id==sub.ismS_Id && marks.emE_Id==Final_Exam_Id"><label ng-if="marks.estmpS_PassFailFlg=='AB' || marks.estmpS_PassFailFlg=='M' || marks.estmpS_PassFailFlg=='L'"> {{marks.estmpS_PassFailFlg}}</label><label ng-if="marks.estmpS_PassFailFlg!='AB' && marks.estmpS_PassFailFlg!='M' && marks.estmpS_PassFailFlg!='L'"><label ng-if="sub.eyceS_GradeDisplayFlg">{{marks.estmpS_ObtainedGrade}}</label></label></span></td>
                                           <td colspan="4"><!--<span ng-repeat="marks in stud.stu_student_marks" ng-if="marks.ismS_Id==sub.ismS_Id && marks.emE_Id==Final_Exam_Id"><label ng-if="marks.estmpS_PassFailFlg=='AB' || marks.estmpS_PassFailFlg=='M' || marks.estmpS_PassFailFlg=='L'"><b>{{marks.estmpS_PassFailFlg}}</b></label><label ng-if="marks.estmpS_PassFailFlg!='AB' && marks.estmpS_PassFailFlg!='M' && marks.estmpS_PassFailFlg!='L'"> <label ng-repeat="grade_s in Subjectwise_Grade_details" ng-if="sub.EMGR_Id==grade_s.emgR_Id && grade_s.emgD_Name==marks.estmpS_ObtainedGrade"><b>{{grade_s.emgD_Remarks}}</b></label></label></span>--></td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                            <table class="table margin-top-40">
                                <tbody>
                                    <tr class="">
                                        <td class="width-150"><b>NO. OF WORKING DAYS : </b></td>
                                        <td class="width-50" ng-repeat="att in stud_work_attendence" ng-if="stud.amsT_Id==att.AMST_Id"><b>{{att.TotalWorkingDays}}</b></td>
                                        <!--<td class="width-50 "><b>{{stud.classheld}}</b></td>-->
                                        <td class="pull-right"><b>NO. OF DAYS PRESENT : </b></td>
                                        <!--<td class="width-50 "><b>{{stud.classatt}}</b></td>-->
                                        <td class="width-50" ng-repeat="att in stud_present_attendence" ng-if="stud.amsT_Id==att.AMST_Id"><b>{{att.TotalPresentDays}}</b></td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table margin-top-40">
                                <tbody>
                                    <tr class="">
                                        <td class="width-200"><b>CLASS TEACHER'S REMARKS:</b></td>
                                        <td class="text-center border-bottom"></td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table margin-top-50">
                                <tbody>
                                    <tr class="">
                                        <td class=""> <b><span class="border-top">PARENT'S SIGNATURE</span></b></td>
                                        <td class="text-center"><b><span class="border-top">CLASS TEACHER'S SIGNATURE</span></b></td>
                                        <td class="pull-right"><b><span class="border-top">PRINCIPAL'S SIGNATURE</span></b></td>
                                    </tr>
                                </tbody>
                            </table>
                        </section>
                    </div>
                </div>



            </div>
        </div>
    </form>
</section>