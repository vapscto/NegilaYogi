<section class="content">
    <form class="form-horizontal ng-pristine ng-valid" name="myForm" role="form" ng-init="BindData()" novalidate>

        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">Topper List Report</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <div class="box-body">
                <div class="col-sm-12">
                    <div class="text-center well" ng-init="qualification_type=1">
                        <label class="radio-inline">
                            <input name="optradio" ng-model="qualification_type" value="1" type="radio" required>
                            <span class="lbl padding-8">All</span>
                        </label>
                        <label class="radio-inline">
                            <input name="optradio" ng-model="qualification_type" value="2" type="radio" required>
                            <span class="lbl padding-8">Individual</span>
                        </label>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Academic Year :<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="sel1" name="Year" ng-model="ASMAY_Id" data-ng-change="onselectAcdYear(ASMAY_Id)" required>
                                    <option value="" label="Select Academic Year"> </option>
                                    <option ng-repeat="option1 in acdlist" value="{{option1.asmaY_Id}}" ng-selected="{{option1.Selected == true}}">
                                        {{option1.asmaY_Year}}
                                    </option>
                                </select>
                            </div>
                            <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.Year)" ng-messages="myForm.Year.$error">
                                <div ng-message="required">Select Academic Year</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Class :<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="sel2" name="cls" ng-model="ASMCL_Id" ng-change="get_sec_exam()" required>
                                    <option value="" label="Select Class"> </option>
                                    <option ng-repeat="option2 in ctlist" value="{{option2.asmcL_Id}}" ng-selected="{{option2.Selected == true}}">
                                        {{option2.asmcL_ClassName}}
                                    </option>
                                </select>
                            </div>
                            <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.cls)" ng-messages="myForm.cls.$error">
                                <div ng-message="required">Select Class</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Section :<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="sel3" name="sec" ng-model="ASMS_Id" ng-disabled="qualification_type==1"
                                        data-ng-change="onselectexam()"
                                        ng-required="qualification_type==2">
                                    <option value="" label="Select Section"> </option>
                                    <option ng-repeat="option3 in seclist" value="{{option3.asmS_Id}}" ng-selected="{{option3.Selected == true}}">
                                        {{option3.asmC_SectionName}}
                                    </option>
                                </select>
                            </div>
                            <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.sec)" ng-messages="myForm.sec.$error">
                                <div ng-message="required">Select Section</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Top :<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="sel" name="top" ng-model="topper" required  />
                                <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.top)" ng-messages="myForm.top.$error">
                                    <div ng-message="required">Enter Top</div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Examwise :<span style="color:Red">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="sel8" name="exm" ng-model="EME_Id" ng-change="get_subject()" required>
                                    <option value="" label="Select Exam"> </option>
                                    <option ng-repeat="option8 in examlist" value="{{option8.emE_Id}}" ng-selected="{{option8.Selected == true}}">
                                        {{option8.emE_ExamName}}
                                    </option>
                                </select>
                            </div>
                            <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.exm)" ng-messages="myForm.exm.$error">
                                <div ng-message="required"> Select Exam</div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <div class="col-sm-4">
                                <label>
                                    <input ng-false-value="0" ng-true-value="1" type="checkbox" ng-model="sub_checked">
                                    <span class="lbl padding-8">Subjectwise</span>
                                </label>
                            </div>

                            <div class="col-sm-8">
                                <select class="form-control" id="sel7" name="sub" ng-model="ISMS_Id" ng-disabled="!sub_checked" ng-required="sub_checked=='1'">
                                    <option value="" label="Select Subject"> </option>
                                    <option ng-repeat="option7 in sublist" value="{{option7.ismS_Id}}" ng-selected="{{option7.Selected == true}}">
                                        {{option7.ismS_SubjectName}}
                                    </option>
                                </select>
                            </div>
                            <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.sub)" ng-messages="myForm.sub.$error">
                                <div ng-message="required">Please Select Subject</div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr />
                <div class="">
                    <div class="">
                        <div class="">
                            <div class="text-center">
                                <md-button type="submit" class="md-raised md-primary" ng-disabled="form.$invalid" id="save-btn" ng-click="onreport()">
                                    <i class="fa fa-floppy-o" aria-hidden="true"></i>
                                    Report
                                </md-button>
                                <md-button class="md-raised md-warn" ng-click="cancel()">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                    Cancel
                                </md-button>
                                <md-button class="md-raised md-primary" id="print-btn" ng-click="printData()">
                                    <i class="fa fa-floppy-o" aria-hidden="true"></i>
                                    Print
                                </md-button>
                                <md-button class="md-raised md-primary" id="print-btn" ng-click="exportToExcel()">
                                    <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                                    Excel
                                </md-button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="box box-primary" ng-show="main_list.length>0">
            <div class="box-header with-border">
                <h3 class="box-title">Toppers List</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body" id="table2"  ng-hide="true">
                <div style="padding-bottom:50px;">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th><a href="">Sl No.</a></th>
                                <th><a href="">Student Name</a></th>
                                <th><a href="">Admn No</a></th>
                                <th><a href="">Class</a></th>
                                <th><a href="">Section</a></th>
                                <th><a href="">Total Marks</a></th>
                                <th><a href="">Obtained Marks</a></th>
                                <th><a href="">Percentage</a></th>
                                <th><a href="">Rank</a></th>
                            </tr>
                        </thead>
                        <tbody ng-repeat="exm in main_list">
                            <tr>
                                <td>{{$index+1}}</td>
                                <td class="text-left">{{exm.amsT_FirstName}}</td>
                                <td>{{exm.amsT_AdmNo}}</td>
                                <td>{{exm.asmcL_ClassName}}</td>
                                <td>{{exm.asmC_SectionName}}</td>
                                <td>{{exm.estmP_TotalMaxMarks}}</td>
                                <td>{{exm.estmP_TotalObtMarks}}</td>
                                <td>{{exm.estmP_Percentage}}</td>
                                <td>{{exm.estmP_SectionRank}}</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>

            <hr />
            <div class="box-body" id="table2" ng-if="main_listsms.length>0">
                <div class="row">
                    <div class="col-sm-12">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>
                                        <label>
                                            <input type="checkbox" name="stdd" value="1" ng-model="usercheck" data-ng-click="toggleAll(usercheck)" />
                                            <span class="lbl padding-8"></span>
                                        </label>
                                    </th>
                                    <th><a href="">Sl No.</a></th>
                                    <th><a href="">Student Name</a></th>
                                    <th><a href="">Admn No</a></th>
                                    <th><a href="">Class</a></th>
                                    <th><a href="">Section</a></th>
                                    <th><a href="">Total Marks</a></th>
                                    <th><a href="">Obtained Marks</a></th>
                                    <th><a href="">Percentage</a></th>
                                    <th><a href="">Rank</a></th>
                                </tr>
                            </thead>
                            <tbody ng-repeat="exm in main_listsms">
                                <tr>
                                    <td class="text-center">
                                        <label>
                                            <input type="checkbox" name="year1" value="1" ng-model="exm.isSelected22" ng-change="optionToggled(exm)"
                                                   ng-required="isOptionsRequired()">
                                            <span class="lbl padding-8"></span>
                                        </label>
                                    </td>
                                    <td>{{$index+1}}</td>
                                    <td class="text-left">{{exm.amsT_FirstName}}</td>
                                    <td>{{exm.amsT_AdmNo}}</td>
                                    <td>{{exm.asmcL_ClassName}}</td>
                                    <td>{{exm.asmC_SectionName}}</td>
                                    <td>{{exm.estmP_TotalMaxMarks}}</td>
                                    <td>{{exm.estmP_TotalObtMarks}}</td>
                                    <td>{{exm.estmP_Percentage}}</td>
                                    <td>{{exm.estmP_SectionRank}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-12">
                        <div class="well text-center">
                            <div class="checkbox-inline">
                                <label><input type="checkbox" data-ng-model="obj.smschecked" value="1"><span class="lbl padding-8">SMS</span></label>
                            </div>
                            <div class="checkbox-inline">
                                <label><input type="checkbox" data-ng-model="obj.emailchecked" value="1"><span class="lbl padding-8">EMAIL</span></label>
                            </div>
                            <!--<div class="checkbox-inline">
                                <label><input type="checkbox" data-ng-model="notification" value="1"><span class="lbl padding-8">Notification</span></label>
                            </div>-->
                        </div>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-12">
                        <div class="text-center">
                            <md-button type="button" class="md-raised md-primary" ng-click="saveUseronce()"
                                       ng-disabled="smschecked==false && emailchecked==false && notification==false">
                                <i class="fa fa-check-square-o" aria-hidden="true"></i> SEND
                            </md-button>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="box box-primary" ng-show="main_list1.length>0">
            <div class="box-header with-border">
                <h3 class="box-title">Toppers List</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body" id="table1">
                <div style="padding-bottom:50px;">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>
                                    <a href="">Sl No.</a>
                                </th>
                                <th>
                                    <a href="">Student Name</a>
                                </th>
                                <th>
                                    <a href="">Admn No</a>
                                </th>
                                <th>
                                    <a href="">Class</a>
                                </th>
                                <th>
                                    <a href="">Section</a>
                                </th>
                                <th>
                                    <a href="">Maximum Marks</a>
                                </th>
                                <th>
                                    <a href="">Obtained Marks</a>
                                </th>
                                <th>
                                    <a href="">Section Highest</a>
                                </th>

                            </tr>
                        </thead>
                        <tbody ng-repeat="exm in main_list1">
                            <tr>
                                <td>{{$index+1}}</td>
                                <td class="text-left">{{exm.amsT_FirstName}}</td>
                                <td>{{exm.amsT_AdmNo}}</td>
                                <td>{{exm.ASMCL_ClassName}}</td>
                                <td>{{exm.ASMC_SectionName}}</td>
                                <td>{{exm.estmpS_MaxMarks}}</td>
                                <td>{{exm.estmpS_ObtainedMarks}}</td>
                                <td>{{exm.estmpS_SectionHighest}}</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="table" ng-show="table_flag">
            <div class="baldwin text-center">
                <img src="{{imgname}}" class="img-responsive" alt="baldwin">
            </div>
            <center><h4>Toppers List For {{details}}</h4></center>
            <br />
            <table class="table table-bordered" id="table1d">
                <thead>
                    <tr>
                        <th>Sl No.</th>
                        <th>Student Name</th>
                        <th>Admn No</th>
                        <th>Class</th>
                        <th>Section</th>
                        <th>Total Marks</th>
                        <th>Obtained Marks</th>
                        <th>Percentage</th>
                        <th>Rank</th>
                    </tr>
                </thead>
                <tbody ng-repeat="exm in main_list">
                    <tr>
                        <td>{{$index+1}}</td>
                        <td class="text-left">{{exm.amsT_FirstName}}</td>
                        <td>{{exm.amsT_AdmNo}}</td>
                        <td>{{exm.asmcL_ClassName}}</td>
                        <td>{{exm.asmC_SectionName}}</td>
                        <td>{{exm.estmP_TotalMaxMarks}}</td>
                        <td>{{exm.estmP_TotalObtMarks}}</td>
                        <td>{{exm.estmP_Percentage}}</td>
                        <td>{{exm.estmP_SectionRank}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="tablesub" ng-show="table_flag">
            <div class="baldwin text-center">
                <img src="{{imgname}}" class="img-responsive" alt="baldwin">
            </div>
            <center><h4>Toppers List For {{details}}</h4></center>
            <br />
            <table class="table table-bordered" id="tablesub1">
                <thead>
                    <tr>
                        <th>
                            Sl No.
                        </th>
                        <th>
                            Student Name
                        </th>
                        <th>
                            Admn No
                        </th>
                        <th>
                            Class
                        </th>
                        <th>
                            Section
                        </th>
                        <th>
                            Maximum Marks
                        </th>
                        <th>
                            Obtained Marks
                        </th>
                        <th>
                            Section Highest
                        </th>

                    </tr>
                </thead>
                <tbody ng-repeat="exm in main_list1">
                    <tr>
                        <td>{{$index+1}}</td>
                        <td class="text-left">{{exm.amsT_FirstName}}</td>
                        <td>{{exm.amsT_AdmNo}}</td>
                        <td>{{exm.ASMCL_ClassName}}</td>
                        <td>{{exm.ASMC_SectionName}}</td>
                        <td>{{exm.estmpS_MaxMarks}}</td>
                        <td>{{exm.estmpS_ObtainedMarks}}</td>
                        <td>{{exm.estmpS_SectionHighest}}</td>
                    </tr>

                </tbody>
            </table>
        </div>

    </form>
</section>

<div id="myModalotp" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width:50%;">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" ng-click="BindData()" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i><!--&times;--></button>
                <h4 class="modal-title text-white">Topper Student List</h4>

            </div>
            <div class="modal-body">
                <div>
                    <center>
                        <div class="" ng-init="otptype='Appsts'">
                            <label class="checkbox-inline" ng-show="mobileotpshow">
                                <input type="radio" value="M" ng-model="otptype" ng-click="otponclickloaddata()" name="otp" required>
                                <span class="lbl padding-8"><b>Mobile OTP</b></span>
                            </label>
                            <label class="checkbox-inline" ng-show="emailotpshow">
                                <input type="radio" value="E" ng-model="otptype" ng-click="otponclickloaddata()" name="otp" required>
                                <span class="lbl padding-8"><b>Email OTP</b></span>
                            </label>
                        </div>
                        <div ng-show="otpmobile">

                            <p><h4 style="color:red;">OTP will be Send To Authorised Mobile No!!</h4></p>
                            <br />
                            <p><h4>Mobile Number: ******{{mobileno}}</h4></p>

                        </div>
                        <div ng-show="otpemail">

                            <p><h4 style="color:red;">OTP will be Send To Authorised Email Id!!</h4></p>
                            <br />
                            <p><h4>Email Id: <b class="text-lowercase">{{emailid | capitalize}}******</b></h4></p>

                        </div>
                    </center>
                    <br />
                    <div ng-show="buttonotp">
                        <center>
                            <button type="button" class="btn btn-primary" ng-click="sendotpsms(otptype)">SEND OTP</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal"> Close</button>
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="myModalswal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width:80%;">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i><!--&times;--></button>
                <h4 class="modal-title text-white">Topper List Student List  </h4>
            </div>
            <div class="modal-body">

                <div ng-show="radioval=='Student'">
                    <center>
                        <p><h4 style="color:red;">Students List Which You Are Selected !!!</h4></p>
                    </center>
                    <center><p ng-if="snd_sms==true && snd_email!=true"><b>NOTE:SMS Will Trigger For The Same </b></p></center>
                    <center><p ng-if="snd_email==true && snd_sms!=true"><b>NOTE:Email Will Trigger For The Same </b></p></center>
                    <center><p ng-if="snd_email==true && snd_sms==true"><b>NOTE:SMS and Email Will Trigger For The Same </b></p></center>

                    <table class="table table-hover table-responsive table-bordered text-center">
                        <thead>
                            <tr>
                                <th>Sl No.</th>
                                <th>Student Name</th>
                                <th>Admn No</th>
                                <th>Class</th>
                                <th>Section</th>
                                <th>Total Marks</th>
                                <th>Obtained Marks</th>
                                <th>Percentage</th>
                                <th>Rank</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="exm in clslst2" pagination-id="page3">
                                <td>{{$index+1}}</td>
                                <td class="text-left">{{exm.amsT_FirstName}}</td>
                                <td>{{exm.amsT_AdmNo}}</td>
                                <td>{{exm.asmcL_ClassName}}</td>
                                <td>{{exm.asmC_SectionName}}</td>
                                <td>{{exm.estmP_TotalMaxMarks}}</td>
                                <td>{{exm.estmP_TotalObtMarks}}</td>
                                <td>{{exm.estmP_Percentage}}</td>
                                <td>{{exm.estmP_SectionRank}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <br />
                    <dir-pagination-controls max-size="5" pagination-id="page3"
                                             direction-links="true"
                                             boundary-links="true">
                    </dir-pagination-controls>
                </div>

                <hr />
                <div>
                    <div ng-show="otpcheck">
                        <label for="mobile" class="control-label col-sm-4" style="text-align:right"><b>Enter OTP :</b></label>
                        <div class="col-sm-3">
                            <input type="password" class="form-control" name="OTP Number" placeholder="ENTER OTP NUMBER" data-ng-model="forgetEmailOTP" ng-pattern="/^[0-9]+$/">
                        </div>

                        <button type="button" class="btn btn-primary btn-xs" ng-click="VerifyforgetEmailOtp(forgetEmailOTP)">
                            Submit
                        </button>
                        <button type="button" ng-show="resendotpbutton" class="btn btn-primary btn-xs" ng-click="sendotpsms(otptype)">
                            Resend OTP
                        </button>
                    </div>
                </div>
                <br />
                <div style="text-align:center">
                    <md-button type="button" ng-click="sendsms(obj)" ng-disabled="otpcheck" ng-show="smsdata" class="md-raised md-primary" id="submit">
                        SEND
                    </md-button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>