
<section class="content" ng-init="Loaddata()">
    <form class="form-horizontal ng-pristine ng-valid" role="form" name="myForm" method="post" novalidate>

        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">FOR STAFF BOOK TRANSACTION</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                </div>
            </div>

            <div class="box-body">
                <div class="row">

                    <div class="col-sm-6">
                        <div class="text-center well">

                            <div class="">
                                <!--<div class="well">
                    <div class="text-center">
                        <label class="radio-inline" ng-init="abc='cat1'">
                            <input name="optradio" type="radio" data-ng-model="abc" value="cat1" required>
                            <span class="lbl padding-8">Non-Categorywise</span>
                        </label>
                        <label class="radio-inline">
                            <input name="optradio" type="radio" data-ng-model="abc" value="cat2" required>
                            <span class="lbl padding-8">Categorywise</span>
                        </label>
                    </div>
                    <div class="error-messages" ng-if="interacted(myForm.optradio)" ng-messages="myForm.optradio.$error">
                        <div ng-message="required">Select any one of the radio button</div>
                    </div>
                </div>-->
                            </div>

                            <div class="">
                                <!--<div class="well">
                    <div class="text-center">
                        <label class="radio-inline" ng-init="cd='Nona'">
                            <input name="optradio1" type="radio" data-ng-model="cd" value="Nona" required>
                            <span class="lbl padding-8">No:Name</span>
                        </label>
                        <label class="radio-inline">
                            <input name="optradio1" type="radio" data-ng-model="cd" value="na" required>
                            <span class="lbl padding-8">Name:No</span>
                        </label>
                    </div>
                    <div class="error-messages" ng-if="interacted(myForm.optradio1)" ng-messages="myForm.optradio1.$error">
                        <div ng-message="required">Select any one of the radio button</div>
                    </div>
                </div>-->
                            </div>

                            <div class="">
                                <!--<div class="well">
                    <div class="text-center">
                        <label class="radio-inline" ng-init="xy='Acc'">
                            <input name="optradio3" type="radio" data-ng-model="xy" value="Acc" required>
                            <span class="lbl padding-8">Title:Accession No</span>
                        </label>
                        <label class="radio-inline">
                            <input name="optradio3" type="radio" data-ng-model="xy" value="title" required>
                            <span class="lbl padding-8">Accession No:Title</span>
                        </label>
                    </div>
                    <div class="error-messages" ng-if="interacted(myForm.optradio3)" ng-messages="myForm.optradio3.$error">
                        <div ng-message="required">Select any one of the radio button</div>
                    </div>
                </div>-->
                            </div>


                            <div class="form-group">
                                <label class="control-label col-sm-4">Book Title:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="bk" name="book" ng-model="LMBANO_Id" data-ng-change="get_bookdetails()" ng-disabled="BokStud" required>
                                        <!--ng-disabled="datalist"-->
                                        <option value="">--Select--</option>
                                        <option ng-repeat="user in booktitle" value="{{user.LMBANO_Id}}" ng-selected="{{user.LMBANO_Id == LMBANO_Id}}">
                                            {{user.LMB_BookTitle}}
                                        </option>
                                    </select>
                                    <div class="error-messages" ng-if="interacted(myForm.book)" ng-messages="myForm.book.$error">
                                        <div ng-message="required">Please Select Book Title</div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4">Staff Name:<span style="color:Red">*</span></label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="sel1" name="stud" ng-model="HRME_Id" data-ng-change="get_Staffdetails()" ng-disabled="BokStud" required>
                                        <!--ng-disabled="datalist"-->
                                        <option value="">--Select--</option>
                                        <option ng-repeat="user in stafftlist" value="{{user.hrmE_Id}}" ng-selected="{{user.Selected == true}}">
                                            {{user.hrmE_EmployeeFirstName}}
                                        </option>
                                    </select>
                                    <div class="error-messages" ng-if="interacted(myForm.stud)" ng-messages="myForm.stud.$error">
                                        <div ng-message="required">Please Select Staff Name</div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group" ng-show="issuedate">
                                <label class="control-label col-sm-4">Issue Date :<strong style="color:red;">*</strong></label>
                                <md-datepicker name="issue" ng-model="Issue_Date" md-placeholder="Select date" onkeydown="return false" md-max-date="maxDate" md-min-date="minDate" ng-change="ChangeDate(Issue_Date)" required></md-datepicker>
                                <div class="error-messages col-sm-offset-5" ng-if="interacted(myForm.issue)" ng-messages="myForm.issue.$error">
                                    <div ng-message="required">Select Date</div>

                                </div>
                            </div>

                            <div class="form-group" ng-show="returndate">
                                <!--ng-show="retrndate"-->
                                <label class="control-label col-sm-4">Return Date :<strong style="color:red;">*</strong></label>
                                <md-datepicker name="returndate" ng-model="Return_Date" onkeydown="return false" md-placeholder="Select date" md-min-date="Issue_Date" md-max-date="maxDatemf" ng-disabled="butnfield" required></md-datepicker>
                                <div class="error-messages col-sm-offset-5" ng-if="interacted(myForm.returndate)" ng-messages="myForm.returndate.$error">
                                    <div ng-message="required">Select Date</div>

                                </div>
                            </div>

                            <div class="form-group" ng-show="returndate">
                                <!--ng-show="duedate"-->
                                <label class="control-label col-sm-4">Due Date :<strong style="color:red;">*</strong></label>
                                <md-datepicker name="duedate" ng-model="Due_Date" onkeydown="return false" md-placeholder="Select date" md-min-date="Return_Date" ng-disabled="butnfield" required></md-datepicker>
                                <div class="error-messages col-sm-offset-5" ng-if="interacted(myForm.duedate)" ng-messages="myForm.duedate.$error">
                                    <div ng-message="required">Select Date</div>

                                </div>
                            </div>

                            <!--<div class="form-group" ng-show="status">
                <label class="control-label col-sm-4">Book-Status : <span style="color:Red">*</span></label>
                <div class="col-sm-8">
                    <select class="form-control" id="bokk" ng-model="Book_Trans_Status" name="bookst" required>
                        <option value="">--Select Field--</option>
                        <option value="Issue">Issue</option>
                        <option value="Return">Return</option>
                    </select>
                    <div class="error-messages" ng-if="interacted(myForm.bookst)" ng-messages="myForm.bookst.$error">
                        <div ng-message="required">Select the Book Status</div>
                    </div>
                </div>
            </div>-->


                        </div>
                    </div>



                    <div class="col-sm-6 col-sm-offset-0">

                        <!--<div class="well">-->
                        <!---------------ITEM DETAILS------------------>
                        <!--<div class="text-bold well">-->
                        <!--    <h5 class="box-title" style="text-align:center;">ITEM DETAILS</h5> -->

                        <div class="panel panel-default col-sm-12" style="padding:0px">
                            <div class="panel-heading" style="text-align:center; font:bold; font-size:18px">Item Details</div>
                            <div class="panel-body">

                                <div class="form-group">
                                    <label class="control-label col-sm-4">Title</label>
                                    <div class="col-sm-6">
                                        <label class="control-label"><b>: {{LMB_BookTitle}}</b></label>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-4">Vol. No.</label>
                                    <div class="col-sm-6">
                                        <label class="control-label"><b>: {{LMB_VolNo}}</b></label>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-4"> Entry Date</label>
                                    <div class="col-sm-6">
                                        <label class="control-label"><b>: {{LMB_EntryDate|date:'dd/MM/yyyy'}}</b></label>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-4">Price</label>
                                    <div class="col-sm-6">
                                        <label class="control-label"><b>: {{LMB_Price}}</b></label>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-4">Class No</label>
                                    <div class="col-sm-6">
                                        <label class="control-label"><b>: {{LMB_ClassNo}}</b></label>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!--</div>-->
                        <!---------------END ITEM DETAILS------------------>
                        <!---------------STAFF DETAILS------------------>
                        <!--<div class="text-bold well">-->
                        <!--   <h5 class="box-title" style="text-align:center;">STUDENT DETAILS</h5> -->

                        <div class="panel panel-default col-sm-12" style="padding:0px">
                            <div class="panel-heading" style="text-align:center; font:bold;  font-size:18px"> Staff Details </div>
                            <div class="panel-body">
                                <div class="col-sm-8 pull-left col-sm-offset-0">


                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Staff Code</label>
                                        <div class="col-sm-6">
                                            <label class="control-label"><b>: {{HRME_EmployeeCode}}</b></label>
                                        </div>
                                    </div>



                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Staff Name</label>
                                        <div class="col-sm-6">
                                            <label class="control-label"><b>: {{HRME_EmployeeFirstName}}</b></label>
                                        </div>
                                    </div>



                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Department</label>
                                        <div class="col-sm-6">
                                            <label class="control-label"><b>: {{HRMD_DepartmentName}}</b></label>
                                        </div>
                                    </div>



                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Phone No</label>
                                        <div class="col-sm-6">
                                            <label class="control-label"><b>: {{HRME_MobileNo}}</b></label>
                                        </div>
                                    </div>



                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Designation</label>
                                        <div class="col-sm-6">
                                            <label class="control-label"><b>: {{HRMDES_DesignationName}}</b></label>
                                        </div>
                                    </div>



                                </div>

                                <div class="col-sm-4 border pull-right">
                                    <div class="heading">Staff Photo</div>
                                    <img style="height:100px;width:100px;" src="{{HRME_Photo}}" />
                                </div>

                            </div>

                        </div>

                        <!--</div>-->
                        <!---------------END Staff DETAILS------------------>
                        <!--</div>-->
                    </div>
                            </div>

                            <hr />
                            <div class="">
                                <div class="text-center">
                                    <input type="hidden" ng-model="Book_Trans_Id" value="{{book_Trans_Id}}" />

                                    <md-button type="submit" class="md-raised md-primary" ng-disabled="form.$invalid" id="save-btn" ng-click="Savedata()" ng-show="issuebutton">
                                        <!--ng-show="issuebutton"-->
                                        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                        Issue
                                    </md-button>

                                    <md-button type="button" class="md-accent md-raised" ng-disabled="form.$invalid" id="save-btn" ng-click="returndata()" ng-show="showflag">
                                        <!--ng-show="disableflag"-->
                                        <i class="fa fa-share-square-o" aria-hidden="true"></i>
                                        Return
                                    </md-button>

                                    <md-button type="button" class="md-raised md-primary" ng-disabled="form.$invalid" id="save-btn" ng-click="renewaldata()" ng-show="showflag">
                                        <i class="fa fa-book" aria-hidden="true"></i>
                                        Renewal
                                    </md-button>

                                    <md-button type="button" class="md-raised md-warn" ng-click="cancel()">
                                        <i class="fa fa-times" aria-hidden="true"></i>
                                        Cancel
                                    </md-button>
                                </div>
                            </div>
                        </div>
                    </div>
    </form>


    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">FOR STAFF BOOK TRANSACTION LIST</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
            </div>
        </div>

        <!-- /.box-header -->
        <div class="box-body">

            <div class="col-sm-4">
                <div class="form-group">
                    <label class="control-label">
                        <b> Total Grid Records :</b>
                        <label class="badge">
                            {{getalldata.length}}
                        </label>
                    </label>
                </div>
            </div>

            <div class="col-sm-4">
                <div class="form-group" ng-if="search!=''">
                    <label class="control-label">
                        <b>Total Records Searched : </b>
                        <label class="badge">
                            {{filterValue.length}}
                        </label>
                    </label>
                </div>
            </div>

            <div class="col-sm-4 pull-right">
                <div class="form-group">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <i class="fa fa-search"></i>
                        </span>
                        <input class="form-control" type="text" ng-model="search" placeholder="search here...">
                    </div>
                </div>
            </div>

            <table class="table table-hover table-responsive table-bordered text-center">
                <thead>
                    <tr>
                        <th>
                            SL.No.
                        </th>
                        <th>
                            <a href="" ng-click="sort('hrmE_EmployeeFirstName')">Staff Name</a>
                        </th>
                        <th>
                            <a href="" ng-click="sort('LMB_BookType')">Book Type</a>
                        </th>
                        <th>
                            <a href="" ng-click="sort('LMBANO_AccessionNo')">Accession No.</a>
                        </th>
                        <th>
                            <a href="" ng-click="sort('LMB_BookTitle')">Book Title</a>
                        </th>
                        <th>
                            <a href="" ng-click="sort('issue_Date')">Issue Date</a>
                        </th>
                        <th>
                            <a href="" ng-click="sort('due_Date')"> Due Date</a>
                        </th>
                        <th>
                            <a href="" ng-click="sort('return_Date')"> Return Date</a>
                        </th>
                        <th>
                            <a href="" ng-click="sort('fine_Amount')">Fine Amount</a>
                        </th>
                        <th>
                            <a href="" ng-click="sort('renewal_Counter')">Renewal</a>
                        </th>
                        <th>
                            <a href="" ng-click="sort('book_Trans_Status')"> Book-Status</a>
                        </th>
                        <th>Return/Renewal</th>
                    </tr>
                </thead>
                <tbody>
                    <!--<tr ng-repeat="user in ccategorylist">-->
                    <tr dir-paginate="user in filterValue=(getalldata | filter : search) | orderBy:sortKey:reverse |itemsPerPage:itemsPerPage" current-page="currentPage">
                        <td>{{itemsPerPage *(currentPage-1)+$index+1}}</td>
                        <td>{{user.hrmE_EmployeeFirstName}}</td>
                        <td>{{user.LMB_BookType}}</td>
                        <td>{{user.LMBANO_AccessionNo}}</td>
                        <td>{{user.LMB_BookTitle}}</td>
                        <td>{{user.issue_Date | date:'dd/MM/yyyy'}}</td>
                        <td>{{user.due_Date | date:'dd/MM/yyyy'}}</td>
                        <td>{{user.return_Date | date:'dd/MM/yyyy'}}</td>
                        <td>{{user.fine_Amount}}</td>
                        <td>{{user.renewal_Counter}}</td>
                        <td>{{user.book_Trans_Status}}</td>
                        <td style="text-align:center">
                            <span ng-if="user.book_Trans_Status=='Issue'">
                                <input type="hidden" ng-model="Book_Trans_Id" value="{{book_Trans_Id}}" />
                                <a href="" data-toggle="modal" data-target="#editmodal" ng-click="EditData(user);" data-backdrop="static"><i class="fa fa-edit text-blue" ng-cl></i></a>
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
            <dir-pagination-controls max-size="5"
                                     direction-links="true"
                                     boundary-links="true">
            </dir-pagination-controls>
        </div>
    </div>

</section>