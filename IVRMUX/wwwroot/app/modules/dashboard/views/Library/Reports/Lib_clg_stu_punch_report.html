<section class="content">
    <form class="form-horizontal ng-pristine ng-valid" name="myForm" role="form" novalidate>
        <div data-ng-init="Onloadpage()">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Library Punch Report</h3>
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Academic Year:<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel11" name="year" ng-model="ASMAY_Id" ng-change="loadcourse()" required>
                                            <option value="">--Select--</option>
                                            <option ng-repeat="clas in yearlist" value="{{clas.asmaY_Id}}" ng-selected="{{clas.Selected==true}}">
                                                {{clas.asmaY_Year}}
                                            </option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.year)" ng-messages="myForm.year.$error">
                                            <div ng-message="required">Please Select Year <i class="fa fa-exclamation"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Course :<span style="color:red;">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel1" ng-model="AMCO_Id" ng-change="loadbranch()" name="crse" required>
                                            <option value="" label="">--Select--</option>
                                            <option ng-repeat="cr in courselist" value="{{cr.amcO_Id}}" ng-selected="{{cr.Selected == true}}">
                                                {{cr.amcO_CourseName}}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.crse)" ng-messages="myForm.crse.$error">
                                        <div ng-message="required">Please Select Course  <i class="fa fa-exclamation"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Branch :<span style="color:red;">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel1" ng-model="AMB_Id" ng-change="loadsemester()" name="brnch" required>
                                            <option value="" label="">--Select--</option>
                                            <option ng-repeat="br in branchlist" value="{{br.amB_Id}}" ng-selected="{{br.Selected == true}}">
                                                {{br.amB_BranchName}}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted(myForm.brnch)" ng-messages="myForm.brnch.$error">
                                        <div ng-message="required">Select Branch  <i class="fa fa-exclamation"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="sel2" class="control-label col-sm-4">Semester:<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel12vv" name="semis" ng-model="AMSE_Id" ng-change="loadsection()" required>
                                            <option value="">--Select--</option>
                                            <option ng-repeat="semi in semisterlist" value="{{semi.amsE_Id}}" ng-selected="{{semis.Selected==true}}">
                                                {{semi.amsE_SEMName}}
                                            </option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.semis)" ng-messages="myForm.semis.$error">
                                            <div ng-message="required">Select Semester  <i class="fa fa-exclamation"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Section :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sm" name="secdd" ng-model="ACMS_Id" required ng-change="loadstudents()">
                                            <option value="">Select</option>
                                            <option ng-repeat="sec in sectionlist" value="{{sec.acmS_Id}}" ng-selected="{{sec.Selected == true}}">{{sec.acmS_SectionName}}</option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.secdd)" ng-messages="myForm.secdd.$error">
                                            <div ng-message="required">Please Select Section  <i class="fa fa-exclamation"></i></div>
                                        </div>
                                    </div>



                                    <div class="form-group">
                                        <label class="control-label col-sm-4">
                                            From Date:<strong style="color:red;display:inline; font-weight: bolder; margin-left: 1px;">
                                                *
                                            </strong>
                                        </label>
                                        <div class="col-sm-8">
                                            <md-datepicker ng-model="fromdate" onkeydown="return false" name="from_date" id="FromDate"
                                                           md-min-date="minDatef" md-max-date="maxDatef" md-placeholder="Enter date" required></md-datepicker>
                                            <div class="error-messages" ng-if="interacted(myForm.from_date)" ng-messages="myForm.from_date.$error">
                                                <div ng-message="required" style="color:red">Select From Date  <i class="fa fa-exclamation"></i></div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <label class="control-label col-sm-4">To Date:<strong style="color:red;display:inline; font-weight: bolder; margin-left: 1px;">*</strong></label>
                                        <div class="col-sm-8">
                                            <md-datepicker ng-model="todate" onkeydown="return false" name="to_date" id="todate" md-min-date="minDatet" md-max-date="maxDatet" md-placeholder="Enter date"
                                                           required></md-datepicker><!--ng-disabled="todatef"-->
                                            <div class="error-messages" ng-if="interacted(myForm.to_date)" ng-messages="myForm.to_date.$error">
                                                <div ng-message="required" style="color:red">
                                                    Select To Date <i class="fa fa-exclamation"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <span style="color:red;">{{errMessage}}</span>
                                    </div>
                                </div>

                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-3">
                                        <input name="allcheck" value="" ng-model="all" type="checkbox" ng-click="OnClickAll()">
                                        <span class="lbl padding-8">
                                            Student :
                                        </span><span style="color:Red">*</span>
                                    </label>
                                    <div class="multiselect col-sm-8">
                                        <input class="form-control" ng-model="searchchkbx" type="text" placeholder="search here..." style="margin:1%;">
                                        <label ng-repeat="stu in studentlist | filter :searchchkbx">
                                            <input name="option1" value="{{stu.amcsT_Id}}" type="checkbox" ng-model="stu.AMCST_Id"
                                                   ng-required="isOptionsRequired1();" ng-click="individual()">
                                            <span class="lbl padding-8">{{stu.amcsT_Name}}</span>
                                        </label>
                                    </div>
                                    <div class="col-sm-3"></div>
                                    <div class="col-sm-8 error-messages" ng-if="interacted(myForm.option1)" ng-messages="myForm.option1.$error">
                                        <div ng-message="required">Select Atleast One Student  <i class="fa fa-exclamation"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <hr />
                    <div class="text-center">
                        <md-button type="button" class="md-raised md-primary" ng-click="clgpunchreport()">
                            <i class="fa-solid fa-fingerprint" aria-hidden="true"></i>
                            Punch Report
                        </md-button>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Library Punch Report</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div class="box-body">
            <div style="overflow:scroll">
                <table class="table table-responsive table-bordered">
                    <thead>
                        <tr>
                            <th>Admission Number</th>
                            <th>Student Name</th>
                            <!--<th>Punch Date</th>-->
                            <th>In/Out</th>
                            <th ng-repeat="columnname in columnnames" nowrap>{{ columnname | date:'dd-MMM'}}<br /> {{ columnname | date:'EEEE' | limitTo:3}}</th>
                            <!--<th>Punch Time</th>-->
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in puncharray">
                            <td>{{ item.AMST_AdmNo }}</td>
                            <td>{{ item.Student_Name }}</td>
                            <td>
                                <table class="table">
                                    <tr>
                                        <td>In</td>
                                    </tr>
                                    <tr> <td>Out</td></tr>
                                </table>
                            </td>
                            <td ng-repeat="columnname1 in columnnames">
                                <span ng-repeat="punch in item.pdate" ng-if="(punch.punchdate|date:'dd/MM/yyyy')==(columnname1|date:'dd/MM/yyyy') ">
                                    <span ng-if="punch.In_Out=='I'" style="color:red"> {{punch.punchtime}}</span>
                                    <span ng-if="punch.In_Out=='O'"> {{punch.punchtime}}</span>
                                </span>

                                <!--<table class="table">
                                    <tr>
                                        <td ng-repeat="columnname1 in columnnames">
                                            <span ng-repeat="punch in item.pdate" ng-if="(punch.punchdate|date:'dd/MM/yyyy')==(columnname1|date:'dd/MM/yyyy') ">{{punch.punchtime}} --{{punch.punchdate}}</span>
                                        </td>
                                    </tr>
                                </table>-->
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</section>