<style>
    .panel-heading {
        cursor: pointer;
    }
    .btns {
        margin-top: -60px;
        margin-left: -29px;
    }

    .sndbtn2 {
        margin-right: 429px;
        margin-top: -1px;
    }

    .imgvi {
        margin-top: -11px;
        margin-left: 24px;
    }

    .upd1 {
        margin-left: 126px;
    }

    .upd2 {
        margin-left: 141px;
        padding-right: 19px;
    }

    .faa {
        margin-left: 8px;
    }

    .faa1 {
        margin-left: 8px;
    }


    .mainimg {
        margin-left: 397px;
    }

    .mainimg1 {
        margin-left: -7px;
    }

    .mainimg2 {
        margin-left: 0px;
    }

    .eyebtn {
        margin-top: -58px;
        margin-left: 177px;
    }

    .img-bordered {
        border: 3px solid #d2d6de;
        padding: 3px;
        margin-top: -142px;
        margin-left: 82px;
    }

    .modal-title {
        margin: 0;
        line-height: 1.428571;
        margin-bottom: -23px;
    }

    .ffffff {
        margin-top: -5px;
    }

    .xone {
        margin-left: 372px;
    }

    .yone {
        margin-left: 372px;
    }

    .xtwo {
        margin-left: 372px;
    }

    .ytwo {
        margin-left: 372px;
    }
    .spnview {
        margin-left: 0px;
    } .spnview1 {
        margin-left: 10px;
    }
</style>
<link href="../css/print/PortalInteraction/interaction.css" rel="stylesheet" />
<section class="content" data-ng-init="loaddata()">
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Interactions</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div ng-if="roleflg=='Staff' || roleflg=='HOD'">
            <md-content>
                <md-tabs md-dynamic-height md-border-bottom>
                    <md-tab label="Inbox" ng-click="oninbox()">
                    </md-tab>
                    <md-tab label="Group" ng-click="typechangeG()">
                    </md-tab>
                    <md-tab label="Individual" ng-click="typechangeI()">
                    </md-tab>
                </md-tabs>
            </md-content>
        </div>
        <div ng-if="roleflg=='Student'">
            <md-content>
                <md-tabs md-dynamic-height md-border-bottom>
                    <md-tab label="Inbox" ng-click="oninbox()">
                    </md-tab>
                    <md-tab label="Compose" ng-click="typechangeI()">
                    </md-tab>
                </md-tabs>
            </md-content>
        </div>
        <div class="box-body">
            <form class="form-horizontal ng-pristine ng-valid" name="myForm" role="form" novalidate>
                <div ng-if="composehead">
                    <!--*************************** User Details*************************** -->
                    <div class="box-body">
                        <div class="col-sm-10 col-sm-offset-1">
                            <div class="form-group">
                                <div class="text-center well">
                                    <div ng-if="roleflg=='Staff' || roleflg=='HOD' || roleflg=='Principal' || roleflg=='AcademicSupervisor' || roleflg=='ExamCoordinator'">
                                        <label class="radio-inline">
                                            <input type="radio" value="Student" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">Student</span>
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" value="Teachers" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">Teachers</span>
                                        </label>
                                        <div ng-if="ISMINT_GroupOrIndFlg=='Individual'">
                                            <label class="radio-inline" ng-if="hodflag" ng-hide="roleflg=='HOD'">
                                                <input type="radio" value="HOD" name="user" ng-hide="roleflg=='HOD'" ng-model="obj.userflag" ng-change="getdetail()">
                                                <span class="lbl padding-8">HOD</span>
                                            </label>
                                            <label class="radio-inline">
                                                <input type="radio" value="Principal" name="user" ng-hide="roleflg=='Principal'" ng-model="obj.userflag" ng-change="getdetail()">
                                                <span class="lbl">Principal</span>
                                            </label>
                                            <label class="radio-inline">
                                                <input type="radio" value="AS" name="user" ng-model="obj.userflag" ng-hide="roleflg=='AcademicSupervisor'" ng-change="getdetail()">
                                                <span class="lbl padding-8">Academic Supervisor</span>
                                            </label>
                                            <label class="radio-inline">
                                                <input type="radio" value="EC" name="user" ng-model="obj.userflag" ng-hide="roleflg=='ExamCoordinator'" ng-change="getdetail()">
                                                <span class="lbl padding-8">Exam Coordinator</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div ng-if="roleflg=='Student'">
                                        <label class="radio-inline" ng-if="stflag">
                                            <input type="radio" value="SubjectTeacher" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">Subject Teacher</span>
                                        </label>
                                        <!--<label class="radio-inline" ng-show="ctflag">
                                            <input type="radio" value="ClassTeacher" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">Class Teacher </span>
                                        </label>-->
                                        <label class="radio-inline" ng-if="hodflag">
                                            <input type="radio" value="HOD" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">HOD</span>
                                        </label>
                                        <label class="radio-inline" ng-if="principalflag">
                                            <input type="radio" value="Principal" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">Principal</span>
                                        </label>
                                        <label class="radio-inline" ng-if="asflag">
                                            <input type="radio" value="AS" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">Academic Supervisor</span>
                                        </label>
                                        <label class="radio-inline" ng-if="ecflag">
                                            <input type="radio" value="EC" name="user" ng-model="obj.userflag" ng-change="getdetail()">
                                            <span class="lbl padding-8">Exam Coordinator</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <!-- ************************************** Apply For Staff Login ***************************************** -->
                            <div class="form-group" ng-if="obj.userflag=='Student' && getdetails.length>0">
                                <div class="col-sm-6 col-sm-offset-3">
                                    <div ng-if="groupindvalue">
                                        <div class="multiselect col-sm-8" style="height: 200px;">
                                            <select class="form-control" ng-model="amcO_Id" name="clssec" ng-change="getbranch(amcO_Id);">
                                                <option value="">Select Course </option>
                                                <option ng-repeat="cls in getdetails" value="{{cls.AMCO_Id}}">{{cls.AMCO_CourseName}}</option>
                                            </select>
                                            <select class="form-control" ng-model="obj.amB_Id" ng-if="branchList.length>0" name="sec" ng-change="getsemester();">
                                                <option value="">Select Branch </option>
                                                <option ng-repeat="sec in branchList" value="{{sec.amB_Id}}">{{sec.amB_BranchName}}</option>
                                            </select>
                                            <select class="form-control" ng-model="obj.amsE_Id" ng-if="semesterList.length>0" name="sem" ng-change="getsection();">
                                                <option value="">Select Semester </option>
                                                <option ng-repeat="sec in semesterList" value="{{sec.amsE_Id}}">{{sec.amsE_SEMName}}</option>
                                            </select>


                                            <select class="form-control" ng-model="obj.acmS_Id" ng-if="sectionList.length>0" name="sem" ng-change="getstudent();">
                                                <option value="">Select Section </option>
                                                <option ng-repeat="sec in sectionList" value="{{sec.acmS_Id}}">{{sec.acmS_SectionName}}</option>
                                            </select>


                                            <span ng-if="getdetails.length>0">
                                                <input class="form-control" ng-model="search1" type="text" placeholder="search Student here...">
                                            </span>
                                            <label>
                                                <input name="classes" value="1" ng-model="usercheckSTU" type="checkbox" ng-click="all_checkSTU(usercheckSTU)">
                                                <span class="lbl padding-8">
                                                    All
                                                </span>
                                            </label>
                                            <label ng-model="amcsT_Id" ng-repeat="user in get_student | filter : search1">
                                                <input name="student" ng-model="user.stuck" type="checkbox" ng-click="togchkbxSTU();" ng-required="isOptionsRequiredSTU()">
                                                <span class="lbl padding-8">
                                                    {{user.studentName}} : {{user.AMCST_AdmNo}}
                                                </span>
                                            </label>
                                        </div>
                                        <div class="error-messages col-sm-8" ng-if="interacted(myForm.student)" ng-messages="myForm.student.$error">
                                            <div ng-message="required">Please Select Atleast One Checkbox</div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="!groupindvalue">
                                    <div class="form-group">
                                        <label class="control-label col-sm-2 col-sm-offset-2">Course :<span style="color:Red">*</span></label>
                                        <div class="col-sm-5">
                                            <select class="form-control" ng-model="amcO_Id" name="clssec" ng-change="getbranch(amcO_Id);">
                                                <option value="">Select Course </option>
                                                <option ng-repeat="cls in getdetails" value="{{cls.AMCO_Id}}">{{cls.AMCO_CourseName}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-if="branchList.length>0">
                                        <label class="control-label col-sm-2 col-sm-offset-2">Branch :<span style="color:Red">*</span></label>
                                        <div class="col-sm-5">
                                            <select class="form-control" ng-model="obj.amB_Id" name="sec" ng-change="getsemester();">
                                                <option value="">Select Branch </option>
                                                <option ng-repeat="sec in branchList" value="{{sec.amB_Id}}">{{sec.amB_BranchName}}</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group" ng-if="semesterList.length>0">
                                        <label class="control-label col-sm-2 col-sm-offset-2">Semester :<span style="color:Red">*</span></label>
                                        <div class="col-sm-5">
                                            <select class="form-control" ng-model="obj.amsE_Id" name="sec3" ng-change="getsection();">
                                                <option value="">Select Semester </option>
                                                <option ng-repeat="sec in semesterList" value="{{sec.amsE_Id}}">{{sec.amsE_SEMName}}</option>
                                            </select>
                                        </div>
                                    </div>


                                    <div class="form-group" ng-if="sectionList.length>0">
                                        <label class="control-label col-sm-2 col-sm-offset-2">Section :<span style="color:Red">*</span></label>
                                        <div class="col-sm-5">
                                            <select class="form-control" ng-model="obj.acmS_Id" name="sec5" ng-change="getstudent();">
                                                <option value="">Select Section </option>
                                                <option ng-repeat="sec in sectionList" value="{{sec.acmS_Id}}">{{sec.acmS_SectionName}}</option>
                                            </select>
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div ng-if="get_student.length>0">
                                            <label class="control-label col-sm-2 col-sm-offset-2">Student :<span style="color:Red">*</span></label>
                                            <div class="col-sm-5">
                                                <ui-select id="sel1" name="student" ng-model="obj.amcsT_Id" theme="bootstrap" ng-keyup="searchfilter($select);" title="Select Student" ng-required="(optionflag==!groupindvalue) && (obj.userflag=='Student')">
                                                    <ui-select-match ng-trim="false" placeholder="Select or search Student in the list...">{{$select.selected.studentName}}</ui-select-match>
                                                    <ui-select-choices repeat="option in get_student | filter: $select.search " value="{{option.AMCST_Id}}" ng-selected="{{option.Selected == true}}">
                                                        <div ng-bind-html="option.studentName +':'+ option.AMCST_AdmNo| highlight: $select.search"></div>
                                                    </ui-select-choices>
                                                </ui-select>
                                                <div class="error-messages" ng-if="interacted(myForm.student)" ng-messages="myForm.student.$error">
                                                    <div ng-message="required">Please Select Student </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" ng-if="obj.userflag=='Teachers' && getdetails.length>0">
                                <div ng-if="groupindvalue">
                                    <div class="col-sm-6 col-sm-offset-3">
                                        <div class="multiselect col-sm-8">
                                            <span ng-if="getdetails.length>0">
                                                <input class="form-control" ng-model="searchValue" type="text" placeholder="search Employee here...">
                                            </span>
                                            <label>
                                                <input name="classes" value="1" ng-model="usercheckT" type="checkbox" ng-click="all_checkT(usercheckT)">
                                                <span class="lbl padding-8">
                                                    All
                                                </span>
                                            </label>
                                            <label ng-model="hrmE_Id" ng-repeat="user in getdetails | filter : searchValue">
                                                <input name="teacher" ng-model="user.tck" type="checkbox" ng-click="togchkbxT();" ng-required="isOptionsRequiredT()">
                                                <span class="lbl padding-8">
                                                    {{user.EmpName}}
                                                </span>
                                            </label>
                                        </div>
                                        <div class="error-messages col-sm-8" ng-if="interacted(myForm.teacher)" ng-messages="myForm.teacher.$error">
                                            <div ng-message="required">Please Select Atleast One Checkbox</div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="!groupindvalue">
                                    <div class="form-group">
                                        <label class="control-label col-sm-2 col-sm-offset-2">Teacher :<span style="color:Red">*</span></label>
                                        <div class="col-sm-5">
                                            <ui-select id="sel1" name="teacher" ng-model="obj.hrmE_Id" theme="bootstrap" ng-keyup="searchfilter($select);" title="Select Teacher" ng-required="(optionflag==!groupindvalue) && (obj.userflag=='Teachers')">
                                                <ui-select-match ng-trim="false" placeholder="Select or search Teacher in the list...">{{$select.selected.EmpName}}</ui-select-match>
                                                <ui-select-choices repeat="option in getdetails | filter: $select.search " value="{{option.HRME_Id}}" ng-selected="{{option.Selected == true}}">
                                                    <div ng-bind-html="option.EmpName +':'+ option.HRME_EmployeeCode| highlight: $select.search"></div>
                                                </ui-select-choices>
                                            </ui-select>
                                            <div class="error-messages" ng-if="interacted(myForm.student)" ng-messages="myForm.student.$error">
                                                <div ng-message="required">Please Select Teacher </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- ************************************** Apply For Student Login ****************************************-->
                            <div class="col-sm-8 col-sm-offset-2">
                                <div class="form-group" ng-if="obj.userflag=='SubjectTeacher' && roleflg=='Student' && getdetails.length>0">
                                    <div class="form-group">
                                        <div ng-if="getdetails.length>0">
                                            <label class="control-label col-sm-4">Subject Teacher :<span style="color:Red">*</span></label>
                                            <div class="col-sm-8">
                                                <ui-select id="sel1" name="subjteacher" ng-model="obj.HRME_Id" theme="bootstrap" ng-keyup="searchfilter($select);" title="Select Subject Teacher" ng-required="(obj.userflag=='SubjectTeacher') && (roleflg=='Student') && (getdetails.length>0)">
                                                    <ui-select-match ng-trim="false" placeholder="Select or search Subject Teacher in the list...">{{$select.selected.EmpName}}:{{$select.selected.ISMS_SubjectName}} </ui-select-match>
                                                    <ui-select-choices repeat="option in getdetails | filter: $select.search " value="{{option.HRME_Id}}" ng-selected="{{option.Selected == true}}">
                                                        <div ng-bind-html="option.ISMS_SubjectName +':'+ option.EmpName| highlight: $select.search"></div>
                                                    </ui-select-choices>
                                                </ui-select>
                                                <div class="error-messages" ng-if="interacted(myForm.subjteacher)" ng-messages="myForm.subjteacher.$error">
                                                    <div ng-message="required">Please Select Subject Teacher </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--<div class="col-sm-6 col-sm-offset-3">
                                <div class="form-group" ng-if="obj.userflag=='ClassTeacher' && roleflg=='Student' && getdetails.length>0">
                                    <input type="text" class="form-control active text-center" name="employee" value="hrmE_Id" ng-model="empName" ng-disabled="true" />
                                </div>
                            </div>-->
                            <!-- ************************************** Apply For all Login  ****************************************-->
                            <div class="col-sm-6 col-sm-offset-3">
                                <div class="form-group" ng-if="obj.userflag=='HOD' && getdetails.length>0">
                                    <input type="text" class="form-control active text-center" name="hod" value="hrmE_Id" ng-model="empName" ng-disabled="true" />
                                </div>
                                <div class="form-group" ng-if="obj.userflag=='Principal' && getdetails.length>0">
                                    <input type="text" class="form-control active text-center" name="principal" value="hrmE_Id" ng-model="empName" ng-disabled="true" />
                                </div>

                                <div class="form-group" ng-if="obj.userflag=='AS' && getdetails.length>0">
                                    <input type="text" class="form-control active text-center" name="as" value="hrmE_Id" ng-model="empName" ng-disabled="true" />
                                </div>

                                <div class="form-group" ng-if="obj.userflag=='EC' && getdetails.length>0">
                                    <input type="text" class="form-control active text-center" name="ec" value="hrmE_Id" ng-model="empName" ng-disabled="true" />
                                </div>
                            </div>
                        </div>
                        <!--*************************** Compose Message************************ -->
                        <div class="col-sm-10 col-sm-offset-1">
                            <div class="box box-primary">
                                <div class="box-header with-border">
                                    <h3 class="box-title col-sm-9">New Message</h3>
                                    <h2 class="box-title">{{isminT_DateTime | date:'MM/dd/yyyy  h:mma'}}</h2>
                                </div>
                                <div class="box-body">
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="control-label col-sm-2 col-sm-offset-1"><b>Subject :</b><span style="color:Red">*</span></label>
                                            <div class="col-sm-8">
                                                <input type="text" name="subject" class="form-control active" placeholder="Interaction Subject" data-ng-model="obj.isminT_Subject" required>
                                                <div class="error-messages" ng-if="interacted(myForm.subject)" ng-messages="myForm.subject.$error">
                                                    <div ng-message="required">Enter Message Subject</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-sm-3"></label>
                                            <div class="col-sm-8">
                                                <textarea class="form-control" name="message" rows="5" id="comment" ng-model="obj.isminT_Interaction" placeholder="Message" required></textarea>
                                                <div class="error-messages" ng-if="interacted(myForm.message)" ng-messages="myForm.message.$error">
                                                    <div ng-message="required">Enter Message</div>
                                                </div>
                                            </div>
                                        </div>

                                        <!--image upload start-->
                                        <div class="form-group" ng-if="obj.userflag && getdetails.length>0">
                                            <div class="col-sm-3 col-sm-offset-1">
                                                <label for="upload-I" class="btn btn-primary upd1">Upload<i class="fa fa-upload faa1" aria-hidden="true"></i></label>
                                                <input id="upload-I" type="file" data-ng-model="Images" accept="image/png, image/jpeg" name="Images_name"
                                                       multiple onchange="angular.element(this).scope().imageUpload(this)" ng-hide="hidec==0" />
                                            </div>
                                        </div>



                                        <div class="text-center" ng-if="obj.userflag && getdetails.length>0">
                                            <input type="hidden" ng-model="isminT_Id" value="{{isminT_Id}}" />
                                            <md-button type="button" ng-click="savedata()" class="md-raised md-primary btns">
                                                <i class="fa fa-paper-plane " aria-hidden="true"></i> Send
                                            </md-button>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div>
                                                    <div class="imgview" ng-show="stepsModel.length>0">
                                                        <div class="row">
                                                            <div class="col-sm-2" ng-repeat="step in stepsModel track by $index">
                                                                <img class="img-responsive img-bordered" ng-src="{{step}}" ng-click="previewimg(step)" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--image upload end-->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
               
                <!--********************************* InBOX ******************************* -->
                <div class="col-sm-12">
                    <div class="box box-primary" ng-if="inboxtab">
                        <div class="box-header with-border">
                            <h3 class="box-title col-sm-9">
                                Message Inbox
                                <span class="fa-stack fa-1x">
                                    <i class="fa fa-comment fa-stack-2x"></i>
                                    <strong class="fa-stack-1x fa-stack-text fa-inverse" title="You have {{inboxtotal}} message in your inbox"><b>{{inboxtotal}}</b></strong>
                                </span>
                            </h3>
                            <i class="fa fa-refresh " aria-hidden="true" ng-click="refresh()" title="Refresh">&nbsp;</i>
                            <h2 class="box-title">{{isminT_DateTime | date:'MM/dd/yyyy  h:mma'}}</h2>
                        </div>
                        <div class="box-body">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="panel-group accordion">
                                        <div class="panel panel-default" ng-repeat="msg in message_list">
                                            <div class="panel-heading" data-toggle="collapse" data-parent=".accordion" data-target=".{{msg.ISTINT_Id}}">
                                                <div class="row">
                                                    <div class="col-sm-1 text-left">
                                                        <span ng-if="msg.ISMINT_GroupOrIndFlg=='Group'">
                                                            <i class="fa fa-users ml-1" style="color:#2757a6;"></i>
                                                        </span>
                                                        <span ng-if="msg.ISMINT_GroupOrIndFlg=='Individual'">
                                                            <i class="fa fa-user ml-1" style="color:green;"></i>
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-5 text-left">
                                                        <span class="panel-title" style="font-weight: 700;">
                                                            <a>
                                                                {{msg.ISMINT_Subject}}
                                                            </a>
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-3 text-left">
                                                        <span ng-if="roleflg=='Staff'">
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Staff'">
                                                                <span style="font-weight:600;" ng-if="msg.ISMINT_GroupOrIndFlg=='Individual'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">TO:</span>{{msg.Receiver}}
                                                                </span>
                                                            </span>
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Student'">
                                                                <span style="font-weight:600;" ng-if="msg.ISMINT_GroupOrIndFlg=='Individual'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">From :</span>{{msg.Sender}}
                                                                </span>
                                                            </span>
                                                        </span>
                                                        <span ng-if="roleflg=='Student'">
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Student'">
                                                                <span style="font-weight:600;" ng-if="msg.ISMINT_GroupOrIndFlg=='Individual'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">TO:</span>{{msg.Receiver}}
                                                                </span>
                                                            </span>
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Staff'">
                                                                <span style="font-weight:600;" ng-if="msg.ISMINT_GroupOrIndFlg=='Individual'">
                                                                    &nbsp;&nbsp;
                                                                    <span style="font-weight:700;">From :</span>{{msg.Sender}}
                                                                </span>
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-2 text-right" style="font-weight:700;">
                                                        {{msg.ISMINT_DateTime | date:'dd/MM/yyyy  h:mma'}}
                                                    </div>
                                                    <div class="col-sm-1 text-right">
                                                        <span ng-if="roleflg=='Staff'">
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Staff'">
                                                                <i class="fa fa-paper-plane ml-1" style="color:dodgerblue;">
                                                                </i>
                                                            </span>
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Student'">
                                                                <i class="fa fa-envelope ml-1" style="color:#2757a6;"></i>
                                                            </span>
                                                        </span>
                                                        <span ng-if="roleflg=='Student'">
                                                            <span ng-if="msg.ISMINT_ComposedByFlg=='Student'">
                                                                <i class="fa fa-paper-plane ml-1" style="color:dodgerblue;"></i>
                                                            </span>
                                                            <span ng-if="msg.ISMINT_GroupOrIndFlg=='Staff'">
                                                                <i class="fa fa-envelope ml-1" style="color:#2757a6;"></i>
                                                            </span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel-collapse collapse {{msg.ISTINT_Id}}">
                                                <div class="panel-body">
                                                    <div class="col-sm-7 text-left">
                                                        {{msg.ISMINT_Interaction}}


                                                    </div>
                                                    <div class="col-sm-3 text-center">


                                                        <span  ng-if="msg.ISTINT_Attachment!=''&& msg.filetype2=='jpg' || msg.filetype2=='png' || msg.filetype2=='svg'|| msg.filetype2=='jpeg' || msg.filetype2=='gif'">
                                                            <a class="text-aqua" href="" ng-click="viewphoto2(msg.ISTINT_Attachment)" data-placement="bottom" data-toggle="tooltip" title="View">
                                                                <i class="fa fa-file-image-o" aria-hidden="true"></i>
                                                            </a>
                                                        </span>

                                                        <span  ng-if="msg.ISTINT_Attachment!='' && msg.filetype2=='pdf' ">
                                                            <a class="text-aqua" href="" ng-click="previewpdf(msg.ISTINT_Attachment)" data-placement="bottom" data-toggle="modal" data-target="#showpdf1" title="View">
                                                                <i class="fa fa-file-image-o" aria-hidden="true"></i>
                                                            </a>
                                                        </span>


                                                    </div>
                                                    <div class="col-sm-2 text-right">
                                                        <span class="spnview">
                                                            <a href="javascript:void(0)" class="text-primary" data-placement="bottom" data-toggle="modal" title="View" data-ng-model="reply" data-target="#viewrplyModal" data-ng-click="reply(msg)">
                                                                <i class="fa fa-bars fa-1x" aria-hidden="true">View & Reply</i>
                                                            </a>
                                                        </span>
                                                       
                                                        <span  class="spnview1" ng-show="userhrmE_Id==msg.ISMINT_ComposedById">
                                                            <a class="text-aqua" href="" ng-click="deleteinboxmsg(msg)" data-placement="bottom" data-toggle="tooltip" title="delete">
                                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                            </a>
                                                        </span>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!--================== View Reply Model============== -->
    <div class="modal fade" id="viewrplyModal" role="dialog" data-backdrop="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="fa fa-times text-white" aria-hidden="true"></i>
                    </button>
                    <h4 class="modal-title text-white" style="text-align:center">{{subject}}</h4>

                    <span class="xone" ng-if="ISTINT_Attachment!=''&& filetype1=='jpg' || filetype1=='png' || filetype1=='svg'|| filetype1=='jpeg' || filetype1=='gif'">
                        <a class="text-aqua" href="" ng-click="viewphoto1(ISTINT_Attachment)" data-placement="bottom" data-toggle="tooltip" title="View">
                            <i class="fa fa-file-image-o" aria-hidden="true"></i>
                        </a>
                    </span>

                    <span class="yone" ng-if="ISTINT_Attachment!='' && filetype1=='pdf' ">
                        <a class="text-aqua" href="" ng-click="previewpdf(ISTINT_Attachment)" data-placement="bottom" data-toggle="modal" data-target="#showpdf1" title="View">
                            <i class="fa fa-file-image-o" aria-hidden="true"></i>
                        </a>
                    </span>



                    <!--<button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>-->
                </div>
                <div class="modal-body" ng-if="roleflg=='Staff' || roleflg=='HOD' || roleflg=='Principal' || roleflg=='AcademicSupervisor' || roleflg=='ExamCoordinator'">
                    <div class="row">
                        <h5 class="modal-title" style="text-align:center">{{subjdetails}}</h5>
                        <div class="col-sm-12">
                            <table class="table table-hover table-responsive table-bordered text-center">
                                <thead>
                                    <tr>
                                        <th>SL NO</th>
                                        <th width="50%"><a href="" ng-click="sort('ISTINT_Interaction')">Interaction</a></th>
                                        <th>Image</th>
                                        <th><a href="" ng-click="sort('IINTSS_Date')">Reply By </a></th>
                                        <!--<th><a href="" ng-click="sort('IINTSS_Date')">To </a></th>-->
                                        <th><a href="" ng-click="sort('IINTSS_Date')">Date </a></th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="rply in viewmessage | orderBy:-ISTINT_Interaction |filter:search">
                                        <td style="width:50px;">{{$index+1}}</td>
                                        <td style="overflow-wrap:break-word">{{ rply.ISTINT_Interaction}}</td>
                                        <td>
                                            <span ng-if="rply.ISTINT_Attachment!=''&& rply.filetype=='jpg' || rply.filetype=='png' || rply.filetype=='svg'|| rply.filetype=='jpeg' || rply.filetype=='gif'">
                                                <a class="text-aqua" href="" ng-click="viewphoto(rply)" data-placement="bottom" data-toggle="tooltip" title="View">
                                                    <i class="fa fa-file-image-o" aria-hidden="true"></i>
                                                </a>
                                            </span>

                                            <span ng-if="rply.ISTINT_Attachment!='' && rply.filetype=='pdf' ">
                                                <a class="text-aqua" href="" ng-click="previewpdf(rply.ISTINT_Attachment)" data-placement="bottom" data-toggle="modal" data-target="#showpdf1" title="View">
                                                    <i class="fa fa-file-image-o" aria-hidden="true"></i>
                                                </a>
                                            </span>




                                            <span ng-if="rply.ISTINT_Attachment==''">---</span>

                                        </td>
                                        <td style="overflow-wrap:break-word">{{ rply.Sender}}</td>
                                        <!--<td style="overflow-wrap:break-word">{{ rply.Receiver}}</td>-->
                                        <!--<td style="width:50px;" ng-if="rply.IINTSS_ByFlg=='Student'"> <i class="fa fa-graduation-cap  fa-1x" aria-hidden="true"></i></td>
                                        <td style="width:50px;" ng-if="rply.IINTSS_ByFlg=='Staff'"> <i class="fa fa-user fa-1x" aria-hidden="true"></i></td>-->
                                        <td style="overflow-wrap:break-word; width:105px;">{{rply.ISTINT_DateTime | date:'medium'}}</td>
                                        <td>
                                            <span ng-show="userhrmE_Id==rply.ISTINT_ComposedById">
                                                <a class="text-aqua" href="" ng-click="deletemsg(rply)" data-placement="bottom" data-toggle="tooltip" title="delete">
                                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                                </a>
                                            </span>
                                            <!--<span ng-if="userhrmE_Id!==rply.ISTINT_ComposedById">
                                                <a class="text-aqua" href="" ng-click="deletemsg(rply)" data-placement="bottom" data-toggle="tooltip" title="delete">
                                                    <i class="fa fa-trash" aria-hidden="true" ng-disabled="true"></i>
                                                </a>
                                            </span>-->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <br />

                    <!--<button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>-->
                </div>
                <div class="modal-body" ng-show="roleflg=='Student'">
                    <div class="row">
                        <h5 class="modal-title" style="text-align:center">{{subjdetails}}</h5>
                        <div class="col-sm-12">
                            <table class="table table-hover table-responsive table-bordered text-center">
                                <thead>
                                    <tr>
                                        <th>SL NO</th>
                                        <th width="50%"><a href="" ng-click="sort('ISTINT_Interaction')">Interaction</a></th>
                                        <th>Image</th>
                                        <th><a href="" ng-click="sort('IINTSS_Date')">Reply By </a></th>
                                        <!--<th><a href="" ng-click="sort('IINTSS_Date')">To </a></th>-->
                                        <th><a href="" ng-click="sort('IINTSS_Date')">Date </a></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="rply in viewmessage | orderBy:-ISTINT_Interaction |filter:search">
                                        <td style="width:50px;">{{$index+1}}</td>
                                        <td style="overflow-wrap:break-word">{{ rply.ISTINT_Interaction}}</td>
                                        <td>
                                            <span ng-if="rply.ISTINT_Attachment!=''&& rply.filetype=='jpg' || rply.filetype=='png' || rply.filetype=='svg'|| rply.filetype=='jpeg' || rply.filetype=='gif'">
                                                <a class="text-aqua" href="" ng-click="viewphoto(rply)" data-placement="bottom" data-toggle="tooltip" title="View">
                                                    <i class="fa fa-file-image-o" aria-hidden="true"></i>
                                                </a>
                                            </span>

                                            <span ng-if="rply.ISTINT_Attachment!='' && rply.filetype=='pdf' ">
                                                <a class="text-aqua" href="" ng-click="previewpdf(rply.ISTINT_Attachment)" data-placement="bottom" data-toggle="modal" data-target="#showpdf1" title="View">
                                                    <i class="fa fa-file-image-o" aria-hidden="true"></i>
                                                </a>
                                            </span>

                                            <span ng-if="rply.ISTINT_Attachment==''">---</span>

                                        </td>

                                        <td style="overflow-wrap:break-word">{{ rply.Sender}}</td>
                                        <!--<td style="overflow-wrap:break-word">{{ rply.Receiver}}</td>-->
                                        <!--<td style="width:50px;" ng-if="rply.IINTSS_ByFlg=='Student'"> <i class="fa fa-graduation-cap  fa-1x" aria-hidden="true"></i></td>
    <td style="width:50px;" ng-if="rply.IINTSS_ByFlg=='Staff'"> <i class="fa fa-user fa-1x" aria-hidden="true"></i></td>-->
                                        <td style="overflow-wrap:break-word; width:105px;">{{rply.ISTINT_DateTime | date:'medium'}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <br />
                </div>
                <div class="modal-footer">
                    <md-button type="button" class="md-raised md-primary" data-placement="bottom" data-toggle="modal" title="Reply" data-ng-model="reply" data-target="#rplyModal" ng-click="replymsg();">
                        <i class="fa fa-reply" aria-hidden="true"> &nbsp;    Reply</i>
                    </md-button>
                </div>
            </div>
        </div>
    </div>
    <!--================== Reply Model=================== -->
    <div class="modal fade" id="rplyModal" role="dialog" data-backdrop="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="fa fa-times text-white" aria-hidden="true"></i>
                    </button>
                    <h4 class="modal-title text-white" style="text-align:center; font-weight:800;">{{subject}}</h4>
                </div>
                <form class="form-horizontal ng-pristine ng-valid" name="myFormR" data-ng-submit="saveddata()" role="form" novalidate>
                    <div class="col-sm-12 margin-top-20">
                        <div class="col-sm-3">
                            <div class="form-group">
                                <h4 class="col-sm-10 col-sm-offset-1">Enter Reply :</h4>
                            </div>
                        </div>
                        <div class="col-sm-7">
                            <div class="form-group">
                                <textarea class="form-control" placeholder="Reply here....." name="reply" rows="8" id="comment" ng-model="istinT_Interaction" required></textarea>
                            </div>
                            <div class="error-messages" ng-if="interacted(myFormR.reply)" ng-messages="myFormR.reply.$error">
                                <div ng-message="required">Enter Reply</div>
                            </div>
                        </div>
                    </div>
                </form>

                <!--image upload start-->
                <div class="form-group">
                    <div class="col-sm-3 col-sm-offset-1">
                        <label for="upload-I" class="btn btn-primary upd2">Upload<i class="fa fa-upload faa" aria-hidden="true"></i></label>
                        <input id="upload-I" type="file" data-ng-model="Images" accept="image/png, image/jpeg" name="Images_name"
                               multiple onchange="angular.element(this).scope().imageUpload(this)" ng-hide="hidec==0" />
                    </div>
                </div>

                <div class="text-center">
                    <input type="hidden" ng-model="istinT_Id" value="{{istinT_Id}}" />
                    <md-button type="submit" ng-click="savereply(viewmessage)" class="md-raised md-primary sndbtn2">
                        <i class="fa fa-reply " aria-hidden="true">&nbsp; Send</i>
                    </md-button>
                </div>

                <div class="row">
                    <div class="col-sm-12">
                        <div>
                            <div class="imgview imgvi" ng-show="stepsModel.length>0">
                                <div class="row">
                                    <div class="col-sm-2" ng-repeat="step in stepsModel track by $index">
                                        <img class="img-responsive img-bordered" ng-src="{{step}}" ng-click="previewimg(step)" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--image upload end-->

            </div>
        </div>
    </div>

    <!--=========Shiva==========-->
    <!--==================== Image Preview Model ===========================-->
    <div id="myModalPreview" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">

                    <div class="col-sm-8">
                        <md-button type="button" class="md-raised md-#fafafa" aria-disabled="false">
                            <a href="{{imagepreview1}}">
                                <i class="fa fa-download" aria-hidden="true"></i>
                                Download
                            </a>
                        </md-button>
                    </div>
                    <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true" data-target="#viewrplyModal" ng-click="closeimg()"></i></button>
                    <h3>{{filenames}}</h3>

                </div>

                <div class="modal-body">
                    <div class="box">
                        <div class="box-body">
                            <img id="preview" class="img-responsive" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="myModalPreview1" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="col-sm-8">
                        <md-button type="button" class="md-raised md-#fafafa" aria-disabled="false">
                            <a href="{{imagepreview2}}">
                                <i class="fa fa-download" aria-hidden="true"></i>
                                Download
                            </a>
                        </md-button>
                    </div>
                    <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true" data-target="#viewrplyModal"></i></button>

                </div>
                <div class="modal-body">
                    <div class="box">
                        <div class="box-body">
                            <img id="preview1" class="img-responsive" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="showpdf1" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <form id="qqqq">
                <div class="modal-content">
                    <div class="modal-footer">
                        <div class="col-sm-1">
                            <md-button type="button" class="md-raised md-#fafafa ffffff" aria-disabled="false">
                                <a href="{{imagedown}}">
                                    <i class="fa fa-download" aria-hidden="true"></i>
                                    Download
                                </a>
                            </md-button>
                        </div>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                    <div id="pdfIdzz">
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>


