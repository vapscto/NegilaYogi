
<style>
    .upd1 {
        margin-left: 126px;
    }

    .faa1 {
        margin-left: 8px;
    }
</style>
<section class="content twocoloumn">
    <div ng-init="Getdetails()">
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">Master Document And Mapping</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                </div>
            </div>

            <div class="box-body">
                <div ng-cloak>
                    <md-content>
                        <md-tabs md-dynamic-height md-border-bottom>
                            <!-- Master Quota -->
                            <md-tab label="Master Document">
                                <md-content class="md-padding">
                                    <form class="form-horizontal ng-pristine ng-valid" role="form" method="post" name="myForm" novalidate>
                                        <div class="box box-primary">
                                            <div class="box-header with-border">
                                                <h3 class="box-title">Master Doucment</h3>
                                                <div class="box-tools pull-right">
                                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                                </div>
                                            </div>
                                            <div class="box-body">
                                                <div class="row">
                                                    <div class="col-sm-6 col-sm-offset-3">
                                                        <div class="form-group">
                                                            <label class="control-label col-sm-4">Document Name:<span style="color:Red">*</span></label>
                                                            <div class="col-sm-8">
                                                                <input type="text" name="name" ng-model="DocumentName" class="form-control" required maxlength="30"
                                                                       /><!--allow-pattern="(\s|[a-zA-Z])"-->
                                                                <span ng-show="DocumentName">{{100 - DocumentName.length}} left</span>
                                                                <div class="error-messages" ng-if="interacted(myForm.name)" ng-messages="myForm.name.$error">
                                                                    <div ng-message="required">Enter Document Name</div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-sm-4">Description:<span style="color:Red">*</span></label>
                                                            <div class="col-sm-8">
                                                                <textarea class="form-control" rows="4" id="comment" name="description" ng-model="Description"
                                                                          required maxlength="30"></textarea>
                                                                <span ng-show="Description">{{50 - Description.length}} left</span>
                                                                <div class="error-messages " ng-if="interacted(myForm.description)" ng-messages="myForm.description.$error">
                                                                    <div ng-message="required">Enter Document Description</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <div class="col-sm-8">
                                                                <label> Document Is Mandatory Or Not :</label>
                                                                <input name="mand" type="checkbox" ng-model="checkoruncheck">
                                                                <span class="lbl padding-16"></span>
                                                            </div>
                                                        </div>

                                                        <!--<div class="form-group row">
                                                            <div class="imgview col-md-offset-4" >
                                                                <div ng-repeat="step in stepsModel track by $index">

                                                                    <span>
                                                                        <a title="View Allowence Details" ng-click="previewimg(step)">
                                                                            <span style="color:red">View</span>
                                                                        </a>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-4 col-md-offset-1">


                                                                <input id="upload-I" class="btn btn-primary upd1" type="file" data-ng-model="obj.image" name="Images_name"
                                                                       onchange="angular.element(this).scope().imageUpload(this)" />
                                                            </div>
                                                        </div>-->

                                                        <div class="col-sm-12">
                                                            <table class="table table-hover table-responsive table-bordered">
                                                                <thead>
                                                                    <tr>
                                                                        <th>SL NO</th>
                                                                        <th>Upload File</th>
                                                                        <th>File Name</th>
                                                                        <th>View</th>
                                                                        <!--<th>Action </th>-->
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="other in documentListOtherDetails track by $index" ng-form="myForm13">
                                                                        <td>{{$index+1}}</td>

                                                                        <td>
                                                                            <div class="col-sm-12" style="padding-bottom: 5px;">
                                                                                <div class="form-group text-center">
                                                                                    <label class="custom-file-input file-bluenew" style="width:100%;margin:auto;margin-bottom: 13%;">
                                                                                        <input type="file" name="doc1" accept="video/mp4,audio/*,video/x-ms-wmv,image/*, application/pdf, application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.wordprocessingml.document" data-ng-model="documentListOtherDetails[$index].AMSMD_FilePath" onchange="angular.element(this).scope().selectFileforUploadzdOtherDetail(this, angular.element(this).scope().other)">
                                                                                    </label>
                                                                                    <div class="error-messages" ng-if="interacted13(myForm13.doc1)" ng-messages="myForm13.doc1.$error">
                                                                                        <div ng-message="required">Upload the file</div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <input type="text" class="form-control" ng-model="other.FileName" disabled />
                                                                        </td>
                                                                        <td>
                                                                            <a ng-show="other.AMSMD_FilePath  !=null && other.AMSMD_FilePath !=''" style="color:red;display:inline; font-weight: bolder;" data-ng-click="previewimg_new(other.AMSMD_FilePath)"> view</a>
                                                                        </td>
                                                                        <!--<td>
                                                                            <span class="input-group-addon" ng-hide="documentListOtherDetails.length > 30">
                                                                                <a href="" ng-show="$last" ng-click="addNewDocumentOtherDetail()" style="color:#000;">
                                                                                    <i class="fa fa-plus"></i>
                                                                                </a>
                                                                            </span>
                                                                            <span class="input-group-addon" id="remove" ng-hide="documentListOtherDetails.length ==1">
                                                                                <a href="" ng-click="removeNewDocumentOtherDetail($index,other)" style="color:#000;">
                                                                                    <i class="fa fa-minus" aria-hidden="true"></i>
                                                                                </a>
                                                                            </span>
                                                                        </td>-->
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    </div>
                                                </div>
                                                <div class="text-center">
                                                    <input type="hidden" ng-model="amsmD_Id" value="{{amsmD_Id}}" />
                                                    <md-button type="submit" class="md-raised md-primary" ng-click="savedata()" ng-disabled="form.$invalid">
                                                        <i class="fa fa-save" aria-hidden="true"></i> Save
                                                    </md-button>
                                                    <md-button type="button" class="md-raised md-warn" ng-click="cancel()" ng-disabled="form.$invalid">
                                                        <i class="fa fa-times" aria-hidden="true"></i> Cancel
                                                    </md-button>
                                                </div>
                                            </div>
                                       
                                    </form>

                                    <!-- Quota Grid -->
                                    <div class="box box-primary" ng-show="IsHidden2">
                                        <div class="box-header with-border">
                                            <h3 class="box-title">Master Documents</h3>
                                            <div class="box-tools pull-right">
                                                <button type="button" class="btn btn-box-tool" ng-click="ShowHide2()" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                            </div>
                                        </div>
                                        <div class="box-body" ng-show="IsHidden2">
                                            <div class="row">
                                                <div class="col-sm-4 pull-right">
                                                    <div class="form-group">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-search"></i>
                                                            </span>
                                                            <input class="form-control" ng-model="searchValue" type="text" placeholder="search here...!!!">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <table class="table table-hover table-responsive table-bordered">
                                                <thead>

                                                    <tr>
                                                        <th width="100">
                                                            SL. NO.
                                                        </th>
                                                        <th>
                                                            <a href="" ng-click="sort('amsmD_DocumentName')">Name</a>
                                                        </th>
                                                        <th>
                                                            <a href="" ng-click="sort('amsmD_Description')">Description</a>
                                                        </th>
                                                        <th>
                                                            <a href="" ng-click="sort('amsmD_FLAG')">Mandatory</a>
                                                        </th>

                                                        <th>Action</th>
                                                </thead>
                                                <tbody>

                                                    <tr dir-paginate="newuser in filterValue1 = (gridviewDetails | filter : filterValue)  |orderBy:sortKey:sortReverse  |itemsPerPage:itemsPerPage" current-page="currentPage">
                                                        <td class="text-center" style="text-align:center">{{itemsPerPage *(currentPage-1)+$index+1}}</td>
                                                        <td class="text-left">{{ newuser.amsmD_DocumentName }}</td>
                                                        <td class="text-left">{{ newuser.amsmD_Description }}</td>
                                                        <td class="text-center">
                                                            <a href="javascript:void(0)" ng-if="newuser.amsmD_FLAG==true" data-toggle="tooltip" title="Mandatory">
                                                                <i class="fa fa-check text-green" aria-hidden="true"></i>
                                                            </a>

                                                            <a href="javascript:void(0)" ng-if="newuser.amsmD_FLAG==false" data-toggle="tooltip" title="Not Mandatory">
                                                                <i class="fa fa-times text-red" aria-hidden="true"></i>
                                                            </a>

                                                        </td>
                                                        <td class="text-center">
                                                            <a href="javascript:void(0)" ng-click="Editdata(newuser.amsmD_Id)" data-toggle="tooltip" title="Edit"><i class="fa fa-pencil-square-o text-primary" aria-hidden="true"></i></a>
                                                            <a href="javascript:void(0)" ng-click="Deletedata(newuser.amsmD_Id)" data-toggle="tooltip" title="Delete"><i class="fa fa-trash text-danger" aria-hidden="true"></i></a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <dir-pagination-controls max-size="5"
                                                                     direction-links="true"
                                                                     boundary-links="true">
                                            </dir-pagination-controls>
                                        </div>
                                    </div>

                                </md-content>
                            </md-tab>

                            <!-- Quota Category -->
                            <md-tab label="Document Mapping">
                                <md-content class="md-padding">
                                    <form class="form-horizontal ng-pristine ng-valid" role="form" method="post" name="myForm1" novalidate>
                                        <div class="box box-primary">
                                            <div class="box-header with-border">
                                                <h3 class="box-title">Document Mapping</h3>
                                                <div class="box-tools pull-right">
                                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                                </div>
                                            </div>
                                            <div class="box-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label class="control-label col-sm-4">Document Name :<span style="color:Red">*</span></label>
                                                            <div class="col-sm-8">
                                                                <select class="form-control" id="sel1" name="doc" ng-model="AMSMD_Id_New" required>
                                                                    <option value="" label="Select Document"> </option>
                                                                    <option ng-repeat="option1 in documentlist" value="{{option1.amsmD_Id}}" ng-selected="{{option1.Selected == true}}">
                                                                        {{option1.amsmD_DocumentName}}
                                                                    </option>
                                                                </select>
                                                                <div class="error-messages" ng-if="interacted1(myForm1.doc)" ng-messages="myForm1.doc.$error">
                                                                    <div ng-message="required">Select Document Name</div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="control-label col-sm-4"> Quota Name :<span style="color:Red">*</span></label>
                                                            <div class="col-sm-8">
                                                                <select class="form-control" id="sel1" name="quo" ng-model="acQ_Id" required>
                                                                    <option value="" label="Select Quota"> </option>
                                                                    <option ng-repeat="option1 in quotalist" value="{{option1.acQ_Id}}" ng-selected="{{option1.Selected == true}}">
                                                                        {{option1.acQ_QuotaName}}
                                                                    </option>
                                                                </select>
                                                                <div class="error-messages" ng-if="interacted1(myForm1.quo)" ng-messages="myForm1.quo.$error">
                                                                    <div ng-message="required">Select Quota Name</div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="control-label col-sm-4">Course :<span style="color:Red">*</span></label>
                                                            <div class="col-sm-8">
                                                                <select class="form-control" id="sel1" name="cour" ng-model="amcO_Id" ng-change="onchangecourse()" required>
                                                                    <option value="" label="Select Course"> </option>
                                                                    <option ng-repeat="option1 in courselist" value="{{option1.amcO_Id}}" ng-selected="{{option1.Selected == true}}">
                                                                        {{option1.amcO_CourseName}}
                                                                    </option>
                                                                </select>
                                                                <div class="error-messages" ng-if="interacted1(myForm1.cour)" ng-messages="myForm1.cour.$error">
                                                                    <div ng-message="required">Select Course</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <div class="col-sm-8">
                                                                <label> Document Is Mandatory Or Not :</label>
                                                                <input name="mand" type="checkbox" ng-model="docmandotaryornot">
                                                                <span class="lbl padding-16"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <label class="control-label col-sm-4">Branch :<span style="color:Red">*</span></label>
                                                        <div class="form-group">
                                                            <div class="col-sm-4">
                                                                <label>
                                                                    <input type="checkbox" ng-model="detail_checked" ng-click="all_check()">
                                                                    <span class="lbl padding-8">Select All</span>
                                                                </label>
                                                            </div>
                                                            <div class="multiselect col-sm-8">
                                                                <label ng-repeat="option3 in branchlist" data-ng-model="AMB_Id" value="{{option3.amB_Id}}">
                                                                    <input name="branch" ng-model="option3.ambid" type="checkbox" ng-required="isOptionsRequired()" ng-change="addColumn2(option3)">
                                                                    <span class="lbl padding-8">
                                                                        {{option3.amB_BranchName}}
                                                                    </span>
                                                                </label>
                                                            </div>

                                                            <div class="col-sm-8 col-sm-offset-4 error-messages" ng-if="interacted1(myForm1.branch)" ng-messages="myForm1.branch.$error">
                                                                <div ng-message="required">Please Select Branch</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="text-center">
                                                    <input type="hidden" ng-model="acqC_Id" value="{{acqC_Id}}" />
                                                    <md-button type="submit" class="md-raised md-primary" ng-click="savedata1()" ng-disabled="form.$invalid">
                                                        <i class="fa fa-save" aria-hidden="true"></i> Save
                                                    </md-button>
                                                    <md-button type="button" class="md-raised md-warn" ng-click="cancel1()" ng-disabled="form.$invalid">
                                                        <i class="fa fa-times" aria-hidden="true"></i> Cancel
                                                    </md-button>

                                                </div>
                                            </div>

                                        </div>
                                    </form>

                                    <!-- Quota Category Grid -->
                                    <div class="box box-primary" ng-show="IsHidden1">
                                        <div class="box-header with-border">
                                            <h3 class="box-title">Document Mapping List</h3>
                                            <div class="box-tools pull-right">
                                                <button type="button" ng-click="ShowHide1()" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                                            </div>
                                        </div>
                                        <form class="form-horizontal" role="form" enctype="multipart/form-data" novalidate>
                                            <div class="box-body" ng-show="IsHidden1">
                                                <div class="">
                                                    <div class="col-sm-4 pull-right">
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <span class="input-group-addon">
                                                                    <i class="fa fa-search"></i>
                                                                </span>
                                                                <input class="form-control" ng-model="searchValue1" type="text" placeholder="search here...!!!">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <table class="table table-hover table-responsive table-bordered">
                                                    <thead>
                                                        <tr>
                                                            <th>
                                                                <a href="" ng-click="sort('sno')">SL. No.</a>
                                                            </th>
                                                            <th><a href="" ng-click="sort('acQ_QuotaName')">Quota Name</a></th>
                                                            <th><a href="" ng-click="sort('amcO_CourseName')">Course Name</a> </th>
                                                            <th><a href="" ng-click="sort('amB_BranchName')">Branch Name</a> </th>
                                                            <th>Action </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr dir-paginate="user1 in filterValue11 = (getdetails1 | filter : filterValue01)   |orderBy:sortKey1:sortReverse1  |itemsPerPage:itemsPerPage1" current-page="currentPage1" ng-class-odd="'odd'">
                                                            <td class="text-center">{{itemsPerPage1 *(currentPage1-1)+$index+1}}</td>
                                                            <td class="text-left" style="overflow-wrap:break-word">{{ user1.acQ_QuotaName}}</td>
                                                            <td class="text-left" style="overflow-wrap:break-word">{{ user1.amcO_CourseName}}</td>
                                                            <td class="text-left">{{ user1.amB_BranchName}}</td>
                                                            <td class="text-center">
                                                                <a href="javascript:void(0)" data-target="#myModal" ng-click="getdoc(user1)"
                                                                   class="text-danger" data-placement="bottom" data-toggle="tooltip" title="Details">
                                                                    <i class="fa fa-eye text-purple"></i>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <dir-pagination-controls max-size="5" direction-links="true" boundary-links="true"> </dir-pagination-controls>
                                            </div>
                                        </form>
                                    </div>
                                </md-content>
                            </md-tab>
                        </md-tabs>
                    </md-content>
                </div>
            </div>
        </div>
    </div>
</section>
<div class="modal fade modal-medium" id="myModal" role="dialog">
    <div class="modal-dialog modal-md">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
                <!--<button type="button" class="close" data-dismiss="modal">&times;</button>-->
                <h4 class="modal-title text-white">"{{Category_Name}}" Mapped Documents</h4>
            </div>
            <div class="modal-body">
                <table class="table table-hover table-responsive table-bordered">
                    <thead>
                        <tr>
                            <th>
                                SLNO
                            </th>
                            <th>
                                Document Name
                            </th>
                            <th>
                                Mandatory
                            </th>
                            <th>
                                Action
                            </th>
                        </tr>
                    </thead>
                    <tbody ng-sortable="configA">
                        <tr ng-repeat="user in doclist">
                            <td class="text-center">{{$index+1}}</td>
                            <td class="text-left">{{ user.amsmD_DocumentName}}</td>
                            <td class="text-center">
                                <a href="javascript:void(0)" ng-if="user.acqcD_CompulsoryFlg==true" data-toggle="tooltip" title="Mandatory">
                                    <i class="fa fa-check text-green" aria-hidden="true"></i>
                                </a>

                                <a href="javascript:void(0)" ng-if="user.acqcD_CompulsoryFlg==false" data-toggle="tooltip" title="Not Mandatory">
                                    <i class="fa fa-times text-red" aria-hidden="true"></i>
                                </a>
                            </td>
                            <td class="text-center">
                                <a ng-if="!user.acqcD_ActiveFlg" href="javascript:void(0)" style="color:green;" ng-click="deactive_sub(user);">
                                    <i class="fa fa-toggle-off text-red" aria-hidden="true"></i>
                                    <md-tooltip md-direction="down" md-z-index="1151">Activate Now</md-tooltip>
                                </a>
                                <a ng-if="user.acqcD_ActiveFlg" href="javascript:void(0)" style="color:red;" ng-click="deactive_sub(user);">
                                    <i class="fa fa-toggle-on text-green" aria-hidden="true"></i>
                                    <md-tooltip md-direction="down" md-z-index="1151">Deactivate Now</md-tooltip>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>

<div id="myModalPreview" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <div class="col-sm-8">
                    <md-button type="button" class="md-raised md-#fafafa" aria-disabled="false">
                        <a href="{{imagepreview}}">
                            <i class="fa fa-download" aria-hidden="true"></i>
                            Download
                        </a>
                    </md-button>
                </div>
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true" data-target="#viewrplyModal" ng-click="closeimg()"></i></button>
                <h3>{{filenames}}</h3>
            </div>
            <div class="modal-body">
                <div class="box">
                    <div class="box-body">
                        <img id="preview1" class="img-responsive" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="showpdf" class="modal fade" role="dialog" data-backdrop="static">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
            <embed id="idpdf" ng-src="{{content}}" onload="refreshDialer();" style="width: 100%;" height="1000" />
            <div class="modal-body" oncontextmenu="return false"></div>
        </div>
    </div>
</div>
<div id="myimagePreview" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width:55%;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times text-white" aria-hidden="true"></i></button>
                <h3>{{filenames}}</h3>
            </div>
            <div class="modal-body">
                <div class="box">
                    <div class="box-body">
                        <img id="preview" class="img-responsive" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

