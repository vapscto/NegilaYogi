<section class="content twocoloumn">
    <div>
        <form class="form-horizontal ng-pristine ng-valid" name="myForm" role="form" novalidate>
            <div ng-init="BindData()">
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title">Fee Opening Balance</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Academic Year :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sm" name="yeardd" ng-model="cfg.ASMAY_Id" ng-change="get_courses()" required>
                                            <option value="">Select Academic Year</option>
                                            <option ng-repeat="year in year_list" value="{{year.asmaY_Id}}" ng-selected="{{year.asmaY_Id == cfg.ASMAY_Id}}">{{year.asmaY_Year}}</option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.yeardd)" ng-messages="myForm.yeardd.$error">
                                            <div ng-message="required">Please Select Academic Year</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Branch :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sm" name="brnh" ng-model="AMB_Id" ng-change="get_semisters()" required>
                                            <option value="">Select Branch</option>
                                            <option ng-repeat="branch in branch_list" value="{{branch.amB_Id}}" ng-selected="branch.amB_Id == AMB_Id">{{branch.amB_BranchName}}</option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.brnh)" ng-messages="myForm.brnh.$error">
                                            <div ng-message="required">Please Select Branch</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Fee Group :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sm" name="group" ng-model="FMG_Id" ng-change="get_heads()" required>
                                            <option value="">Select Group</option>
                                            <option ng-repeat="grp in group_list" value="{{grp.fmG_Id}}" ng-selected="grp.Selected == true">{{grp.fmG_GroupName}}</option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.group)" ng-messages="myForm.group.$error">
                                            <div ng-message="required">Please Select Group</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Fee Installment:<strong style="color:red;">*</strong></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel1" ng-model="FTI_Id" name="Installment" required>
                                            <option value="">Select Installment</option>
                                            <option ng-repeat="inst in installment_list" value="{{inst.ftI_Id}}" ng-selected="{{inst.Selected == true}}">
                                                {{inst.ftI_Name}}
                                            </option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.Installment)" ng-messages="myForm.Installment.$error">
                                            <div ng-message="required">Please Select Installment</div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Course :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sm" name="crse" ng-model="AMCO_Id" ng-change="get_branches()" required>
                                            <option value="">Select Course</option>
                                            <option ng-repeat="course in course_list" value="{{course.amcO_Id}}" ng-selected="course.amcO_Id == AMCO_Id">{{course.amcO_CourseName}}</option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.crse)" ng-messages="myForm.crse.$error">
                                            <div ng-message="required">Please Select Course</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Semester :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sm" name="sem" ng-model="AMSE_Id" ng-change="get_groups()" required>
                                            <option value="">Select Semester</option>
                                            <option ng-repeat="semi in semister_list" value="{{semi.amsE_Id}}" ng-selected="semi.amsE_Id == AMSE_Id">{{semi.amsE_SEMName}}</option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.sem)" ng-messages="myForm.sem.$error">
                                            <div ng-message="required">Please Select Semester</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Fee Head :<span style="color:Red">*</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sm" name="head" ng-model="FMH_Id" ng-change="get_installments()" required>
                                            <option value="">Select Head</option>
                                            <option ng-repeat="hd in head_list" value="{{hd.fmH_Id}}" ng-selected="hd.Selected == true">{{hd.fmH_FeeName}}</option>
                                        </select>
                                        <div class="error-messages" ng-if="interacted(myForm.head)" ng-messages="myForm.head.$error">
                                            <div ng-message="required">Please Select Head</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="">
                                <div class="text-center">
                                    <md-button type="button" class="md-raised md-primary" id="save-btn" ng-click="get_students()">
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                        <!--Export Student Exam Data Format--> Search
                                    </md-button>
                                    <md-button type="button" class="md-raised md-warn" ng-show="!student_list.length>0" data-ng-click="clear()">
                                        <i class="fa fa-times" aria-hidden="true"></i>
                                        Cancel
                                    </md-button>
                                </div>
                            </div>
                            <div class="col-sm-12" ng-show="student_list.length>0">

                                <div class="well">
                                    <div class="">
                                        <div class="col-sm-4 pull-right">
                                            <div class="form-group">
                                                <div class="input-group">
                                                    <input class="form-control" ng-model="search" type="text" placeholder="search here...">
                                                    <span class="input-group-addon">
                                                        <i class="fa fa-search"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-center">

                                        <table class="table table-hover table-responsive table-bordered text-center">
                                            <thead>
                                                <tr>
                                                    <th>
                                                        SL NO
                                                    </th>
                                                    <th>
                                                        <label>
                                                            <label>
                                                                <input type="checkbox" value="" ng-click="toggleAll()" ng-model="all">
                                                                <span class="lbl padding-8"></span>
                                                            </label>

                                                        </label>
                                                    </th>
                                                    <th>
                                                        <a href="" ng-click="sort('amcsT_FirstName')">Student Name</a>
                                                    </th>
                                                    <th>
                                                        <a href="" ng-click="sort('amcsT_AdmNo')">ADM. No</a>
                                                    </th>
                                                    <th>
                                                        <a href="" ng-click="sort('acysT_RollNo')">Roll No.</a>
                                                    </th>
                                                    <th>Student Due</th>
                                                    <th>Institution Due</th>
                                                </tr>
                                            </thead>

                                            <tbody>
                                                <tr ng-repeat="user in student_list | orderBy:sortKey:reverse |filter:search">
                                                    <td>{{$index+1}}</td>
                                                    <td>
                                                        <label>
                                                            <input type="checkbox" name="adcheckt" value="{{user.xyz}}" ng-change="optionToggled()" ng-model="user.xyz"><span class="lbl padding-8"></span>
                                                        </label>
                                                    </td>
                                                    <td>
                                                        {{ user.amcsT_FirstName}} <span ng-if="user.amcsT_MiddleName !== null" class="lbl padding-8">  {{ user.amcsT_MiddleName}} </span> <span ng-if="user.amcsT_LastName !== null" class="lbl padding-8">{{ user.amcsT_LastName}}</span><!--{{ user.amcsT_FirstName + ' ' + user.amcsT_MiddleName + ' ' + user.amcsT_LastName}}-->
                                                    </td>
                                                    <td>{{user.amcsT_AdmNo}}</td>
                                                    <td>{{user.acysT_RollNo}}</td>
                                                    <!--<td>
                                                        <input type="text" name="maxperiod_{{user.amcsT_Id}}" class="form-control active" ng-model="user.ACASMP_MaxPeriod" maxlength="4" allow-pattern="[0-9]" placeholder="Enter Max.Period" ng-required="user.xyz" />
                                                        <div class="error-messages" ng-if="interacted(myForm['maxperiod_'+user.amcsT_Id])" ng-messages="myForm['maxperiod_'+user.amcsT_Id].$error">
                                                            <div ng-message="required">Please Enter Max.Period</div>
                                                        </div>
                                                    </td>-->
                                                    <td>
                                                        <input class="form-control" type="text" placeholder="Enter Amount..." allow-pattern="[0-9 ]" ng-model="user.FCMOB_Student_Due" name="t1_{{user.amcsT_Id}}" ng-disabled="!user.xyz" ng-required="user.xyz" ng-change="user.FCMOB_Institution_Due=0" />
                                                        <div class="error-messages" ng-if="interacted(myForm['t1_'+user.amcsT_Id])" ng-messages="myForm['t1_'+user.amcsT_Id].$error">
                                                            <div ng-message="required">Please Enter Student Due</div>
                                                        </div>
                                                    </td><!--ng-change="clear_dues_inst(user)"-->
                                                    <td>
                                                        <input class="form-control" type="text" placeholder="Enter Amount..." allow-pattern="[0-9 ]" data-ng-model="user.FCMOB_Institution_Due" name="t2_{{user.amcsT_Id}}" ng-disabled="!user.xyz" ng-required="user.xyz" ng-change="user.FCMOB_Student_Due=0" />
                                                        <div class="error-messages" ng-if="interacted(myForm['t2_'+user.amcsT_Id])" ng-messages="myForm['t2_'+user.amcsT_Id].$error">
                                                            <div ng-message="required">Please Enter Institution Due</div>
                                                        </div>
                                                    </td><!--ng-change="clear_dues_stu(user)"-->
                                                    <td hidden="hidden">{{user.amcsT_Id}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                        <div class="text-center" ng-show="student_list.length>0">
                            <input type="hidden" ng-model="AMST_Id" value="{{amcsT_Id}}" />
                            <md-button type="button" class="md-raised md-primary" ng-click="savedata()">
                                <i class="fa fa-floppy-o" aria-hidden="true"></i>
                                Save
                            </md-button>
                            <md-button type="button" class="md-raised md-warn" data-ng-click="clear()">
                                <i class="fa fa-times" aria-hidden="true"></i>
                                Cancel
                            </md-button>
                        </div>
                    </div>

                </div>
            </div>
        </form>
    </div>
</section>