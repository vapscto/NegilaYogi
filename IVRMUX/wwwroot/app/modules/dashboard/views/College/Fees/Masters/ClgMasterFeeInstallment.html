

<section class="content" data-ng-init="loaddata()">
    <div class="well">
        <md-content>
            <md-tabs md-dynamic-height md-border-bottom>
                <md-tab label="Master Installment" ng-click="Clear()">
                    <md-content class="md-padding">
                        <form class="form-horizontal ng-pristine ng-valid" role="form" name="form1" novalidate>
                            <div class="">
                                <div class="box box-primary">
                                    <div class="box-header with-border">
                                        <h3 class="box-title">Master Installment</h3>
                                        <div class="box-tools pull-right">
                                            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                        </div>
                                    </div>
                                    <div class="box-body">
                                        <div class="row">
                                            <div class="col-sm-6 col-sm-offset-3">
                                                <div class="form-group">
                                                    <label class="control-label col-sm-4">Installment Name:<span style="color:Red">*</span></label>
                                                    <div class="col-sm-8">
                                                        <input type="text" name="name123" ng-model="FMI_Name" class="form-control" allow-pattern="(\s|[a-zA-Z])" required ng-disabled="disableinstallmentnme" />
                                                        <div class="error-messages" ng-if="interacted(form1.name123)" ng-messages="form1.name123.$error">
                                                            <div ng-message="required">Enter the Installment Name</div>
                                                            <div ng-message="pattern">The Installment Name contains only alphabets</div>
                                                            <div ng-message="minlength">The Installment Name should contain minimum 3 alphabets </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="sel2" class="control-label col-sm-4">Type:<span style="color:Red">*</span></label>
                                                    <div class="col-sm-8">
                                                        <select class="form-control" data-ng-model="FMI_Installment_Type" id="sel1" name="typ" ng-change="TextBoxChanged1(FMI_Installment_Type)" required ng-disabled="disabletypename">
                                                            <option value="">Select</option>
                                                            <option value="1">General</option>
                                                            <option value="2">Once In a Carrier</option>
                                                            <option value="3">Monthly</option>
                                                            <option value="4">Quarterly</option>
                                                            <option value="5">Yearly</option>
                                                            <option value="6">Half Yearly</option>
                                                            <option value="7">Bi Monthly</option>
                                                            <option value="8">Anytime</option>
                                                        </select>
                                                        <div class="error-messages" ng-if="interacted(form1.typ)" ng-messages="form1.typ.$error">
                                                            <div ng-message="required">Enter the Installment Type</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group" ng-show="noinstall">
                                                    <input type="hidden" name="forcompare" ng-model="forcompare" value="{{forcompare}}" />
                                                    <label class="control-label col-sm-4">No. of installments:<span style="color:Red">*</span></label>
                                                    <div class="col-sm-8">
                                                        <input type="text" name="noofinstall" ng-change="TextBoxChanged(dynamictable)" ng-model="FMI_No_Of_Installments" allow-pattern="([0-9])" maxlength="2" class="form-control" ng-required="FMI_Installment_Type=='1'" />
                                                        <div class="error-messages" ng-if="interacted(form1.noofinstall)" ng-messages="form1.noofinstall.$error">
                                                            <div ng-message="required">Enter the No. of installments </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="box box-primary" ng-show="grigview2">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Fee Installment Grid View</h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                                    </div>
                                </div>
                                <div class="box-body">

                                    <table id="personalDetail" class="table table-hover table-responsive table-bordered text-center">
                                        <thead>
                                            <tr>
                                                <th>
                                               SLNO
                                                </th>
                                                <th>
                                                    <a href="" ng-click="order('Installment')">Installment Name</a>
                                                </th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="user in students">
                                                <td>{{ $index+1}}</td>
                                                <td>
                                                    <input type="hidden" name="uyhjg" ng-model="user.ftI_Id" value="{{user.ftI_Id}}" />
                                                    <input type="text" name="insfname" ng-model="user.ftI_Name" class="form-control" required />  <!--allow-pattern="[a-zA-Z ]"-->
                                                </td>

                                            </tr>
                                        </tbody>
                                    </table>

                                    <div class="error-messages" ng-if="interacted(form1.insfname)" ng-messages="form1.insfname.$error">
                                        <div ng-message="required">Enter the Installment Name</div>
                                    </div>
                                    <hr />
                                    <div class="text-center">
                                        <input type="hidden" name="fmI_Id" ng-model="fmI_Id" value="{{fmI_Id}}" />

                                        <md-button type="submit" class="md-raised md-primary" ng-click="savedata(students)" id="save-btn">
                                            <i class="fa fa-floppy-o" aria-hidden="true"></i>
                                            Save
                                        </md-button>
                                        <md-button type="button" class="md-raised md-warn" data-ng-click="Clear()">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                            Cancel
                                        </md-button>
                                    </div>
                                </div>

                            </div>
                        </form>
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <h3 class="box-title">Fee Master Installment Grid View</h3>
                                <!--<h3 class="box-title"> (Total Count -  {{totcountfirst}} )</h3>-->
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="">
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label class="control-label">
                                                <b> Total Grid Records :</b>
                                                <label class="badge">
                                                    {{totcountfirst}}
                                                </label>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group" ng-if="searchvalue!=''">
                                            <label class="control-label">
                                                <b>Total Records Searched : </b>
                                                <label class="badge">
                                                    {{filterValue.length}}
                                                </label>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 pull-right">
                                        <div class="form-group">
                                            <div class="input-group">
                                                <span class="input-group-addon">
                                                    <i class="fa fa-search"></i>
                                                </span>
                                                <input class="form-control" ng-model="searchvalue" type="text" placeholder="search here...">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <table class="table table-hover table-responsive table-bordered text-center">
                                    <thead>
                                        <tr>
                                            <th>
                                                SLNO
                                            </th>
                                            <th>
                                                <a href="" ng-click="sort('fmI_Name')">Installment Name</a>
                                            </th>
                                            <th>
                                                <a href="" ng-click="sort('fmI_No_Of_Installments')">No Of Installments</a>
                                            </th>
                                            <th>
                                                <a href="" ng-click="sort('fmI_ActiceFlag')">Active/InActive</a>
                                            </th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr dir-paginate="user in filterValue=(databindDB  | filter : searchvalue) |orderBy:sortKey:reverse |itemsPerPage:itemsPerPage" current-page="currentPage" ng-class-odd="'odd'" pagination-id="page1">
                                            <td>{{itemsPerPage *(currentPage-1)+$index+1}}</td>
                                            <td>{{ user.fmI_Name}}</td>
                                            <td>{{ user.fmI_No_Of_Installments}}</td>
                                            <td style="text-transform:capitalize;">{{ user.fmI_ActiceFlag}}</td>
                                            <td class="text-center">
                                                <a href="javascript:void(0)" ng-click="getorgvalue(user)" class="text-primary" data-placement="bottom" data-toggle="tooltip" title="Edit">
                                                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                                </a>

                                                <span ng-if="user.fmI_ActiceFlag ===false ">
                                                    <a href="" ng-click="deactive(user)"
                                                       class="text-green" data-placement="bottom" data-toggle="tooltip" title="Activate">
                                                        Activate
                                                    </a>
                                                </span>
                                                <span ng-if="user.fmI_ActiceFlag === true ">
                                                    <a href="" ng-click="deactive(user)"
                                                       class="text-danger" data-placement="bottom" data-toggle="tooltip" title="Deactivate">
                                                        Deactivate
                                                    </a>
                                                </span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <dir-pagination-controls max-size="5" pagination-id="page1"
                                                         direction-links="true"
                                                         boundary-links="true">
                                </dir-pagination-controls>
                            </div>
                        </div>

                    </md-content>
                </md-tab>

                <md-tab label="Master Installment Due Date" ng-click="Clear1()">
                    <md-content class="md-padding">
                        <form class="form-horizontal" role="form" name="form2" novalidate>
                            <div class="">
                                <div class="box box-primary">
                                    <div class="box-header with-border">
                                        <h3 class="box-title">Master Installment Due Date</h3>
                                        <div class="box-tools pull-right">
                                            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                        </div>
                                    </div>
                                    <div class="box-body">
                                        <div class="row">
                                            <div class="col-sm-6 col-sm-offset-3">

                                                <div class="form-group">
                                                    <label class="control-label col-sm-4">Academic Year :<span style="color:Red">*</span></label>
                                                    <div class="col-sm-8">
                                                        <select class="form-control" name="yearsselect" id="sel1"
                                                                data-ng-model="ASMAY" ng-disabled="ASMAY" required>
                                                            <option value=""> Select </option>
                                                            <option ng-repeat="options in arrlist6" value="{{options.asmaY_Id}}" ng-selected="{{options.Selected == true}}">
                                                                {{options.asmaY_Year}}
                                                            </option>
                                                        </select>
                                                        <div class="error-messages" ng-if="interacted(form2.yearsselect)" ng-messages="form2.yearsselect.$error">
                                                            <div ng-message="required">Select Academic Year </div>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="form-group">
                                                    <label class="control-label col-sm-4" for="email">Installment Type:<span style="color:Red">*</span></label>
                                                    <div class="col-sm-8">
                                                        <select class="form-control" id="sel1123" name="instypeselect" ng-model="selectedItem" ng-change="BindGriddatawithcontrols()" required ng-disabled="installmenttypedisable">
                                                            <option value="">--Select--</option>
                                                            <option ng-repeat="datavalues in arrlist7" value="{{datavalues.fmI_Id}}" ng-selected="{{datavalues.Selected == true}}">{{datavalues.fmI_Name}}</option>
                                                        </select>
                                                        <div class="error-messages" ng-if="interacted1(form2.instypeselect)" ng-messages="form2.instypeselect.$error">
                                                            <div ng-message="required">Select the feild Installment Type</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="box box-primary" ng-show="grigviewseconftab">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Fee Master Instalment Grid View</h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                                    </div>
                                </div>
                                <div class="box-body">
                                    <table class="table table-hover table-responsive table-bordered text-center">
                                        <thead>
                                            <tr>
                                                <th>
                                                 SLNO
                                                </th>
                                                <th style="display:none"></th>
                                                <th>
                                                    <a href="" ng-click="sort('FTI_Name')">Installment Name</a>
                                                </th>
                                                <th><a href="" ng-click="sort('FTIDD_FromDate')">Installment From Date</a> </th>
                                                <th><a href="" ng-click="sort('FTIDD_ToDate')">Installment To Date</a> </th>
                                                <th><a href="" ng-click="sort('FTIDD_ApplicableDate')">Installment Applicable</a> </th>
                                                <th><a href="" ng-click="sort('FTIDD_DueDate')">Installment Due Date</a> </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="user in dynamictable | orderBy:predicate:default | filter:paginate| filter:search" ng-class-odd="'odd'" ng-form="dataform">
                                                <td>{{$index+1}}</td>
                                                <td style="display:none">{{ user.ftidD_Id}}</td>
                                                <td>{{ user.ftI_Name}}</td>

                                                <td>
                                                    <md-datepicker name="fd" onkeydown="return false" ng-model="user.ftidD_FromDate" ng-change='setTodate(user.ftidD_FromDate)' placeholder="Enter date" required md-min-date="fromminDate" md-max-date="frommaxDate"></md-datepicker>
                                                    <div class="error-messages" ng-if="interacted1(dataform.fd)" ng-messages="dataform.fd.$error">
                                                        <div ng-message="required">Please fill out this field </div>
                                                    </div>
                                                    <!--<input type="date" name="fd1" ng-model="user.ftidD_FromDate" class="form-control" required />-->
                                                </td>

                                                <td>
                                                    <md-datepicker name="fd1" onkeydown="return false" ng-model="user.ftidD_ToDate" md-min-date="minDate" md-max-date="maxDate" placeholder="Enter date" ng-change='checkErr(user.ftidD_FromDate,user.ftidD_ToDate)' required></md-datepicker>
                                                    <div class="error-messages" ng-if="interacted1(dataform.fd1)" ng-messages="dataform.fd1.$error">
                                                        <div ng-message="required">Please fill out this field </div>
                                                    </div> <!--<input type="date" name="fd1" ng-model="user.ftidD_ToDate" class="form-control" required />-->
                                                </td>


                                                <td>
                                                    <md-datepicker name="fd2" onkeydown="return false" ng-model="user.ftidD_ApplicableDate" placeholder="Enter date" required md-min-date="appminDate" md-max-date="appmaxDate"></md-datepicker>
                                                    <div class="error-messages" ng-if="interacted1(dataform.fd2)" ng-messages="dataform.fd2.$error">
                                                        <div ng-message="required">Please fill out this field </div>
                                                    </div> <!--<input type="date" name="fd2" ng-model="user.ftidD_ApplicableDate" class="form-control" required />-->
                                                </td>


                                                <td>
                                                    <md-datepicker name="fd3" onkeydown="return false" ng-model="user.ftidD_DueDate" placeholder="Enter date" required md-min-date="dueminDate" md-max-date="duemaxDate"></md-datepicker>
                                                    <div class="error-messages" ng-if="interacted1(dataform.fd3)" ng-messages="dataform.fd3.$error">
                                                        <div ng-message="required">Please fill out this field </div>
                                                    </div> <!--<input type="date" name="fd3" ng-model="user.ftidD_DueDate" class="form-control" required />-->
                                                </td>

                                            </tr>
                                        </tbody>
                                    </table>
                                    <span style="color:red;">{{errMessage}}</span>
                                    <div class="well text-center">
                                        <input type="hidden" name="ftidD_Id" ng-model="ftidD_Id" value="{{ftidD_Id}}" />
                                        <md-button type="submit" class="md-raised md-primary" ng-click="savedatadues(dynamictable)" ng-disabled="form.$invalid" id="save-btn">
                                            <i class="fa fa-floppy-o" aria-hidden="true"></i>
                                            Save
                                        </md-button>
                                        <md-button type="button" class="md-raised md-warn" ng-click="Clear1()">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                            Cancel
                                        </md-button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="box box-primary" ng-hide="datanil">
                            <div class="box-header with-border">
                                <h3 class="box-title">Fee Installment DueDate Grid View</h3>
                                <!--<h3 class="box-title">(Total Count - {{totcountsecond}})</h3>-->
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-placement="bottom" data-toggle="tooltip" title="collapsible"><i class="fa fa-minus"></i></button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="">
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label class="control-label">
                                                <b> Total Grid Records :</b>
                                                <label class="badge">
                                                    {{totcountsecond}}
                                                </label>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group" ng-if="searchvalue1!=''">
                                            <label class="control-label">
                                                <b>Total Records Searched : </b>
                                                <label class="badge">
                                                    {{filterValue1.length}}
                                                </label>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 pull-right">
                                        <div class="form-group">
                                            <div class="input-group">
                                                <span class="input-group-addon">
                                                    <i class="fa fa-search"></i>
                                                </span>
                                                <input class="form-control" ng-model="searchvalue1" type="text" placeholder="search here...">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <table class="table table-hover table-responsive table-bordered text-center">
                                    <thead>
                                        <tr>
                                            <th>
                                            SLNO
                                            </th>
                                            <th style="display:none">
                                                <a href="" ng-click="sort1('ftidD_Id')">SLNO</a>
                                            </th>
                                            <th>
                                                <a href="" ng-click="sort1('fname')">Installment Name</a>
                                            </th>
                                            <th><a href="" ng-click="sort1('ftidD_FromDate')">Installment From Date</a> </th>
                                            <th><a href="" ng-click="sort1('ftidD_ToDate')">Installment To Date</a> </th>
                                            <th><a href="" ng-click="sort1('ftidD_ApplicableDate')">Installment Applicable</a> </th>
                                            <th><a href="" ng-click="sort1('ftidD_DueDate')">Installment Due Date</a> </th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr dir-paginate="user in filterValue1=(saveddatadisplay  | filter : searchvalue1) |orderBy:sortKey1:reverse1  |itemsPerPage:itemsPerPage1" current-page="currentPage1" ng-class-odd="'odd'" pagination-id="page2">
                                            <td>{{itemsPerPage1 *(currentPage1-1)+$index+1}}</td>
                                            <td style="display:none">{{ user.ftidD_Id}}</td>
                                            <td>{{user.fname}}</td>
                                            <td>{{user.ftidD_FromDate|date:'dd-MM-yyyy'}}</td>
                                            <td>{{user.ftidD_ToDate|date:'dd-MM-yyyy'}}</td>
                                            <td>{{user.ftidD_ApplicableDate|date:'dd-MM-yyyy'}}</td>
                                            <td>{{user.ftidD_DueDate|date:'dd-MM-yyyy'}}</td>
                                            <td class="text-center">
                                                <a href="javascript:void(0)" ng-click="getorgvalueY(user)" class="text-primary" data-placement="bottom" data-toggle="tooltip" title="Edit">
                                                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                                </a>
                                                <a href="javascript:void(0)" ng-click="deletedataY(user)"
                                                   class="text-danger" data-placement="bottom" data-toggle="tooltip" title="Delete">
                                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <dir-pagination-controls max-size="5" pagination-id="page2"
                                                         direction-links="true"
                                                         boundary-links="true">
                                </dir-pagination-controls>
                            </div>
                        </div>

                    </md-content>
                </md-tab>
            </md-tabs>
        </md-content>
    </div>
</section>